(this["webpackJsonpmusic-mweb"]=this["webpackJsonpmusic-mweb"]||[]).push([[0],{10:function(e,t,n){e.exports={container:"MiniPlayer_container__1fcGD",visible:"MiniPlayer_visible__3Dz5A",cd:"MiniPlayer_cd__3HsXL",cdImageWrapper:"MiniPlayer_cdImageWrapper__2tfuC",cdImage:"MiniPlayer_cdImage__3M2rJ",rotate:"MiniPlayer_rotate__2jjF3",playing:"MiniPlayer_playing__2EPEA",text:"MiniPlayer_text__1UzVX",name:"MiniPlayer_name__nSDYy",desc:"MiniPlayer_desc__2I3fU",control:"MiniPlayer_control__2t91O",playIcon:"MiniPlayer_playIcon__28-Nl",listIcon:"MiniPlayer_listIcon__2ASrg"}},14:function(e,t,n){e.exports={header:"MusicList_header__2DSAu",backIcon:"MusicList_backIcon__ePdxO",title:"MusicList_title__37IYn",cover:"MusicList_cover__vrLrC",mask:"MusicList_mask__3Z-Vc",playerWrapper:"MusicList_playerWrapper__3wUJP",play:"MusicList_play__tskpk",playIcon:"MusicList_playIcon__1Ln_z",text:"MusicList_text__3jabf",songListContainer:"MusicList_songListContainer__1KQLk"}},16:function(e,t,n){e.exports={mask:"Confirm_mask__3e6cQ",visible:"Confirm_visible__140Ys",body:"Confirm_body__tgvEh",content:"Confirm_content__vZXKd",footer:"Confirm_footer__sUXiH",footerBtn:"Confirm_footerBtn__3sDPd",closeBtn:"Confirm_closeBtn__rKGJ3"}},17:function(e,t,n){e.exports={container:"Recommend_container__1_pE7",content:"Recommend_content__3O6lw",listTitle:"Recommend_listTitle__22osE",item:"Recommend_item__VMkzA",icon:"Recommend_icon__2aP8r",text:"Recommend_text__3uP3k",name:"Recommend_name__2WM6a",desc:"Recommend_desc__2c1DP","loading-container":"Recommend_loading-container__3ctAi"}},19:function(e,t,n){e.exports={item:"SongList_item__1boDc",rank:"SongList_rank__Ff-ju",icon:"SongList_icon__2Z1k4",text:"SongList_text__bwiI0",content:"SongList_content__coXSI",name:"SongList_name__1R3FQ",desc:"SongList_desc__3LlhI"}},20:function(e,t,n){e.exports={container:"List_container__28AaT",list:"List_list__2O6T7",item:"List_item__2T6I7",icon:"List_icon__IDvQM",info:"List_info__3TZOt",name:"List_name__1hi-u",comment:"List_comment__H9sM8"}},27:function(e,t,n){e.exports={header:"Header_header__3VPBX",icon:"Header_icon__3K7p0",text:"Header_text__2nUCj",mine:"Header_mine__1ifKZ",iconMine:"Header_iconMine__1ynUa"}},28:function(e,t,n){e.exports={container:"ProgressBar_container__-ZAvS",inner:"ProgressBar_inner__1EIxV",progress:"ProgressBar_progress__3mEJg",progressBtnWrapper:"ProgressBar_progressBtnWrapper__1O2X1",progressBtn:"ProgressBar_progressBtn__1OCt0"}},29:function(e,t,n){e.exports={container:"List_container__189Un",list:"List_list__3dnNW",item:"List_item__iZXqJ",avatar:"List_avatar__1hjoO",name:"List_name__26KdE"}},35:function(e,t,n){e.exports={container:"Toast_container__2dMYp",visible:"Toast_visible__17rvj",content:"Toast_content__SGH46"}},36:function(e,t,n){e.exports={tab:"Tabs_tab__2UsYl",item:"Tabs_item__3ZvGw",link:"Tabs_link__PNMpC"}},37:function(e,t,n){e.exports={container:"ProgressCircle_container__1W7ZF",background:"ProgressCircle_background__2bFqW",progress:"ProgressCircle_progress__1rjw9"}},55:function(e,t,n){},56:function(e,t,n){e.exports={container:"Detail_container__3Z3sL"}},57:function(e,t,n){e.exports={container:"Detail_container__35C0U"}},6:function(e,t,n){e.exports={container:"FullScreenPlayer_container__1WBCF",visible:"FullScreenPlayer_visible__3wYjU",background:"FullScreenPlayer_background__EhGlJ",top:"FullScreenPlayer_top__3dxkU",back:"FullScreenPlayer_back__24XoF",backIcon:"FullScreenPlayer_backIcon__nl8Za",title:"FullScreenPlayer_title__2whcd",subtitle:"FullScreenPlayer_subtitle__15SDT",middle:"FullScreenPlayer_middle__3mfhj",middleLeft:"FullScreenPlayer_middleLeft__3jXL2",cdWrapper:"FullScreenPlayer_cdWrapper__9QpDm",cdImage:"FullScreenPlayer_cdImage__2Tir_",rotate:"FullScreenPlayer_rotate__2o1sX",playing:"FullScreenPlayer_playing__PlMf-",lyricWrapper:"FullScreenPlayer_lyricWrapper__3QkAU",lyric:"FullScreenPlayer_lyric__u2TmU",bottom:"FullScreenPlayer_bottom__Qn1G5",progressWrapper:"FullScreenPlayer_progressWrapper__3bjBe",time:"FullScreenPlayer_time__G0wxb",left:"FullScreenPlayer_left__AQYyE",right:"FullScreenPlayer_right__1g-nO",progressBar:"FullScreenPlayer_progressBar__2RYdW",operations:"FullScreenPlayer_operations__1zkkf",icon:"FullScreenPlayer_icon__3g624",disable:"FullScreenPlayer_disable__1UPqk",leftIcon:"FullScreenPlayer_leftIcon__3xJ0-",centerIcon:"FullScreenPlayer_centerIcon__3Xqyh",rightIcon:"FullScreenPlayer_rightIcon__14U9V",favoriteIcon:"FullScreenPlayer_favoriteIcon__2YgGX"}},60:function(e,t,n){e.exports=n(93)},8:function(e,t,n){e.exports={container:"PlayListModal_container__374-Z",visible:"PlayListModal_visible__36jZw",body:"PlayListModal_body__34_-S",header:"PlayListModal_header__S-RLN",modeIcon:"PlayListModal_modeIcon__1ENBU",modeText:"PlayListModal_modeText__2l8oY",clear:"PlayListModal_clear__2gMK6",clearIcon:"PlayListModal_clearIcon__ZtDnR",list:"PlayListModal_list__3qi0u",item:"PlayListModal_item__2Caa-",current:"PlayListModal_current__2r4d2",songName:"PlayListModal_songName__1qGO5",like:"PlayListModal_like__1o4kB",delete:"PlayListModal_delete__7ohBb",close:"PlayListModal_close__lqFSM"}},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),i=n.n(c),o=n(30),s=n(18),l=n(2),u=n.n(l),m=n(5),d=n(26),f=n(4),p=n(52);function g(e){return"function"===typeof e}var v=function(e,t,n){var r=Object(a.useState)((function(){return s()})),c=Object(f.a)(r,2),i=c[0],o=c[1];function s(){var a=e.getItem(t);return a?JSON.parse(a):g(n)?n():n}return[i,function(a){if("undefined"===typeof a)e.removeItem(t),o(n);else if(g(a)){var r=a(s());e.setItem(t,JSON.stringify(r)),o(r)}else e.setItem(t,JSON.stringify(a)),o(a)}]};var _=function(e,t){return v(localStorage,e,t)},h=n(9),b=n(24),y=n(21),O=n(58),j=n(32),N=n(51),E=n(59),P=n(34),k=n.n(P),S={routePath:"/recommend",getPathByParams:function(){return"/recommend"}},x={list:{routePath:"/singer/list",getPathByParams:function(){return"/singer/list"}},detail:{routePath:"/singer/detail/:id",getPathByParams:function(e){return"/singer/detail/".concat(e)}}},I={list:{routePath:"/rank/list",getPathByParams:function(){return"/rank/list"}},detail:{routePath:"/rank/detail/:type",getPathByParams:function(e){return"/rank/detail/".concat(e)}}},L={routePath:"/search",getPathByParams:function(){return"/search"}},w=function(e){function t(e){var n,a=e.code,r=void 0===a?"":a,c=e.message,i=void 0===c?"":c;return Object(y.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,i))).code=void 0,n.code=r,n}return Object(N.a)(t,e),t}(Object(E.a)(Error)),C=new(function(){function e(t){var n=t.defaults,a=void 0===n?{}:n,r=t.reqInterceptors,c=void 0===r?{}:r,i=t.resInterceptors,o=void 0===i?{}:i;Object(y.a)(this,e),this.instance=void 0,this.instance=k.a.create(Object(h.a)({},a,{timeout:5e4})),this.instance.interceptors.request.use(c.onFulfilled||function(e){return e},c.onRejected||function(e){return Promise.reject(e)});this.instance.interceptors.response.use(o.onFulfilled||function(e){return e},o.onRejected||function(e){return e.response?Promise.reject(new w({code:e.response.status,message:e.message})):Promise.reject(new w({code:0,message:"uncaught exception"}))})}return Object(b.a)(e,[{key:"handleResponse",value:function(e){return e.success?e.data:Promise.reject(new w({code:e.code,message:e.message}))}},{key:"head",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.head(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a,r,c,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,this.instance.get(t,Object(h.a)({},a,{params:n}));case 3:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.delete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.post(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.put(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.patch(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"all",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.all(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"spread",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.spread(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({defaults:{baseURL:"https://www.mxnzp.com/api",headers:{common:{app_id:"rtgogkfkohrlhiiz",app_secret:"SzA5YUpBTXFVWFVkQUlDOTRtVDh4QT09"}}},reqInterceptors:{onFulfilled:function(e){return Object(h.a)({},e,{params:Object(h.a)({},e.params,{app_id:"rtgogkfkohrlhiiz",app_secret:"SzA5YUpBTXFVWFVkQUlDOTRtVDh4QT09"})})}},resInterceptors:{onFulfilled:function(e){var t=e.data,n=e.config.responseType,a={data:null,code:1,message:"success",success:!0};return null===t||void 0===t?a.data={}:"object"!==typeof t||n&&"json"!==n?a.data=t:a={data:t.data,code:t.code,message:t.msg,success:1===t.code},Object(h.a)({},e,{data:a})},onRejected:function(e){if(!e.response)return Promise.reject(new w({code:0,message:"uncaught exception"}));var t=e.response.data,n=t.code,a=t.msg;return Promise.reject(new w({code:n||e.response.status,message:a||""}))}}}),M=function(){return C.get("/music/recommend/list")},F=function(){return C.get("/music/order/list")},T=function(e){return C.get("/music/order/song/list",e)},R=function(e){return C.get("/music/singer/search",{keyWord:e})},B=function(e){return C.get("/music/singer/detail",{singerId:e})},D=function(e){return C.get("/music/singer/song/list",e)},W=function(e){return C.get("/music/song/search",e)},A=function(e){return C.get("/music/song/detail",{songId:e})},U=function(e){return C.get(e,{responseType:"text"})},q={getRecommendList:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerPic:e.pic_singer,singerName:e.author,albumTitle:e.album_title,language:e.language,proxyCompany:e.si_proxycompany,info:e.info,hugeSongPic:e.pic_huge,bigSongPic:e.pic_big,premiumSongPic:e.pic_premium,smallSongPic:e.pic_small,publishTime:e.publishtime}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{name:e.name,type:e.type,comment:e.comment,firstPic:e.pic_s192,secondPic:e.pic_s444,thirdPic:e.pic_s260,forthPic:e.pic_s210}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRankSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,a=n.list.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerName:e.author,proxyCompany:e.si_proxycompany,duration:e.file_duration,lrcLink:e.lrclink,country:e.country,songPic:e.pic_big,language:e.language,publishTime:e.publishtime}})),r=Object(h.a)({},n,{list:a}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSingerList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSingerDetail:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,a={artistId:n.artist_id,singerId:n.singerId,singerName:n.name,stature:n.stature,avatar:n.avatar,constellation:n.constellation,intro:n.intro,company:n.company,country:n.country,birth:n.birth},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSingerSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return n=e.sent,a=n.list.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerName:e.author,proxyCompany:e.si_proxycompany,duration:e.file_duration,lrcLink:e.lrclink,country:e.country,songPic:e.pic_big,language:e.language,publishTime:e.publishtime}})),r=Object(h.a)({},n,{list:a}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongDetail:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,a={songId:n.id,songName:n.songName,albumName:n.albumName,singerName:n.artistName,songPic:n.songPic,lrcLink:n.lrcLink,time:n.time,songLink:n.songLink.replace(/http:/g,"https:"),format:n.format,rate:n.rate,size:n.size},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLyric:function(e){return U(e.replace(/http:/g,"https:"))}};var z,X=navigator.userAgent.toLowerCase();["iphone","ipad","macintosh"].some((function(e){return X.indexOf(e)>-1})),X.indexOf("android");!function(e){e.Sequence="SEQUENCE",e.Loop="LOOP",e.Random="RANDOM"}(z||(z={}));var Y,H=n(1),Z=n(3),G=n.n(Z),Q=n(35),V=n.n(Q),J=Object(a.forwardRef)((function(e,t){var n,c=e.onClose,i=Object(a.useState)(!1),o=Object(f.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(null),m=Object(f.a)(u,2),d=m[0],p=m[1],g=Object(a.useRef)(),v=Object(a.useRef)();return Object(a.useImperativeHandle)(t,(function(){return{info:function(e){var t=e.content;setTimeout((function(){p(t),l(!0)}),20),g.current=e}}})),Object(a.useEffect)((function(){if(s&&g.current){var e=g.current.duration,t=void 0===e?2:e;v.current&&clearTimeout(v.current),v.current=setTimeout((function(){l(!1),g.current=void 0}),1e3*t)}else s||g.current||setTimeout((function(){c&&c()}),400)}),[s,c]),Object(a.useEffect)((function(){return function(){v.current&&clearTimeout(v.current)}}),[]),r.a.createElement("div",{className:G()((n={},Object(H.a)(n,V.a.container,!0),Object(H.a)(n,V.a.visible,s),n))},r.a.createElement("span",{className:V.a.content},d))})),K=n(16),$=n.n(K),ee=function(){},te=Object(a.forwardRef)((function(e,t){var n,c,i=e.onClose,o=void 0===i?ee:i,s=Object(a.useState)(!1),l=Object(f.a)(s,2),u=l[0],m=l[1],d=Object(a.useState)(null),p=Object(f.a)(d,2),g=p[0],v=p[1],_=Object(a.useRef)(),h=_.current||{},b=h.shouldShowCancelButton,y=void 0===b||b,O=h.maskClosable,j=void 0===O||O,N=h.onCancel,E=void 0===N?ee:N,P=h.onConfirm,k=void 0===P?ee:P,S=h.cancelText,x=void 0===S?"\u53d6\u6d88":S,I=h.confirmText,L=void 0===I?"\u786e\u5b9a":I,w=function(){E(),m(!1)};return Object(a.useImperativeHandle)(t,(function(){return{confirm:function(e){var t=e.content;setTimeout((function(){v(t),m(!0)}),20),_.current=e}}})),Object(a.useEffect)((function(){if(!u){var e=setTimeout((function(){o&&o()}),400);return function(){clearTimeout(e)}}}),[u,o]),r.a.createElement("div",{className:G()((n={},Object(H.a)(n,$.a.mask,!0),Object(H.a)(n,$.a.visible,u),n)),onClick:function(){j&&w()}},r.a.createElement("div",{className:$.a.body},r.a.createElement("div",{className:$.a.content},g),r.a.createElement("div",{className:$.a.footer,onClick:function(e){e.stopPropagation()}},y&&r.a.createElement("span",{className:G()((c={},Object(H.a)(c,$.a.footerBtn,!0),Object(H.a)(c,$.a.closeBtn,!0),c)),onClick:w},x),r.a.createElement("span",{className:$.a.footerBtn,onClick:function(){k(),m(!1)}},L))))})),ne=Object(a.createRef)(),ae=Object(a.createRef)(),re=new Map,ce=function(e,t,n){switch(function(e,t,n){var a=re.get(e);if(a)a.onClose=n.onClose;else{var r=document.createElement("div");r.setAttribute("id",e),document.body.appendChild(r),re.set(e,{container:r,instance:t,onClose:n.onClose}),i.a.render(t,r)}}(e,t,n),e){case"TOAST":if(ne.current)return ne.current.info(n);break;case"CONFIRM":if(ae.current)return ae.current.confirm(n)}},ie=function(e){var t=re.get(e);t&&(i.a.unmountComponentAtNode(t.container),document.body.removeChild(t.container),re.delete(e),t.onClose&&t.onClose())},oe=function(){ie("TOAST")},se=function(){ie("CONFIRM")},le=function(e,t,n){return ce("TOAST",r.a.createElement(J,{onClose:oe,ref:ne}),{content:e,duration:t,onClose:n})},ue=function(e){return ce("CONFIRM",r.a.createElement(te,{onClose:se,ref:ae}),e)},me=Object(p.a)((function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],s=i[1],l=_("music_mweb:play_list",[]),p=Object(f.a)(l,2),g=p[0],v=p[1],h=Object(a.useState)(),b=Object(f.a)(h,2),y=b[0],O=b[1],j=Object(a.useState)([]),N=Object(f.a)(j,2),E=N[0],P=N[1],k=Object(a.useState)(z.Sequence),S=Object(f.a)(k,2),x=S[0],I=S[1],L=Object(a.useState)(-1),w=Object(f.a)(L,2),C=w[0],M=w[1],F=_("music_mweb:history_terms",[]),T=Object(f.a)(F,2),R=T[0],B=T[1],D=_("music_mweb:favorite_list",[]),W=Object(f.a)(D,2),A=W[0],U=W[1],X=function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var c,i,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0<=n&&n<t.length)){e.next=15;break}if(c=t[n],(i=c.songId)===a){e.next=13;break}return e.next=7,q.getSongDetail(i);case 7:return o=e.sent,e.next=10,q.getLyric(o.lrcLink);case 10:s=e.sent,O({songId:i,songName:o.songName,singerName:o.singerName,image:o.songPic,lyric:s,playUrl:o.songLink,duration:o.time}),r(!0);case 13:e.next=17;break;case 15:r(!1),O(void 0);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),le(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){X(g,C,null===y||void 0===y?void 0:y.songId)}),[g,C,y]),{isPlaying:n,setIsPlaying:r,isPlayerFullScreen:o,setIsPlayerFullScreen:s,playList:g,setPlayList:v,sequenceList:E,setSequenceList:P,playMode:x,setPlayMode:I,songIndex:C,setSongIndex:M,historyTerms:R,setHistoryTerms:B,selectPlay:function(e,t){P(e),v(e),M(t),s(!0)},randomPlay:function(e){P(e),I(z.Random);var t=function(e){for(var t,n,a=e.slice(),r=0;r<a.length;r++){var c=(t=0,n=r,Math.floor(Math.random()*(n-t+1)+t)),i=a[r];a[r]=e[c],a[c]=i}return a}(e);v(t),M(0),s(!0)},playingSong:y,addAndPlaySong:function(e){var t=g.findIndex((function(t){return t.songId===e.songId}));t>-1?M(t):(v((function(t){return t?[].concat(Object(d.a)(t),[e]):[e]})),M(g.length)),s(!0)},deleteSong:function(e){var t=g.slice(),n=E.slice(),a=C,r=t.findIndex((function(t){return t.songId===e.songId}));t.splice(r,1);var c=n.findIndex((function(t){return t.songId===e.songId}));n.splice(c,1),(C>r||a===t.length)&&a--,v(t),P(n),M(a)},clearPlayList:function(){v([]),P([]),M(-1),r(!1)},favoriteList:A,saveFavorite:function(e){U((function(t){return t?function(e,t,n,a){var r=(e=e.slice()).findIndex(n);return 0===r?e:(r>0&&e.splice(r,1),e.unshift(t),a&&e.length>a&&e.pop(),e)}(t,e,(function(t){return t.songId===e.songId}),200):[e]}))},deleteFavorite:function(e){U((function(t){return t?function(e,t){var n=(e=e.slice()).findIndex(t);return n>-1&&e.splice(n,1),e}(t,(function(t){return t.songId===e.songId})):[]}))}}})),de=n(27),fe=n.n(de),pe=function(e){var t=e.onUserIconClick;return r.a.createElement("header",{className:fe.a.header},r.a.createElement("i",{className:fe.a.icon}),r.a.createElement("h1",{className:fe.a.text},"\u5927\u529b\u97f3\u4e50"),r.a.createElement("div",{className:fe.a.mine},r.a.createElement("i",{className:G()(Object(H.a)({"icon-mine":!0},fe.a.iconMine,!0)),onClick:function(){t&&t()}})))},ge=n(36),ve=n.n(ge),_e=function(e){var t=e.tabs;return r.a.createElement("div",{className:ve.a.tab},t.map((function(e){return r.a.createElement(o.b,{key:e.path,to:e.path,className:ve.a.item},r.a.createElement("span",{className:ve.a.link},e.label))})))},he=n(28),be=n.n(he),ye=function(e){var t,n,c,i=e.className,o=void 0===i?"":i,s=e.percent,l=void 0===s?0:s,u=e.onPercentChange,m=Object(a.useRef)(null),d=Object(a.useRef)(null),f=Object(a.useRef)(null),p=Object(a.useRef)({initiated:!1,startX:-1,left:-1}),g=(null===(t=m.current)||void 0===t?void 0:t.clientWidth)||0,v=g-16,_=(null===(n=d.current)||void 0===n?void 0:n.clientWidth)||0,h=function(e){d.current&&(d.current.style.width="".concat(e,"px")),f.current&&(f.current.style.transform="translate3d(".concat(e,"px, 0, 0)"))};return Object(a.useEffect)((function(){l>=0&&!p.current.initiated&&h(v*l)}),[l,p,v]),r.a.createElement("div",{className:G()((c={},Object(H.a)(c,be.a.container,!0),Object(H.a)(c,o,!0),c)),ref:m},r.a.createElement("div",{className:be.a.inner},r.a.createElement("div",{className:be.a.progress,ref:d}),r.a.createElement("div",{className:be.a.progressBtnWrapper,ref:f,onTouchStart:function(e){p.current.initiated=!0,p.current.startX=e.touches[0].pageX,p.current.left=_},onTouchMove:function(e){var t=e.touches[0].pageX-p.current.startX,n=Math.min(Math.max(0,p.current.left+t),g-16);h(n)},onTouchEnd:function(){p.current.initiated=!1,u&&u(_/v)}},r.a.createElement("span",{className:be.a.progressBtn}))))},Oe=n(6),je=n.n(Oe),Ne=function(e){var t,n,a,c,i,o,s,l,u,m,d,f,p=e.className,g=void 0===p?"":p,v=e.visible,_=e.lyric,h=e.playMode,b=e.currentTime,y=e.playingSong,O=e.isPlaying,j=e.onBack,N=e.onPlayingToggle,E=e.onPercentChange,P=e.onPlayModeChange,k=e.onPrevClick,S=e.onNextClick,x=e.onFavoriteSave,I=e.onFavoriteDelete,L=b&&y?b/y.duration:0,w=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString().length;n<t;)e="0"+e,n++;return e},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=Math.floor(e);var t=Math.floor(e/60),n=w(e%60);return"".concat(t,":").concat(n)};return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,je.a.container,!0),Object(H.a)(t,je.a.visible,v),Object(H.a)(t,g,!0),t))},r.a.createElement("div",{className:je.a.background},r.a.createElement("img",{width:"100%",height:"100%",src:null===y||void 0===y?void 0:y.image,alt:null===y||void 0===y?void 0:y.songName})),r.a.createElement("header",{className:G()((n={},Object(H.a)(n,je.a.top,!0),Object(H.a)(n,je.a.visible,v),n))},r.a.createElement("div",{className:je.a.back,onClick:j},r.a.createElement("i",{className:G()(Object(H.a)({"icon-back":!0},je.a.backIcon,!0))})),r.a.createElement("h1",{className:je.a.title},null===y||void 0===y?void 0:y.songName),r.a.createElement("h2",{className:je.a.subtitle},null===y||void 0===y?void 0:y.singerName)),r.a.createElement("main",{className:je.a.middle},r.a.createElement("section",{className:je.a.middleLeft},r.a.createElement("div",{className:je.a.cdWrapper},r.a.createElement("img",{className:G()((a={},Object(H.a)(a,je.a.cdImage,!0),Object(H.a)(a,je.a.playing,O),a)),src:null===y||void 0===y?void 0:y.image,alt:null===y||void 0===y?void 0:y.songName})),r.a.createElement("div",{className:je.a.lyricWrapper},r.a.createElement("span",{className:je.a.lyric},_)))),r.a.createElement("footer",{className:G()((c={},Object(H.a)(c,je.a.bottom,!0),Object(H.a)(c,je.a.visible,v),c))},r.a.createElement("div",{className:je.a.progressWrapper},r.a.createElement("span",{className:G()((i={},Object(H.a)(i,je.a.time,!0),Object(H.a)(i,je.a.left,!0),i))},C(b)),r.a.createElement(ye,{className:je.a.progressBar,percent:L,onPercentChange:E}),r.a.createElement("span",{className:G()((o={},Object(H.a)(o,je.a.time,!0),Object(H.a)(o,je.a.right,!0),o))},C(null===y||void 0===y?void 0:y.duration))),r.a.createElement("div",{className:je.a.operations},r.a.createElement("div",{className:G()((s={"icon-left":!0},Object(H.a)(s,je.a.icon,!0),Object(H.a)(s,je.a.leftIcon,!0),s))},r.a.createElement("i",{className:G()({"icon-sequence":h===z.Sequence,"icon-loop":h===z.Loop,"icon-random":h===z.Random}),onClick:function(){var e=Object.values(z),t=(e.findIndex((function(e){return e===h}))+1)%e.length;P&&P(e[t])}})),r.a.createElement("div",{className:G()((l={},Object(H.a)(l,je.a.icon,!0),Object(H.a)(l,je.a.leftIcon,!0),l))},r.a.createElement("i",{className:"icon-prev",onClick:k})),r.a.createElement("div",{className:G()((u={},Object(H.a)(u,je.a.icon,!0),Object(H.a)(u,je.a.centerIcon,!0),u))},r.a.createElement("i",{className:G()({"icon-pause":O,"icon-play":!O}),onClick:N})),r.a.createElement("div",{className:G()((m={},Object(H.a)(m,je.a.icon,!0),Object(H.a)(m,je.a.rightIcon,!0),m))},r.a.createElement("i",{className:"icon-next",onClick:S})),r.a.createElement("div",{className:G()((d={},Object(H.a)(d,je.a.icon,!0),Object(H.a)(d,je.a.rightIcon,!0),d))},r.a.createElement("i",{className:G()((f={},Object(H.a)(f,je.a.favoriteIcon,null===y||void 0===y?void 0:y.isFavorite),Object(H.a)(f,"icon-favorite",null===y||void 0===y?void 0:y.isFavorite),Object(H.a)(f,"icon-not-favorite",!(null===y||void 0===y?void 0:y.isFavorite)),f)),onClick:function(){y&&(y.isFavorite?I&&I(y):x&&x(y))}})))))},Ee=n(37),Pe=n.n(Ee),ke=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.radius,i=void 0===c?100:c,o=e.percent,s=void 0===o?0:o,l=e.children,u=100*Math.PI,m=(1-s)*u;return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,Pe.a.container,!0),Object(H.a)(t,a,!0),t))},r.a.createElement("svg",{width:i,height:i,viewBox:"0 0 100 100",version:"1.1"},r.a.createElement("circle",{className:Pe.a.background,cx:"50",cy:"50",r:"50",fill:"transparent"}),r.a.createElement("circle",{className:Pe.a.progress,r:"50",cx:"50",cy:"50",fill:"transparent",strokeDasharray:u,strokeDashoffset:m})),l)},Se=n(10),xe=n.n(Se),Ie=function(e){var t,n,a,c,i=e.className,o=void 0===i?"":i,s=e.visible,l=e.percent,u=e.isPlaying,m=e.playingSong,d=e.onPlayerClick,f=e.onPlayingToggle,p=e.onPlayListShow;return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,xe.a.container,!0),Object(H.a)(t,xe.a.visible,s),Object(H.a)(t,o,!0),t)),onClick:d},r.a.createElement("div",{className:xe.a.cd},r.a.createElement("div",{className:xe.a.cdImageWrapper},r.a.createElement("img",{className:G()((n={},Object(H.a)(n,xe.a.cdImage,!0),Object(H.a)(n,xe.a.playing,u),n)),width:"40",height:"40",src:null===m||void 0===m?void 0:m.image,alt:null===m||void 0===m?void 0:m.songName}))),r.a.createElement("div",{className:xe.a.text},r.a.createElement("span",{className:xe.a.name},null===m||void 0===m?void 0:m.songName),r.a.createElement("span",{className:xe.a.desc},null===m||void 0===m?void 0:m.singerName)),r.a.createElement("div",{className:xe.a.control},r.a.createElement(ke,{percent:l,radius:32},r.a.createElement("i",{className:G()((a={},Object(H.a)(a,xe.a.playIcon,!0),Object(H.a)(a,"icon-pause-mini",u),Object(H.a)(a,"icon-play-mini",!u),a)),onClick:function(e){e.stopPropagation(),f&&f()}}))),r.a.createElement("div",{className:xe.a.control},r.a.createElement("i",{className:G()((c={},Object(H.a)(c,xe.a.listIcon,!0),Object(H.a)(c,"icon-playlist",!0),c)),onClick:function(e){e.stopPropagation(),p&&p()}})))},Le=n(8),we=n.n(Le),Ce=(Y={},Object(H.a)(Y,z.Sequence,"\u987a\u5e8f\u64ad\u653e"),Object(H.a)(Y,z.Random,"\u968f\u673a\u64ad\u653e"),Object(H.a)(Y,z.Loop,"\u5355\u66f2\u5faa\u73af"),Y),Me=function(e){var t,n,a=e.className,c=void 0===a?"":a,i=e.visible,o=e.playMode,s=e.playList,l=void 0===s?[]:s,u=e.playingSongId,m=e.onClose,d=e.onSelect,f=e.onFavoriteSave,p=e.onFavoriteDelete,g=e.onRemove,v=e.onClear,_=function(e){return function(){d&&d(e)}},h=function(e){return function(t){t.stopPropagation(),e.isFavorite?p&&p(e):f&&f(e)}},b=function(e){return function(t){t.stopPropagation(),g&&g(e)}};return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,we.a.container,!0),Object(H.a)(t,c,!0),Object(H.a)(t,we.a.visible,i),t)),onClick:m},r.a.createElement("div",{className:we.a.body,onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:we.a.header},r.a.createElement("i",{className:G()((n={},Object(H.a)(n,we.a.modeIcon,!0),Object(H.a)(n,"icon-sequence",o===z.Sequence),Object(H.a)(n,"icon-loop",o===z.Loop),Object(H.a)(n,"icon-random",o===z.Random),n))}),r.a.createElement("span",{className:we.a.modeText},o?Ce[o]:""),r.a.createElement("span",{className:we.a.clear,onClick:v},r.a.createElement("i",{className:G()(Object(H.a)({"icon-clear":!0},we.a.clearIcon,!0))}))),r.a.createElement("ul",{className:we.a.list},l.map((function(e){var t;return r.a.createElement("li",{key:e.songId,className:we.a.item,onClick:_(e)},r.a.createElement("i",{className:G()((t={},Object(H.a)(t,we.a.current,!0),Object(H.a)(t,"icon-play",e.songId===u),t))}),r.a.createElement("span",{className:we.a.songName},e.songName),r.a.createElement("span",{className:we.a.like,onClick:h(e)},r.a.createElement("i",{className:G()({"icon-favorite":e.isFavorite,"icon-not-favorite":!e.isFavorite})})),r.a.createElement("span",{className:we.a.delete,onClick:b(e)},r.a.createElement("i",{className:"icon-delete"})))}))),r.a.createElement("span",{className:we.a.close,onClick:m},"\u5173\u95ed")))},Fe=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,Te={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"},Re=function(){},Be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;Object(y.a)(this,e),this.lyric=void 0,this.tags=void 0,this.lines=void 0,this.handler=void 0,this.state=void 0,this.curNum=void 0,this.startStamp=void 0,this.pauseStamp=void 0,this.timer=void 0,this.handler=t,this.state="PAUSE"}return Object(b.a)(e,[{key:"setLyric",value:function(e){this.lyric=e,this.init()}},{key:"play",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;(null===(e=this.lines)||void 0===e?void 0:e.length)&&(this.state="PLAYING",this.curNum=this.findCurNum(t),this.startStamp=+new Date-t,n||this.callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this.playRest()))}},{key:"togglePlay",value:function(){var e=+new Date;"PLAYING"===this.state?(this.stop(),this.pauseStamp=e):(this.state="PLAYING",this.play((this.pauseStamp||e)-(this.startStamp||e),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state="PAUSE",clearTimeout(this.timer)}},{key:"seek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.play(e)}},{key:"init",value:function(){this.initTag(),this.initLines()}},{key:"initTag",value:function(){for(var e in this.tags={},Te)if(Te.hasOwnProperty(e)){var t=this.lyric.match(new RegExp("\\[".concat(Te[e],":([^\\]]*)]"),"i"));this.tags[e]=t&&t[1]||""}}},{key:"initLines",value:function(){this.lines=[];var e=this.lyric.split("\n"),t=!0,n=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var i=r.value,o=Fe.exec(i);if(o){var s=i.replace(Fe,"").trim();s&&this.lines.push({time:60*+o[1]*1e3+1e3*+o[2]+10*(+o[3]||0),lyricText:s})}}}catch(l){n=!0,a=l}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}this.lines.sort((function(e,t){return e.time-t.time}))}},{key:"findCurNum",value:function(e){for(var t=0;t<this.lines.length;t++)if(e<=this.lines[t].time)return t;return this.lines.length-1}},{key:"callHandler",value:function(e){e<0||this.handler({lineNum:e,lyricText:this.lines[e].lyricText})}},{key:"playRest",value:function(){var e=this,t=this.lines[this.curNum].time-(+new Date-this.startStamp);this.timer=setTimeout((function(){e.callHandler(e.curNum++),e.curNum<e.lines.length&&"PLAYING"===e.state&&e.playRest()}),t)}}]),e}(),De=n(55),We=n.n(De),Ae=function(){var e=me.useContainer(),t=e.isPlaying,n=e.playMode,c=e.setPlayMode,i=e.playList,o=e.songIndex,s=e.setSongIndex,l=e.setIsPlaying,u=e.playingSong,m=e.isPlayerFullScreen,d=e.setIsPlayerFullScreen,p=e.clearPlayList,g=e.favoriteList,v=e.saveFavorite,_=e.deleteFavorite,b=e.addAndPlaySong,y=e.deleteSong,O=Object(a.useState)(!1),j=Object(f.a)(O,2),N=j[0],E=j[1],P=Object(a.useState)(!1),k=Object(f.a)(P,2),S=k[0],x=k[1],I=Object(a.useState)(),L=Object(f.a)(I,2),w=L[0],C=L[1],M=Object(a.useRef)(null),F=Object(a.useRef)(null),T=Object(a.useState)(0),R=Object(f.a)(T,2),B=R[0],D=R[1],W=u?B/u.duration:0,A=Object(a.useMemo)((function(){return new Set(g.map((function(e){return e.songId})))}),[g]),U=function(){l((function(e){return!e}))},q=function(){var e;F.current&&(F.current.currentTime=0,F.current.play()),null===(e=M.current)||void 0===e||e.seek()},X=function(e){C(e.lyricText)},Y=function(){p(),E(!1)},H=Object(a.useMemo)((function(){return i.map((function(e){return Object(h.a)({},e,{isFavorite:A.has(e.songId)})}))}),[i,A]),Z=Object(a.useMemo)((function(){return u&&Object(h.a)({},u,{isFavorite:A.has(u.songId)})}),[u,A]);return Object(a.useEffect)((function(){return M.current=new Be(X),function(){var e;null===(e=M.current)||void 0===e||e.stop()}}),[]),Object(a.useEffect)((function(){var e,t;(D(0),x(!1),u)&&(null===(e=M.current)||void 0===e||e.stop(),null===(t=M.current)||void 0===t||t.setLyric(u.lyric))}),[u]),Object(a.useEffect)((function(){var e,n,a,r;S&&(t?(null===(e=F.current)||void 0===e||e.play(),null===(n=M.current)||void 0===n||n.play()):(null===(a=M.current)||void 0===a||a.stop(),null===(r=F.current)||void 0===r||r.pause()))}),[t,S]),r.a.createElement("div",{className:We.a.container},r.a.createElement(Ne,{visible:m,lyric:w,playMode:n,currentTime:B,isPlaying:t,playingSong:Z,onBack:function(){d(!1)},onPlayingToggle:U,onPercentChange:function(e){var n,a=((null===u||void 0===u?void 0:u.duration)||0)*e;F.current&&(F.current.currentTime=a),t||U(),null===(n=M.current)||void 0===n||n.seek(1e3*a)},onPlayModeChange:c,onPrevClick:function(){S&&(1===i.length?q():s((function(e){var t=(e-1)%i.length;return-1===t&&(t=i.length-1),t})),t||U())},onNextClick:function(){S&&(1===i.length?q():s((function(e){return(e+1)%i.length})),t||U())},onFavoriteSave:v,onFavoriteDelete:_}),r.a.createElement(Ie,{visible:!m&&!!u,isPlaying:t,percent:W,playingSong:u,onPlayingToggle:U,onPlayerClick:function(){d(!0)},onPlayListShow:function(){return E(!0)}}),r.a.createElement(Me,{visible:N,playMode:n,playList:H,playingSongId:null===u||void 0===u?void 0:u.songId,onClose:function(){return E(!1)},onSelect:b,onRemove:y,onClear:function(){ue({content:"\u662f\u5426\u6e05\u7a7a\u64ad\u653e\u5217\u8868",confirmText:"\u6e05\u7a7a",onConfirm:Y})},onFavoriteSave:v,onFavoriteDelete:_}),r.a.createElement("audio",{ref:F,src:null===u||void 0===u?void 0:u.playUrl,onCanPlay:function(){x(!0)},onTimeUpdate:function(e){D(e.target.currentTime)},onEnded:function(){n===z.Loop?q():function(){var e=i.length;1===e?q():s((o+1)%e);t||U()}()},onError:function(){le("\u64ad\u653e\u51fa\u9519")}}))},Ue=n(17),qe=n.n(Ue),ze=function(e){var t=me.useContainer().addAndPlaySong,n=Object(a.useState)([]),c=Object(f.a)(n,2),i=c[0],o=c[1],s=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getRecommendList();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),r.a.createElement("div",{className:qe.a.container},r.a.createElement("div",{className:qe.a.content},r.a.createElement("h1",{className:qe.a.listTitle},"\u70ed\u95e8\u6b4c\u5355\u63a8\u8350"),r.a.createElement("ul",null,i.map((function(e){return r.a.createElement("li",{key:e.songId,className:qe.a.item,onClick:(n=e,function(){t({songId:n.songId,songName:n.songName,singerName:n.singerName,image:n.hugeSongPic})})},r.a.createElement("div",{className:qe.a.icon},r.a.createElement("img",{src:e.smallSongPic,width:"60",height:"60",alt:e.songName})),r.a.createElement("div",{className:qe.a.text},r.a.createElement("h2",{className:qe.a.name},e.singerName),r.a.createElement("span",{className:qe.a.desc},e.songName)));var n})))))},Xe=n(29),Ye=n.n(Xe),He=function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),c=n[0],i=n[1],o=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.searchSingerList("c");case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(t){return function(){e.history.push(x.detail.getPathByParams(t.singerId))}};return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",{className:Ye.a.container},r.a.createElement("ul",{className:Ye.a.list},c.map((function(e){return r.a.createElement("li",{key:e.singerId,className:Ye.a.item,onClick:s(e)},r.a.createElement("img",{src:e.singerPic,alt:e.singerName,className:Ye.a.avatar}),r.a.createElement("span",{className:Ye.a.name},e.singerName))}))))},Ze=n(33),Ge=n.n(Ze),Qe=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),s=o[0],l=o[1];return[Object(a.useCallback)(function(){var t=Object(m.a)(u.a.mark((function t(){var n,a=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,e.apply(void 0,a);case 3:return n=t.sent,c(!0),l(!1),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e]),r,s]};var Ve=new(function(){function e(){Object(y.a)(this,e)}return Object(b.a)(e,[{key:"fetch",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetcher,a=t.pageNo,r=t.queryData,c=n,e.next=4,c(Object(h.a)({},r,{page:a}));case 4:return i=e.sent,e.abrupt("return",i.list);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Je=function(e){return Ve},Ke=function(e){var t=e||{},n=t.type,r=t.fetcher,c=t.pageSize,i=void 0===c?10:c,o=t.query,s=t.initialPageNo,l=void 0===s?1:s,p=t.defaultValue,g=void 0===p?[]:p,v=t.onError,_=t.disabled,h=void 0!==_&&_,b=Object(a.useState)(h),y=Object(f.a)(b,2),O=y[0],j=y[1],N=Object(a.useState)(),E=Object(f.a)(N,2),P=E[0],k=E[1],S=Object(a.useState)(g),x=Object(f.a)(S,2),I=x[0],L=x[1],w=Object(a.useRef)(g);w.current=I;var C=!P||I.length>=i*P.pageNo,M=Qe(function(){var e=Object(m.a)(u.a.mark((function e(t){var a,c,i,o,s,m,f,p,g,_;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageNo,c=t.pageSize,i=t.queryData,o=t.isRefetch,e.prev=1,s=Je(n),e.next=5,s.fetch({fetcher:r,pageNo:a,pageSize:c,queryData:i});case 5:m=e.sent,f=m||[],p=w.current,o?(g=p.slice(0,(a-1)*c),_=p.slice(a*c),L([].concat(Object(d.a)(g),Object(d.a)(f),Object(d.a)(_)))):L(a===l?f:p.concat(f)),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(1),!v){e.next=17;break}v(e.t0),e.next=18;break;case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),F=Object(f.a)(M,3),T=F[0],R=F[1],B=F[2],D=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O||!P||l>t||t>P.pageNo)){e.next=2;break}return e.abrupt("return");case 2:T({pageNo:t,pageSize:P.pageSize,queryData:o,isRefetch:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){j(h)}),[h]),Object(a.useEffect)((function(){k({pageSize:i,pageNo:l})}),[o,l,i]),Object(a.useEffect)((function(){!O&&P&&T({pageNo:P.pageNo,pageSize:P.pageSize,queryData:o})}),[P,O]),{data:I,refetch:D,hasMore:C,loadMore:function(){!O&&C&&k((function(e){return{pageSize:i,pageNo:e?e.pageNo+1:l}}))},isLoaded:R,isPending:B}},$e=n(19),et=n.n($e),tt=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.songList,i=e.onSongSelect,o=function(e,t){return function(){i&&i(e,t)}};return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,et.a.container,!0),Object(H.a)(t,a,!0),t))},r.a.createElement("ul",null,null===c||void 0===c?void 0:c.map((function(e,t){return r.a.createElement("li",{key:e.songId,className:et.a.item,onClick:o(e,t)},r.a.createElement("div",{className:et.a.rank},r.a.createElement("span",{className:et.a.text},t+1)),r.a.createElement("div",{className:et.a.content},r.a.createElement("h2",{className:et.a.name},e.songName),r.a.createElement("span",{className:et.a.desc},e.singerName)))}))))},nt=n(14),at=n.n(nt),rt=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.title,i=e.cover,o=e.songList,s=e.onRandomPlay,l=e.onSongSelect,u=e.onBack;return r.a.createElement("div",{className:G()((t={},Object(H.a)(t,at.a.container,!0),Object(H.a)(t,a,!0),t))},r.a.createElement("header",{className:at.a.header},r.a.createElement("i",{className:G()(Object(H.a)({"icon-back":!0},at.a.backIcon,!0)),onClick:u}),r.a.createElement("h1",{className:at.a.title},c)),r.a.createElement("div",{className:at.a.cover,style:{backgroundImage:"url(".concat(i,")")}},r.a.createElement("div",{className:at.a.mask}),r.a.createElement("div",{className:at.a.playerWrapper},r.a.createElement("div",{className:at.a.play},r.a.createElement("i",{className:G()(Object(H.a)({"icon-play":!0},at.a.playIcon,!0))}),r.a.createElement("span",{className:at.a.text,onClick:s},"\u968f\u673a\u64ad\u653e\u5168\u90e8")))),r.a.createElement("div",null,r.a.createElement(tt,{className:at.a.songListContainer,songList:o,onSongSelect:l})))},ct=n(56),it=n.n(ct),ot=function(e){var t=e.match.params.id,n=me.useContainer().addAndPlaySong,c=Object(a.useState)(),i=Object(f.a)(c,2),o=i[0],s=i[1],l=Object(a.useMemo)((function(){return t?{singerId:t}:void 0}),[t]),d=Ke({type:"ROLL",fetcher:q.getSingerSongList,query:l,onError:function(e){return le(e.message)},disabled:!t}),p=d.data,g=d.loadMore,v=d.hasMore,_=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getSingerDetail(t);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&_(t)}),[t]),r.a.createElement("div",{className:it.a.container},r.a.createElement(Ge.a,{loadMore:g,hasMore:v,initialLoad:!1,threshold:10,useWindow:!1},r.a.createElement(rt,{title:o&&o.singerName,cover:o&&o.avatar,songList:p,onBack:function(){e.history.goBack()},onSongSelect:function(e){n({singerName:e.singerName,songId:e.songId,songName:e.songName,image:e.songPic})}})))},st=n(20),lt=n.n(st),ut=function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),c=n[0],i=n[1],o=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getRankList();case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(t){return function(){e.history.push(I.detail.getPathByParams(t.type))}};return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",{className:lt.a.container},r.a.createElement("div",{className:lt.a.list},r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.type,className:lt.a.item,onClick:s(e)},r.a.createElement("div",{className:lt.a.icon},r.a.createElement("img",{width:"100",height:"100",src:e.thirdPic,alt:e.name})),r.a.createElement("div",{className:lt.a.info},r.a.createElement("span",{className:lt.a.name},e.name),r.a.createElement("span",{className:lt.a.comment},e.comment)))})))))},mt=n(57),dt=n.n(mt),ft=function(e){var t=Number(e.match.params.type),n=me.useContainer().addAndPlaySong,c=Object(a.useState)(),i=Object(f.a)(c,2),o=i[0],s=i[1],l=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getRankList();case 3:n=e.sent,a=n.find((function(e){return e.type===t})),s(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),le(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),d=Object(a.useMemo)((function(){return{type:t}}),[t]),p=Ke({type:"ROLL",fetcher:q.getRankSongList,query:d,onError:function(e){return le(e.message)}}),g=p.data,v=p.loadMore,_=p.hasMore;return Object(a.useEffect)((function(){l(t)}),[t]),r.a.createElement("div",{className:dt.a.container},r.a.createElement(Ge.a,{loadMore:v,hasMore:_,initialLoad:!1,threshold:10,useWindow:!1},r.a.createElement(rt,{title:o&&o.name,cover:o&&o.secondPic,songList:g,onBack:function(){e.history.goBack()},onSongSelect:function(e){n({singerName:e.singerName,songId:e.songId,songName:e.songName,image:e.songPic})}})))},pt=function(){var e=function(){ue({content:"another confirm",onConfirm:function(){console.log("on another confirm")},onCancel:function(){console.log("on another cancel")}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){le("hello world 1"),setTimeout((function(){le("hello world 2",void 0,(function(){console.log("close 2")}))}),500),setTimeout((function(){le("hello world 3",void 0,(function(){console.log("close 3")}))}),700)}},"click toast"),r.a.createElement("button",{onClick:function(){ue({shouldShowCancelButton:!1,content:"should you confirm",onConfirm:function(){e()},onCancel:function(){console.log("on cancel")}})}},"click confirm"))},gt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{path:S.routePath,exact:!0,component:ze}),r.a.createElement(s.b,{path:x.list.routePath,exact:!0,component:He}),r.a.createElement(s.b,{path:x.detail.routePath,exact:!0,component:ot}),r.a.createElement(s.b,{path:I.list.routePath,exact:!0,component:ut}),r.a.createElement(s.b,{path:I.detail.routePath,exact:!0,component:ft}),r.a.createElement(s.b,{path:"/test",exact:!0,component:pt}))};n(89),n(90),n(91);new(n(92));var vt=function(){var e=[{label:"\u63a8\u8350",path:S.routePath},{label:"\u6b4c\u624b",path:x.list.routePath},{label:"\u6392\u884c",path:I.list.routePath},{label:"\u641c\u7d22",path:L.routePath}];return r.a.createElement(me.Provider,null,r.a.createElement(pe,null),r.a.createElement(o.a,{basename:"/"},r.a.createElement(_e,{tabs:e}),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:S.routePath})}}),r.a.createElement(gt,null))),r.a.createElement(Ae,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.634a14b7.chunk.js.map