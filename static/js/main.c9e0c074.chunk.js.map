{"version":3,"sources":["business/Player/MiniPlayer/index.module.scss","shared/components/MusicList/index.module.scss","shared/components/Confirm/index.module.scss","pages/Recommend/index.module.scss","shared/components/SongList/index.module.scss","pages/rank/List/index.module.scss","shared/components/Header/index.module.scss","business/Player/FullScreenPlayer/ProgressBar/index.module.scss","pages/singer/List/index.module.scss","shared/lib/message/styles.module.scss","shared/components/Tabs/index.module.scss","business/Player/MiniPlayer/ProgressCircle/index.module.scss","pages/singer/Detail/index.module.scss","pages/rank/Detail/index.module.scss","business/Player/FullScreenPlayer/index.module.scss","business/Player/PlayListModal/index.module.scss","shared/hooks/storage/useStorage.ts","shared/hooks/storage/useLocalStorage.ts","shared/constants/local.ts","shared/request/http.ts","shared/request/index.ts","shared/constants/external.ts","shared/domain/song/repo.ts","shared/domain/song/index.ts","shared/domain/song/usecase.ts","shared/utils/index.ts","shared/typings/index.ts","shared/lib/message/MessageItem.tsx","shared/lib/message/Container.tsx","shared/lib/message/utils.ts","shared/lib/message/index.tsx","shared/container/index.ts","shared/components/Header/index.tsx","shared/components/Tabs/index.tsx","business/Player/FullScreenPlayer/ProgressBar/index.tsx","business/Player/FullScreenPlayer/index.tsx","business/Player/MiniPlayer/ProgressCircle/index.tsx","business/Player/MiniPlayer/index.tsx","business/Player/PlayListModal/index.tsx","shared/components/Confirm/index.tsx","shared/lyric-parser/index.ts","business/Player/index.tsx","pages/Recommend/index.tsx","pages/singer/List/index.tsx","shared/hooks/useAsyncTask/index.ts","shared/hooks/usePagination/fetcher-strategies/roll.ts","shared/hooks/usePagination/fetcher-strategies/index.ts","shared/hooks/usePagination/index.ts","shared/components/SongList/index.tsx","shared/components/MusicList/index.tsx","pages/singer/Detail/index.tsx","pages/rank/List/index.tsx","pages/rank/Detail/index.tsx","pages/Routes.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","isFunction","obj","useStorage","storage","key","defaultValue","useState","getStoredValue","state","setState","raw","getItem","JSON","parse","value","removeItem","currentState","setItem","stringify","useLocalStorage","localStorage","LOCAL_PATHS","routePath","getPathByParams","list","detail","singerId","type","ResponseError","code","message","Error","request","defaults","reqInterceptors","resInterceptors","instance","this","Axios","create","timeout","interceptors","use","onFulfilled","cfg","onRejected","err","Promise","reject","response","res","status","ret","success","data","url","head","params","config","get","handleResponse","delete","post","put","patch","promises","all","callback","spread","baseURL","API_DOMAIN","headers","common","app_id","process","app_secret","resData","responseType","result","msg","query","keyWord","songId","lyricLink","usecase","getRecommendList","a","SongRepo","responseList","map","song","song_id","songName","title","ting_uid","singerPic","pic_singer","singerName","author","albumTitle","album_title","language","proxyCompany","si_proxycompany","info","hugeSongPic","pic_huge","bigSongPic","pic_big","premiumSongPic","pic_premium","smallSongPic","pic_small","publishTime","publishtime","getRankList","name","comment","firstPic","pic_s192","secondPic","pic_s444","thirdPic","pic_s260","forthPic","pic_s210","getRankSongList","fulfilledList","duration","file_duration","lrcLink","lrclink","country","songPic","searchSingerList","getSingerDetail","artistId","artist_id","stature","avatar","constellation","intro","company","birth","getSingerSongList","searchSongList","getSongDetail","id","albumName","artistName","time","songLink","replace","format","rate","size","getLyric","PlayMode","ua","navigator","userAgent","toLowerCase","some","el","indexOf","MessageItem","props","className","content","option","onDestroy","useEffect","timer","setTimeout","clearTimeout","classNames","styles","MessageContainer","forwardRef","_","ref","setMessage","generateMessageId","Date","now","length","characters","charactersLength","Array","fill","charAt","Math","floor","random","join","generateRandomString","useImperativeHandle","createMessage","messageId","destroyMessage","useCallback","undefined","container","containerRef","createRef","document","createElement","body","appendChild","ReactDOM","render","current","createContainer","isPlaying","setIsPlaying","isPlayerFullScreen","setIsPlayerFullScreen","playList","setPlayList","playingSong","setPlayingSong","sequenceList","setSequenceList","Sequence","playMode","setPlayMode","songIndex","setSongIndex","historyTerms","setHistoryTerms","favoriteList","setFavoriteList","onPlayListAndSongIndexChanged","index","playingSongId","playSong","SongUsecase","lyric","image","playUrl","selectPlay","randomPlay","Random","randomPlayList","array","min","max","slice","i","j","temp","shuffle","addAndPlaySong","targetIndex","findIndex","item","prev","deleteSong","newPlayList","newSequenceList","nextSongIndex","pIndex","splice","sIndex","clearPlayList","saveFavorite","compare","maxLength","unshift","pop","insertToArray","deleteFavorite","deleteFromArray","Header","onUserIconClick","header","icon","text","mine","iconMine","onClick","Tabs","tabs","tab","path","to","link","label","ProgressBar","percent","onPercentChange","useRef","progressRef","progressBtnRef","touch","initiated","startX","left","containerWidth","clientWidth","progressMaxWidth","progressCurrentWidth","offset","offsetWidth","style","width","transform","inner","progress","progressBtnWrapper","onTouchStart","e","touches","pageX","onTouchMove","deltaX","newOffsetWidth","onTouchEnd","progressBtn","FullScreenPlayer","visible","currentTime","onBack","onPlayingToggle","onPlayModeChange","onPrevClick","onNextClick","onFavoriteSave","onFavoriteDelete","pad","val","n","toString","timeFormat","minute","second","background","height","src","alt","top","back","backIcon","subtitle","middle","middleLeft","cdWrapper","cdImage","playing","lyricWrapper","bottom","progressWrapper","progressBar","right","operations","leftIcon","Loop","modes","Object","values","nextIndex","mode","centerIcon","rightIcon","favoriteIcon","isFavorite","ProgressCircle","radius","children","dashArray","PI","dashOffset","viewBox","version","cx","cy","r","strokeDasharray","strokeDashoffset","MiniPlayer","onPlayerClick","onPlayListShow","cd","cdImageWrapper","desc","control","playIcon","stopPropagation","listIcon","playModeDescMap","PlayListModal","onClose","onSelect","onRemove","onClear","selectSong","toggleFavorite","removeSong","modeIcon","modeText","clear","clearIcon","like","close","Confirm","maskClosable","confirmText","cancelText","onConfirm","onCancel","mask","footer","footerBtn","closeBtn","timeExp","tagRegMap","artist","album","by","noop","LyricParser","handler","tags","lines","curNum","startStamp","pauseStamp","init","startTime","skipLast","findCurNum","callHandler","playRest","stop","play","initTag","initLines","tag","hasOwnProperty","matches","match","RegExp","split","line","exec","lyricText","trim","push","sort","b","lineNum","delay","Player","Container","useContainer","isConfirmVisible","setIsConfirmVisible","isPlayListVisible","setIsPlayListVisible","isAudioReady","setIsAudioReady","lyricParser","setLyricParser","playingLyric","setPlayingLyric","audioRef","currentPlayingTime","setCurrentPlayingTime","currentPercent","faviroteSongIdSet","useMemo","Set","togglePlaying","loop","seek","handleLyric","playListWithFavorite","has","fullScreenPlayingSong","togglePlay","pause","onCanPlay","onTimeUpdate","target","onEnded","listLength","next","onError","Recommend","recommendList","setRecommendList","listTitle","SingerList","singerList","setSingerList","onSingerClick","singer","history","useAsyncTask","task","isLoaded","setIsLoaded","isPending","setIsPending","createStrategy","fetcher","pageNo","queryData","rollFetcher","page","getFetcherStrategy","rollStrategy","usePagination","pageSize","initialPageNo","disabled","isDisabled","setIsDisabled","setPage","setData","dataRef","hasMore","isRefetch","strategy","fetch","fulfilledResult","curData","previousPageData","nextPageData","concat","finalTask","refetchTask","refetch","loadMore","SongList","songList","onSongSelect","rank","MusicList","cover","onRandomPlay","backgroundImage","playerWrapper","songListContainer","SingerDetail","setSinger","initialLoad","threshold","useWindow","goBack","RankList","rankList","setRankList","onRankClick","RankDetail","rankType","Number","setRank","matched","find","Routes","exact","component","require","App","Provider","basename","Boolean","window","location","hostname","getElementById","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.c9e0c074.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MiniPlayer_container__1fcGD\",\"visible\":\"MiniPlayer_visible__3Dz5A\",\"cd\":\"MiniPlayer_cd__3HsXL\",\"cdImageWrapper\":\"MiniPlayer_cdImageWrapper__2tfuC\",\"cdImage\":\"MiniPlayer_cdImage__3M2rJ\",\"rotate\":\"MiniPlayer_rotate__2jjF3\",\"playing\":\"MiniPlayer_playing__2EPEA\",\"text\":\"MiniPlayer_text__1UzVX\",\"name\":\"MiniPlayer_name__nSDYy\",\"desc\":\"MiniPlayer_desc__2I3fU\",\"control\":\"MiniPlayer_control__2t91O\",\"playIcon\":\"MiniPlayer_playIcon__28-Nl\",\"listIcon\":\"MiniPlayer_listIcon__2ASrg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MusicList_header__2DSAu\",\"backIcon\":\"MusicList_backIcon__ePdxO\",\"title\":\"MusicList_title__37IYn\",\"cover\":\"MusicList_cover__vrLrC\",\"mask\":\"MusicList_mask__3Z-Vc\",\"playerWrapper\":\"MusicList_playerWrapper__3wUJP\",\"play\":\"MusicList_play__tskpk\",\"playIcon\":\"MusicList_playIcon__1Ln_z\",\"text\":\"MusicList_text__3jabf\",\"songListContainer\":\"MusicList_songListContainer__1KQLk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"Confirm_mask__2URXs\",\"visible\":\"Confirm_visible__GxLGs\",\"body\":\"Confirm_body__3F1Jn\",\"content\":\"Confirm_content__2c74C\",\"footer\":\"Confirm_footer__3gJ17\",\"footerBtn\":\"Confirm_footerBtn__1UKhk\",\"closeBtn\":\"Confirm_closeBtn__2Q5QL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Recommend_container__1_pE7\",\"content\":\"Recommend_content__3O6lw\",\"listTitle\":\"Recommend_listTitle__22osE\",\"item\":\"Recommend_item__VMkzA\",\"icon\":\"Recommend_icon__2aP8r\",\"text\":\"Recommend_text__3uP3k\",\"name\":\"Recommend_name__2WM6a\",\"desc\":\"Recommend_desc__2c1DP\",\"loading-container\":\"Recommend_loading-container__3ctAi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"SongList_item__1boDc\",\"rank\":\"SongList_rank__Ff-ju\",\"icon\":\"SongList_icon__2Z1k4\",\"text\":\"SongList_text__bwiI0\",\"content\":\"SongList_content__coXSI\",\"name\":\"SongList_name__1R3FQ\",\"desc\":\"SongList_desc__3LlhI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"List_container__28AaT\",\"list\":\"List_list__2O6T7\",\"item\":\"List_item__2T6I7\",\"icon\":\"List_icon__IDvQM\",\"info\":\"List_info__3TZOt\",\"name\":\"List_name__1hi-u\",\"comment\":\"List_comment__H9sM8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3VPBX\",\"icon\":\"Header_icon__3K7p0\",\"text\":\"Header_text__2nUCj\",\"mine\":\"Header_mine__1ifKZ\",\"iconMine\":\"Header_iconMine__1ynUa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProgressBar_container__-ZAvS\",\"inner\":\"ProgressBar_inner__1EIxV\",\"progress\":\"ProgressBar_progress__3mEJg\",\"progressBtnWrapper\":\"ProgressBar_progressBtnWrapper__1O2X1\",\"progressBtn\":\"ProgressBar_progressBtn__1OCt0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"List_container__189Un\",\"list\":\"List_list__3dnNW\",\"item\":\"List_item__iZXqJ\",\"avatar\":\"List_avatar__1hjoO\",\"name\":\"List_name__26KdE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3PIvH\",\"message\":\"styles_message__2w9kq\",\"content\":\"styles_content__TvzOl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab\":\"Tabs_tab__2UsYl\",\"item\":\"Tabs_item__3ZvGw\",\"link\":\"Tabs_link__PNMpC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProgressCircle_container__1W7ZF\",\"background\":\"ProgressCircle_background__2bFqW\",\"progress\":\"ProgressCircle_progress__1rjw9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Detail_container__3Z3sL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Detail_container__35C0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FullScreenPlayer_container__1WBCF\",\"visible\":\"FullScreenPlayer_visible__3wYjU\",\"background\":\"FullScreenPlayer_background__EhGlJ\",\"top\":\"FullScreenPlayer_top__3dxkU\",\"back\":\"FullScreenPlayer_back__24XoF\",\"backIcon\":\"FullScreenPlayer_backIcon__nl8Za\",\"title\":\"FullScreenPlayer_title__2whcd\",\"subtitle\":\"FullScreenPlayer_subtitle__15SDT\",\"middle\":\"FullScreenPlayer_middle__3mfhj\",\"middleLeft\":\"FullScreenPlayer_middleLeft__3jXL2\",\"cdWrapper\":\"FullScreenPlayer_cdWrapper__9QpDm\",\"cdImage\":\"FullScreenPlayer_cdImage__2Tir_\",\"rotate\":\"FullScreenPlayer_rotate__2o1sX\",\"playing\":\"FullScreenPlayer_playing__PlMf-\",\"lyricWrapper\":\"FullScreenPlayer_lyricWrapper__3QkAU\",\"lyric\":\"FullScreenPlayer_lyric__u2TmU\",\"bottom\":\"FullScreenPlayer_bottom__Qn1G5\",\"progressWrapper\":\"FullScreenPlayer_progressWrapper__3bjBe\",\"time\":\"FullScreenPlayer_time__G0wxb\",\"left\":\"FullScreenPlayer_left__AQYyE\",\"right\":\"FullScreenPlayer_right__1g-nO\",\"progressBar\":\"FullScreenPlayer_progressBar__2RYdW\",\"operations\":\"FullScreenPlayer_operations__1zkkf\",\"icon\":\"FullScreenPlayer_icon__3g624\",\"disable\":\"FullScreenPlayer_disable__1UPqk\",\"leftIcon\":\"FullScreenPlayer_leftIcon__3xJ0-\",\"centerIcon\":\"FullScreenPlayer_centerIcon__3Xqyh\",\"rightIcon\":\"FullScreenPlayer_rightIcon__14U9V\",\"favoriteIcon\":\"FullScreenPlayer_favoriteIcon__2YgGX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PlayListModal_container__374-Z\",\"visible\":\"PlayListModal_visible__36jZw\",\"body\":\"PlayListModal_body__34_-S\",\"header\":\"PlayListModal_header__S-RLN\",\"modeIcon\":\"PlayListModal_modeIcon__1ENBU\",\"modeText\":\"PlayListModal_modeText__2l8oY\",\"clear\":\"PlayListModal_clear__2gMK6\",\"clearIcon\":\"PlayListModal_clearIcon__ZtDnR\",\"list\":\"PlayListModal_list__3qi0u\",\"item\":\"PlayListModal_item__2Caa-\",\"current\":\"PlayListModal_current__2r4d2\",\"songName\":\"PlayListModal_songName__1qGO5\",\"like\":\"PlayListModal_like__1o4kB\",\"delete\":\"PlayListModal_delete__7ohBb\",\"close\":\"PlayListModal_close__lqFSM\"};","import { useState } from 'react';\r\n\r\ninterface IFuncUpdater<T> {\r\n  (previousState?: T): T;\r\n}\r\n\r\nfunction isFunction<T>(obj: any): obj is T {\r\n  return typeof obj === 'function';\r\n}\r\n\r\nconst useStorage = <T>(\r\n  storage: Storage,\r\n  key: string,\r\n  defaultValue?: T | IFuncUpdater<T>\r\n) => {\r\n  const [state, setState] = useState<T | undefined>(() => getStoredValue());\r\n\r\n  function getStoredValue() {\r\n    const raw = storage.getItem(key);\r\n    if (raw) {\r\n      return JSON.parse(raw);\r\n    }\r\n    if (isFunction<IFuncUpdater<T>>(defaultValue)) {\r\n      return defaultValue();\r\n    }\r\n\r\n    return defaultValue;\r\n  }\r\n\r\n  const updateState = (value?: T | IFuncUpdater<T>) => {\r\n    if (typeof value === 'undefined') {\r\n      storage.removeItem(key);\r\n      setState(defaultValue);\r\n    } else if (isFunction<IFuncUpdater<T>>(value)) {\r\n      const previousState = getStoredValue();\r\n      const currentState = value(previousState);\r\n      storage.setItem(key, JSON.stringify(currentState));\r\n      setState(currentState);\r\n    } else {\r\n      storage.setItem(key, JSON.stringify(value));\r\n      setState(value);\r\n    }\r\n  };\r\n  return [state, updateState];\r\n};\r\n\r\nexport default useStorage;\r\n","import useStorage from './useStorage';\r\n\r\nfunction useLocalStorage<T = undefined>(\r\n  key: string\r\n): [T | undefined, (value?: T | ((previousState?: T) => T)) => void];\r\n\r\nfunction useLocalStorage<T>(\r\n  key: string,\r\n  defaultValue: T | (() => T)\r\n): [T, (value?: T | ((previousState?: T) => T)) => void];\r\n\r\nfunction useLocalStorage<T>(key: string, defaultValue?: T | (() => T)) {\r\n  return useStorage(localStorage, key, defaultValue);\r\n}\r\n\r\nexport default useLocalStorage;\r\n","export const LOCAL_PATHS = {\r\n  recommend: {\r\n    routePath: '/recommend',\r\n    getPathByParams: () => '/recommend'\r\n  },\r\n  singer: {\r\n    list: {\r\n      routePath: '/singer/list',\r\n      getPathByParams: () => '/singer/list'\r\n    },\r\n    detail: {\r\n      routePath: '/singer/detail/:id',\r\n      getPathByParams: (singerId: string) => `/singer/detail/${singerId}`\r\n    }\r\n  },\r\n  rank: {\r\n    list: {\r\n      routePath: '/rank/list',\r\n      getPathByParams: () => '/rank/list'\r\n    },\r\n    detail: {\r\n      routePath: '/rank/detail/:type',\r\n      getPathByParams: (type: number) => `/rank/detail/${type}`\r\n    }\r\n  },\r\n  search: {\r\n    routePath: '/search',\r\n    getPathByParams: () => '/search'\r\n  }\r\n};\r\n\r\n// storage\r\nexport const STORATE_PLAY_LIST_KEY = 'music_mweb:play_list';\r\nexport const STORAGE_HISTORY_TERMS_KEY = 'music_mweb:history_terms';\r\nexport const STORAGE_FAVORITE_LIST_KEY = 'music_mweb:favorite_list';\r\n\r\n// config\r\nexport const MAX_FAVORITE_LIST_LENGTH = 200;\r\n","import Axios, {\r\n  AxiosInstance,\r\n  AxiosRequestConfig,\r\n  AxiosResponse,\r\n  AxiosError\r\n} from 'axios';\r\n\r\nimport {\r\n  RES_FAILED_DEFAULT_CODE,\r\n  RES_FAILED_DEFAULT_MSG\r\n} from 'shared/constants';\r\n\r\ninterface ResponseErrorOption {\r\n  code: string | number;\r\n  message: string;\r\n}\r\n\r\n/**\r\n * 封装请求响应 Error\r\n */\r\nexport class ResponseError extends Error {\r\n  code: string | number;\r\n\r\n  constructor({ code = '', message = '' }: ResponseErrorOption) {\r\n    super(message);\r\n    this.code = code;\r\n  }\r\n}\r\n\r\nexport interface Response<T> {\r\n  data: T;\r\n  code: number;\r\n  message: string;\r\n  success: boolean;\r\n}\r\n\r\ninterface RequestOption {\r\n  defaults?: AxiosRequestConfig;\r\n  reqInterceptors?: {\r\n    onFulfilled?: (\r\n      config: AxiosRequestConfig\r\n    ) => AxiosRequestConfig | Promise<AxiosRequestConfig>;\r\n    onRejected?: (error: any) => any | undefined;\r\n  };\r\n  resInterceptors?: {\r\n    onFulfilled?: (\r\n      value: AxiosResponse\r\n    ) => AxiosResponse | Promise<AxiosResponse>;\r\n    onRejected?: (err: AxiosError) => Promise<ResponseError>;\r\n  };\r\n}\r\n\r\nclass Request {\r\n  private instance: AxiosInstance;\r\n\r\n  constructor({\r\n    defaults = {},\r\n    reqInterceptors = {},\r\n    resInterceptors = {}\r\n  }: RequestOption) {\r\n    this.instance = Axios.create({\r\n      ...defaults,\r\n      timeout: 50000\r\n    });\r\n\r\n    this.instance.interceptors.request.use(\r\n      reqInterceptors.onFulfilled || (cfg => cfg),\r\n      reqInterceptors.onRejected || (err => Promise.reject(err))\r\n    );\r\n\r\n    const defaultOnFulFilled = (res: AxiosResponse) => res;\r\n    const defaultOnRejected = (err: AxiosError) => {\r\n      return !err.response\r\n        ? Promise.reject(\r\n            new ResponseError({\r\n              code: RES_FAILED_DEFAULT_CODE,\r\n              message: RES_FAILED_DEFAULT_MSG\r\n            })\r\n          )\r\n        : Promise.reject(\r\n            new ResponseError({\r\n              code: err.response.status,\r\n              message: err.message\r\n            })\r\n          );\r\n    };\r\n\r\n    this.instance.interceptors.response.use(\r\n      resInterceptors.onFulfilled || defaultOnFulFilled,\r\n      resInterceptors.onRejected || defaultOnRejected\r\n    );\r\n  }\r\n\r\n  private handleResponse<T>(ret: Response<T>) {\r\n    return ret.success\r\n      ? ret.data\r\n      : Promise.reject(\r\n          new ResponseError({\r\n            code: ret.code,\r\n            message: ret.message\r\n          })\r\n        );\r\n  }\r\n\r\n  public static async all<T>(promises: Promise<T>[]) {\r\n    return Axios.all<T>(promises);\r\n  }\r\n\r\n  public static async spread<T, R>(callback: (...args: T[]) => R) {\r\n    return Axios.spread<T, R>(callback);\r\n  }\r\n\r\n  public async head(url: string) {\r\n    const res = await this.instance.head(url);\r\n\r\n    return res.data;\r\n  }\r\n\r\n  public async get<T = any>(\r\n    url: string,\r\n    params?: object,\r\n    config: AxiosRequestConfig = {}\r\n  ) {\r\n    const { data: ret } = await this.instance.get<Response<T>>(url, {\r\n      ...config,\r\n      params\r\n    });\r\n\r\n    return this.handleResponse(ret);\r\n  }\r\n\r\n  public async delete(url: string) {\r\n    const res = await this.instance.delete(url);\r\n\r\n    return res.data;\r\n  }\r\n\r\n  public async post<T = any>(\r\n    url: string,\r\n    data?: any,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    const { data: ret } = await this.instance.post<Response<T>>(\r\n      url,\r\n      data,\r\n      config\r\n    );\r\n\r\n    return this.handleResponse(ret);\r\n  }\r\n\r\n  public async put<T = any>(\r\n    url: string,\r\n    data?: any,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    const { data: ret } = await this.instance.put<Response<T>>(\r\n      url,\r\n      data,\r\n      config\r\n    );\r\n\r\n    return this.handleResponse(ret);\r\n  }\r\n\r\n  public async patch<T = any>(\r\n    url: string,\r\n    data?: any,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    const { data: ret } = await this.instance.patch<Response<T>>(\r\n      url,\r\n      data,\r\n      config\r\n    );\r\n\r\n    return this.handleResponse(ret);\r\n  }\r\n}\r\n\r\nexport default Request;\r\n","import { AxiosResponse } from 'axios';\r\n\r\nimport Request, { Response, ResponseError } from './http';\r\nimport {\r\n  REQ_BASE_PATH,\r\n  RES_FAILED_DEFAULT_CODE,\r\n  RES_FAILED_DEFAULT_MSG,\r\n  RES_SUCCESS_DEFAULT_CODE,\r\n  RES_SUCCESS_DEFAULT_MSG,\r\n  API_APP_ID,\r\n  API_APP_SECRET\r\n} from 'shared/constants';\r\n\r\n/**\r\n * 服务器返回数据统一格式\r\n */\r\ninterface ServerResponse {\r\n  code: 0 | 1; // 0 返回失败，1 返回成功\r\n  msg: string; // 当 code 返回 0 时候包含错误提示\r\n  data?: any; // 具体接口数据信息\r\n}\r\n\r\nconst request = new Request({\r\n  defaults: {\r\n    baseURL: REQ_BASE_PATH,\r\n    headers: {\r\n      common: {\r\n        app_id: API_APP_ID,\r\n        app_secret: API_APP_SECRET\r\n      }\r\n    }\r\n  },\r\n  reqInterceptors: {\r\n    onFulfilled: config => ({\r\n      ...config,\r\n      params: {\r\n        ...config.params,\r\n        app_id: API_APP_ID,\r\n        app_secret: API_APP_SECRET\r\n      }\r\n    })\r\n  },\r\n  resInterceptors: {\r\n    onFulfilled: (res: AxiosResponse<ServerResponse>) => {\r\n      const {\r\n        data: resData,\r\n        config: { responseType }\r\n      } = res;\r\n      let result: Response<any> = {\r\n        data: null,\r\n        code: RES_SUCCESS_DEFAULT_CODE,\r\n        message: RES_SUCCESS_DEFAULT_MSG,\r\n        success: true\r\n      };\r\n\r\n      if (resData === null || resData === void 0) {\r\n        result.data = {};\r\n      } else if (\r\n        typeof resData !== 'object' ||\r\n        (responseType && responseType !== 'json')\r\n      ) {\r\n        result.data = resData;\r\n      } else {\r\n        result = {\r\n          data: resData.data,\r\n          code: resData.code,\r\n          message: resData.msg,\r\n          success: resData.code === RES_SUCCESS_DEFAULT_CODE\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...res,\r\n        data: result\r\n      };\r\n    },\r\n    onRejected: err => {\r\n      if (!err.response) {\r\n        return Promise.reject(\r\n          new ResponseError({\r\n            code: RES_FAILED_DEFAULT_CODE,\r\n            message: RES_FAILED_DEFAULT_MSG\r\n          })\r\n        );\r\n      }\r\n\r\n      const { code, msg } = err.response.data as ServerResponse;\r\n\r\n      return Promise.reject(\r\n        new ResponseError({\r\n          code: code || err.response.status,\r\n          message: msg || ''\r\n        })\r\n      );\r\n    }\r\n  }\r\n});\r\n\r\nexport default request;\r\n","export const BASE_NAME = process.env.REACT_APP_BASE_NAME as string;\r\n\r\n// request\r\nconst API_DOMAIN = process.env.REACT_APP_API_DOMAIN as string;\r\nconst API_PREFIX_PATH = process.env.REACT_APP_API_PREFIX_PATH as string;\r\nexport const REQ_BASE_PATH = API_DOMAIN + API_PREFIX_PATH;\r\nexport const RES_SUCCESS_DEFAULT_CODE = 1;\r\nexport const RES_FAILED_DEFAULT_CODE = 0;\r\nexport const RES_SUCCESS_DEFAULT_MSG = 'success';\r\nexport const RES_FAILED_DEFAULT_MSG = 'uncaught exception';\r\n\r\n// request secret\r\nexport const API_APP_ID = process.env.REACT_APP_API_APP_ID as string;\r\nexport const API_APP_SECRET = process.env.REACT_APP_API_APP_SECRET as string;\r\n","import request from 'shared/request';\r\n\r\nimport {\r\n  RollApiPaginationQuery,\r\n  RollApiPaginationResult\r\n} from 'shared/typings';\r\nimport {\r\n  ResponseRecommendSong,\r\n  ResponseRank,\r\n  ResponseListSong,\r\n  ResponseSingerDetail,\r\n  ResponseSingerSong,\r\n  ResponseSongDetail,\r\n  ResponseSinger\r\n} from './typings';\r\n\r\nexport default {\r\n  /**\r\n   * 获取每日音乐推荐列表\r\n   */\r\n  getRecommendList: () => {\r\n    return request.get<ResponseRecommendSong[]>('/music/recommend/list');\r\n  },\r\n  /**\r\n   * 获取榜单列表\r\n   */\r\n  getRankList: () => {\r\n    return request.get<ResponseRank[]>('/music/order/list');\r\n  },\r\n  /**\r\n   * 获取指定榜单类型的歌曲列表\r\n   */\r\n  getRankSongList: (query: RollApiPaginationQuery<{ type: number }>) => {\r\n    return request.get<RollApiPaginationResult<ResponseSingerSong[]>>(\r\n      '/music/order/song/list',\r\n      query\r\n    );\r\n  },\r\n  /**\r\n   * 搜索歌手列表\r\n   */\r\n  searchSingerList: (keyWord: string) => {\r\n    return request.get<ResponseSinger[]>('/music/singer/search', { keyWord });\r\n  },\r\n  /**\r\n   * 获取歌手详情\r\n   */\r\n  getSingerDetail: (singerId: string) => {\r\n    return request.get<ResponseSingerDetail>('/music/singer/detail', {\r\n      singerId\r\n    });\r\n  },\r\n  /**\r\n   * 获取歌手的歌曲列表\r\n   */\r\n  getSingerSongList: (query: RollApiPaginationQuery<{ singerId: string }>) => {\r\n    return request.get<RollApiPaginationResult<ResponseSingerSong[]>>(\r\n      '/music/singer/song/list',\r\n      query\r\n    );\r\n  },\r\n  /**\r\n   * 搜索歌曲列表\r\n   */\r\n  searchSongList: (query: RollApiPaginationQuery<{ keyWord: string }>) => {\r\n    return request.get<RollApiPaginationResult<ResponseListSong[]>>(\r\n      '/music/song/search',\r\n      query\r\n    );\r\n  },\r\n  /**\r\n   * 获取歌曲详情\r\n   */\r\n  getSongDetail: (songId: string) => {\r\n    return request.get<ResponseSongDetail>('/music/song/detail', { songId });\r\n  },\r\n  /**\r\n   * 获取歌词\r\n   */\r\n  getLyric: (lyricLink: string) => {\r\n    return request.get<string>(lyricLink, { responseType: 'text' });\r\n  }\r\n};\r\n","import usecase from './usecase';\r\n\r\nexport default usecase;\r\n","import SongRepo from './repo';\r\nimport {\r\n  RollApiPaginationQuery,\r\n  RollApiPaginationResult\r\n} from 'shared/typings';\r\nimport {\r\n  FulfilledRecommendSong,\r\n  FulfilledRank,\r\n  FulfilledSingerSong,\r\n  FulfilledSinger,\r\n  FulfilledSingerDetail,\r\n  FulfilledListSong,\r\n  FulfilledSongDetail\r\n} from './typings';\r\n\r\nexport default {\r\n  getRecommendList: async () => {\r\n    const responseList = await SongRepo.getRecommendList();\r\n    return responseList.map(song => {\r\n      const fulfilledSong: FulfilledRecommendSong = {\r\n        songId: song.song_id,\r\n        songName: song.title,\r\n        singerId: song.ting_uid,\r\n        singerPic: song.pic_singer,\r\n        singerName: song.author,\r\n        albumTitle: song.album_title,\r\n        language: song.language,\r\n        proxyCompany: song.si_proxycompany,\r\n        info: song.info,\r\n        hugeSongPic: song.pic_huge,\r\n        bigSongPic: song.pic_big,\r\n        premiumSongPic: song.pic_premium,\r\n        smallSongPic: song.pic_small,\r\n        publishTime: song.publishtime\r\n      };\r\n\r\n      return fulfilledSong;\r\n    });\r\n  },\r\n  getRankList: async () => {\r\n    const responseList = await SongRepo.getRankList();\r\n    return responseList.map(song => {\r\n      const fulfilledSong: FulfilledRank = {\r\n        name: song.name,\r\n        type: song.type,\r\n        comment: song.comment,\r\n        firstPic: song.pic_s192,\r\n        secondPic: song.pic_s444,\r\n        thirdPic: song.pic_s260,\r\n        forthPic: song.pic_s210\r\n      };\r\n\r\n      return fulfilledSong;\r\n    });\r\n  },\r\n  getRankSongList: async (query: RollApiPaginationQuery<{ type: number }>) => {\r\n    const response = await SongRepo.getRankSongList(query);\r\n    const fulfilledList = response.list.map(song => {\r\n      const fulfilledSong: FulfilledSingerSong = {\r\n        songId: song.song_id,\r\n        songName: song.title,\r\n        singerId: song.ting_uid,\r\n        singerName: song.author,\r\n        proxyCompany: song.si_proxycompany,\r\n        duration: song.file_duration,\r\n        lrcLink: song.lrclink,\r\n        country: song.country,\r\n        songPic: song.pic_big,\r\n        language: song.language,\r\n        publishTime: song.publishtime\r\n      };\r\n\r\n      return fulfilledSong;\r\n    });\r\n    const ret: RollApiPaginationResult<FulfilledSingerSong[]> = {\r\n      ...response,\r\n      list: fulfilledList\r\n    };\r\n\r\n    return ret;\r\n  },\r\n  searchSingerList: async (keyWord: string) => {\r\n    const responseList = await SongRepo.searchSingerList(keyWord);\r\n    return responseList as FulfilledSinger[];\r\n  },\r\n  getSingerDetail: async (singerId: string) => {\r\n    const response = await SongRepo.getSingerDetail(singerId);\r\n    const ret: FulfilledSingerDetail = {\r\n      artistId: response.artist_id,\r\n      singerId: response.singerId,\r\n      singerName: response.name,\r\n      stature: response.stature,\r\n      avatar: response.avatar,\r\n      constellation: response.constellation,\r\n      intro: response.intro,\r\n      company: response.company,\r\n      country: response.country,\r\n      birth: response.birth\r\n    };\r\n\r\n    return ret;\r\n  },\r\n  getSingerSongList: async (\r\n    query: RollApiPaginationQuery<{ singerId: string }>\r\n  ) => {\r\n    const response = await SongRepo.getSingerSongList(query);\r\n    const fulfilledList = response.list.map(song => {\r\n      const fulfilledSong: FulfilledSingerSong = {\r\n        songId: song.song_id,\r\n        songName: song.title,\r\n        singerId: song.ting_uid,\r\n        singerName: song.author,\r\n        proxyCompany: song.si_proxycompany,\r\n        duration: song.file_duration,\r\n        lrcLink: song.lrclink,\r\n        country: song.country,\r\n        songPic: song.pic_big,\r\n        language: song.language,\r\n        publishTime: song.publishtime\r\n      };\r\n\r\n      return fulfilledSong;\r\n    });\r\n    const ret: RollApiPaginationResult<FulfilledSingerSong[]> = {\r\n      ...response,\r\n      list: fulfilledList\r\n    };\r\n\r\n    return ret;\r\n  },\r\n  searchSongList: async (\r\n    query: RollApiPaginationQuery<{ keyWord: string }>\r\n  ) => {\r\n    const response = await SongRepo.searchSongList(query);\r\n    return response as RollApiPaginationResult<FulfilledListSong[]>;\r\n  },\r\n  getSongDetail: async (songId: string) => {\r\n    const response = await SongRepo.getSongDetail(songId);\r\n    const ret: FulfilledSongDetail = {\r\n      songId: response.id,\r\n      songName: response.songName,\r\n      albumName: response.albumName,\r\n      singerName: response.artistName,\r\n      songPic: response.songPic,\r\n      lrcLink: response.lrcLink,\r\n      time: response.time,\r\n      songLink: response.songLink.replace(/http:/g, 'https:'),\r\n      format: response.format,\r\n      rate: response.rate,\r\n      size: response.size\r\n    };\r\n\r\n    return ret;\r\n  },\r\n  getLyric: (lyricLink: string) => {\r\n    return SongRepo.getLyric(lyricLink.replace(/http:/g, 'https:'));\r\n  }\r\n};\r\n","/**\r\n * 随机抽取（包含） min 到 max 之间的数\r\n */\r\nfunction getRandomInt(min: number, max: number): number {\r\n  return Math.floor(Math.random() * (max - min + 1) + min); // +1 是保证能取到上限的值\r\n}\r\n\r\n/**\r\n * 把数组元素打乱，经典的 shuffle 算法\r\n */\r\nexport function shuffle<T extends any[]>(array: T): T {\r\n  const res = array.slice() as T;\r\n\r\n  for (let i = 0; i < res.length; i++) {\r\n    const j = getRandomInt(0, i);\r\n    const temp = res[i];\r\n    res[i] = array[j];\r\n    res[j] = temp;\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\n/**\r\n * 往数组头部插入元素，限制最大长度\r\n */\r\nexport function insertToArray<T>(\r\n  array: T[],\r\n  item: T,\r\n  compare: (item: T) => boolean,\r\n  maxLength: number\r\n) {\r\n  array = array.slice(); // 复制数组，避免影响原数组\r\n  const index = array.findIndex(compare);\r\n  if (index === 0) {\r\n    // 如果存在该数据并且在最前面，则什么都不干\r\n    return array;\r\n  } else if (index > 0) {\r\n    // 如果存在该数据但不是在最前面，则删掉这个数据\r\n    array.splice(index, 1);\r\n  }\r\n  array.unshift(item); // 在数组最前面插入这个值\r\n  if (maxLength && array.length > maxLength) {\r\n    // 如果数组超出最大长度，则删除最后一个\r\n    array.pop();\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\n/**\r\n * 从数组删除元素\r\n */\r\nexport function deleteFromArray<T>(array: T[], compare: (item: T) => boolean) {\r\n  array = array.slice(); // 复制数组，避免影响原数组\r\n  const index = array.findIndex(compare);\r\n  if (index > -1) {\r\n    array.splice(index, 1);\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nconst ua = navigator.userAgent.toLowerCase();\r\nexport const isIOS = ['iphone', 'ipad', 'macintosh'].some(\r\n  el => ua.indexOf(el) > -1\r\n);\r\nexport const isAndroid = ua.indexOf('android') > -1;\r\n","/**\r\n * 分页查询基本参数\r\n * https://github.com/MZCretin/RollToolsApi\r\n */\r\ninterface RollApiBasicPaginationQuery {\r\n  page: number;\r\n}\r\n\r\n/**\r\n * 分页查询参数\r\n */\r\nexport type RollApiPaginationQuery<T> = T extends\r\n  | void\r\n  | undefined\r\n  | null\r\n  | never\r\n  ? RollApiBasicPaginationQuery\r\n  : T & RollApiBasicPaginationQuery;\r\n\r\n/**\r\n * 分页查询结果\r\n */\r\nexport interface RollApiPaginationResult<T> {\r\n  page: number; // 当前页数\r\n  totalCount: number; // 总数量\r\n  totalPage: number; // 总页数\r\n  list: T; // 具体数据模型\r\n  limit: number; // 每页数量\r\n}\r\n\r\n/**\r\n * 播放模式\r\n */\r\nexport enum PlayMode {\r\n  Sequence = 'SEQUENCE', // 顺序播放\r\n  Loop = 'LOOP', // 单曲循环\r\n  Random = 'RANDOM' // 随机播放\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { Message } from './typings';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\ninterface Props {\r\n  className?: string;\r\n  message: Message;\r\n  onDestroy: (messageId: string) => void;\r\n}\r\n\r\nconst MessageItem: React.FC<Props> = props => {\r\n  const {\r\n    className = '',\r\n    message: { id, content, option },\r\n    onDestroy\r\n  } = props;\r\n\r\n  const duration = option?.duration || 3000;\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      onDestroy(id);\r\n    }, duration);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [onDestroy, id, duration]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.message]: true,\r\n        [className]: true\r\n      })}\r\n    >\r\n      <main className={styles.content}>{content}</main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageItem;\r\n","import React, {\r\n  useState,\r\n  useCallback,\r\n  forwardRef,\r\n  useImperativeHandle\r\n} from 'react';\r\n\r\nimport MessageItem from './MessageItem';\r\nimport { MessageType, Message, MessageOption } from './typings';\r\nimport { generateRandomString } from './utils';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\nexport interface MessageContainerRef {\r\n  createMessage: (\r\n    type: MessageType,\r\n    content: React.ReactNode,\r\n    option?: MessageOption\r\n  ) => void;\r\n}\r\n\r\nconst MessageContainer = forwardRef<MessageContainerRef>((_, ref) => {\r\n  const [message, setMessage] = useState<Message>();\r\n\r\n  const generateMessageId = () => {\r\n    return `${Date.now()}-${generateRandomString()}`;\r\n  };\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    createMessage: (\r\n      type: MessageType,\r\n      content: React.ReactNode,\r\n      option?: MessageOption\r\n    ) => {\r\n      const messageId = generateMessageId();\r\n      setMessage({\r\n        id: messageId,\r\n        type,\r\n        content,\r\n        option\r\n      });\r\n    }\r\n  }));\r\n\r\n  const destroyMessage = useCallback((messageId: string) => {\r\n    setMessage(undefined);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {message && <MessageItem message={message} onDestroy={destroyMessage} />}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default MessageContainer;\r\n","/**\r\n * 生成随机字符串\r\n */\r\nexport const generateRandomString = (length: number = 5) => {\r\n  const characters =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  const charactersLength = characters.length;\r\n\r\n  return Array(length)\r\n    .fill(null)\r\n    .map(() => characters.charAt(Math.floor(Math.random() * charactersLength)))\r\n    .join('');\r\n};\r\n","import React, { createRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport MessageContainer, { MessageContainerRef } from './Container';\r\n\r\nimport { MessageType, MessageOption } from './typings';\r\n\r\nconst containerRef = createRef<MessageContainerRef>();\r\n\r\nconst container = document.createElement('div');\r\ndocument.body.appendChild(container);\r\n\r\nReactDOM.render(<MessageContainer ref={containerRef} />, container);\r\n\r\nconst createMessage = (\r\n  type: MessageType,\r\n  content: React.ReactNode,\r\n  option?: MessageOption\r\n) => {\r\n  if (containerRef.current) {\r\n    containerRef.current.createMessage(type, content, option);\r\n  }\r\n};\r\n\r\nexport default {\r\n  success: (content: string, option?: MessageOption) => {\r\n    createMessage('SUCCESS', content, option);\r\n  },\r\n  error: (content: string, option?: MessageOption) => {\r\n    createMessage('ERROR', content, option);\r\n  },\r\n  info: (content: string, option?: MessageOption) => {\r\n    createMessage('INFO', content, option);\r\n  },\r\n  warning: (content: string, option?: MessageOption) => {\r\n    createMessage('WARNING', content, option);\r\n  }\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { createContainer } from 'unstated-next';\r\n\r\nimport useLocalStorage from 'shared/hooks/storage/useLocalStorage';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\nimport { shuffle, insertToArray, deleteFromArray } from 'shared/utils';\r\nimport {\r\n  STORATE_PLAY_LIST_KEY,\r\n  STORAGE_HISTORY_TERMS_KEY,\r\n  STORAGE_FAVORITE_LIST_KEY,\r\n  MAX_FAVORITE_LIST_LENGTH,\r\n} from 'shared/constants';\r\nimport { PlayerSong, PlayingSong } from 'shared/domain/song/typings';\r\nimport { PlayMode } from 'shared/typings';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nexport default createContainer(() => {\r\n  // 是否在播放音乐\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  // 播放器是否全屏\r\n  const [isPlayerFullScreen, setIsPlayerFullScreen] = useState(false);\r\n  // 播放列表，当循环播放与随机播放时会跟 sequenceList 不同\r\n  const [playList, setPlayList] = useLocalStorage<PlayerSong[]>(\r\n    STORATE_PLAY_LIST_KEY,\r\n    []\r\n  );\r\n  // 播放中的歌曲，需要额外获取详情的歌词与播放地址\r\n  const [playingSong, setPlayingSong] = useState<PlayingSong>();\r\n  // 顺序播放列表\r\n  const [sequenceList, setSequenceList] = useState<PlayerSong[]>([]);\r\n  // 播放模式\r\n  const [playMode, setPlayMode] = useState<PlayMode>(PlayMode.Sequence);\r\n  // 播放的音乐在列表的索引\r\n  const [songIndex, setSongIndex] = useState(-1);\r\n  // 搜索历史\r\n  const [historyTerms, setHistoryTerms] = useLocalStorage<string[]>(\r\n    STORAGE_HISTORY_TERMS_KEY,\r\n    []\r\n  );\r\n  // 收藏歌曲\r\n  const [favoriteList, setFavoriteList] = useLocalStorage<PlayerSong[]>(\r\n    STORAGE_FAVORITE_LIST_KEY,\r\n    []\r\n  );\r\n\r\n  /**\r\n   * 如果列表无歌曲，则添加，自动播放歌曲\r\n   */\r\n  const addAndPlaySong = (song: PlayerSong) => {\r\n    const targetIndex = playList.findIndex(\r\n      (item) => item.songId === song.songId\r\n    );\r\n    if (targetIndex > -1) {\r\n      setSongIndex(targetIndex);\r\n    } else {\r\n      setPlayList((prev) => (prev ? [...prev, song] : [song]));\r\n      setSongIndex(playList.length);\r\n    }\r\n    setIsPlayerFullScreen(true);\r\n  };\r\n\r\n  /**\r\n   * 从播放列表删除歌曲\r\n   */\r\n  const deleteSong = (song: PlayerSong) => {\r\n    const newPlayList = playList.slice();\r\n    const newSequenceList = sequenceList.slice();\r\n    let nextSongIndex = songIndex;\r\n\r\n    const pIndex = newPlayList.findIndex((item) => item.songId === song.songId);\r\n    newPlayList.splice(pIndex, 1);\r\n    const sIndex = newSequenceList.findIndex(\r\n      (item) => item.songId === song.songId\r\n    );\r\n    newSequenceList.splice(sIndex, 1);\r\n    if (songIndex > pIndex || nextSongIndex === newPlayList.length) {\r\n      // 如果删掉的歌曲在当前歌曲之前，或者当前歌曲是最后一首，则需减 1\r\n      nextSongIndex--;\r\n    }\r\n    setPlayList(newPlayList);\r\n    setSequenceList(newSequenceList);\r\n    setSongIndex(nextSongIndex);\r\n  };\r\n\r\n  /**\r\n   * 选择播放\r\n   */\r\n  const selectPlay = (list: PlayerSong[], index: number) => {\r\n    setSequenceList(list);\r\n    // setPlayMode('SEQUENCE');\r\n    setPlayList(list);\r\n    setSongIndex(index);\r\n    setIsPlayerFullScreen(true);\r\n  };\r\n\r\n  /**\r\n   * 随机播放\r\n   */\r\n  const randomPlay = (list: PlayerSong[]) => {\r\n    setSequenceList(list);\r\n    setPlayMode(PlayMode.Random);\r\n    const randomPlayList = shuffle(list);\r\n    setPlayList(randomPlayList);\r\n    setSongIndex(0);\r\n    setIsPlayerFullScreen(true);\r\n  };\r\n\r\n  /**\r\n   * 清空播放列表\r\n   */\r\n  const clearPlayList = () => {\r\n    setPlayList([]);\r\n    setSequenceList([]);\r\n    setSongIndex(-1);\r\n    setIsPlaying(false);\r\n  };\r\n\r\n  /**\r\n   * 收藏歌曲\r\n   */\r\n  const saveFavorite = (song: PlayerSong) => {\r\n    setFavoriteList((prev) =>\r\n      prev\r\n        ? insertToArray(\r\n            prev,\r\n            song,\r\n            (item) => item.songId === song.songId,\r\n            MAX_FAVORITE_LIST_LENGTH\r\n          )\r\n        : [song]\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 取消收藏歌曲\r\n   */\r\n  const deleteFavorite = (song: PlayerSong) => {\r\n    setFavoriteList((prev) =>\r\n      prev ? deleteFromArray(prev, (item) => item.songId === song.songId) : []\r\n    );\r\n  };\r\n\r\n  const onPlayListAndSongIndexChanged = async (\r\n    list: PlayerSong[],\r\n    index: number,\r\n    playingSongId?: string\r\n  ) => {\r\n    try {\r\n      if (0 <= index && index < list.length) {\r\n        const playSong = list[index];\r\n        const songId = playSong.songId;\r\n        if (songId !== playingSongId) {\r\n          const result = await SongUsecase.getSongDetail(songId);\r\n          const lyric = await SongUsecase.getLyric(result.lrcLink);\r\n          setPlayingSong({\r\n            songId,\r\n            songName: result.songName,\r\n            singerName: result.singerName,\r\n            image: result.songPic,\r\n            lyric,\r\n            playUrl: result.songLink,\r\n            duration: result.time,\r\n          });\r\n          setIsPlaying(true);\r\n        }\r\n      } else {\r\n        setIsPlaying(false);\r\n        setPlayingSong(undefined);\r\n      }\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    onPlayListAndSongIndexChanged(playList, songIndex, playingSong?.songId);\r\n  }, [playList, songIndex, playingSong]);\r\n\r\n  return {\r\n    isPlaying,\r\n    setIsPlaying,\r\n    isPlayerFullScreen,\r\n    setIsPlayerFullScreen,\r\n    playList,\r\n    setPlayList,\r\n    sequenceList,\r\n    setSequenceList,\r\n    playMode,\r\n    setPlayMode,\r\n    songIndex,\r\n    setSongIndex,\r\n    historyTerms,\r\n    setHistoryTerms,\r\n    selectPlay,\r\n    randomPlay,\r\n    playingSong,\r\n    addAndPlaySong,\r\n    deleteSong,\r\n    clearPlayList,\r\n    favoriteList,\r\n    saveFavorite,\r\n    deleteFavorite,\r\n  };\r\n});\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface HeaderProps {\r\n  onUserIconClick?: () => void;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = props => {\r\n  const { onUserIconClick } = props;\r\n\r\n  const onClick = () => {\r\n    onUserIconClick && onUserIconClick();\r\n  };\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n      <i className={styles.icon} />\r\n      <h1 className={styles.text}>大力音乐</h1>\r\n      <div className={styles.mine}>\r\n        <i\r\n          className={classNames({\r\n            'icon-mine': true,\r\n            [styles.iconMine]: true\r\n          })}\r\n          onClick={onClick}\r\n        />\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface Tab {\r\n  label: string;\r\n  path: string;\r\n}\r\n\r\ninterface TabsProps {\r\n  tabs: Tab[];\r\n}\r\n\r\nconst Tabs: React.FC<TabsProps> = props => {\r\n  const { tabs } = props;\r\n\r\n  return (\r\n    <div className={styles.tab}>\r\n      {tabs.map(tab => (\r\n        <NavLink key={tab.path} to={tab.path} className={styles.item}>\r\n          <span className={styles.link}>{tab.label}</span>\r\n        </NavLink>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n","import React, { useEffect, useRef, TouchEvent } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface ProgressBarProps {\r\n  className?: string;\r\n  percent?: number;\r\n  onPercentChange?: (percent: number) => void;\r\n}\r\n\r\nconst ProgressBar: React.FC<ProgressBarProps> = props => {\r\n  const { className = '', percent = 0, onPercentChange } = props;\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const progressRef = useRef<HTMLDivElement>(null);\r\n  const progressBtnRef = useRef<HTMLDivElement>(null);\r\n  const touch = useRef({\r\n    initiated: false, // 是否在拖动模式中\r\n    startX: -1, // 触发 touchstart 时候鼠标 X 轴位置\r\n    left: -1 // 触发 touchstart 时候进度条长度\r\n  });\r\n\r\n  const progressBtnWidth = 16;\r\n  const containerWidth = containerRef.current?.clientWidth || 0;\r\n  const progressMaxWidth = containerWidth - progressBtnWidth; // 因按钮占 16px，故 100% 的长度也只能是总的扣去 16\r\n  const progressCurrentWidth = progressRef.current?.clientWidth || 0; // 当前进度条长度\r\n\r\n  const progressTouchStart = (e: TouchEvent<HTMLDivElement>) => {\r\n    touch.current.initiated = true;\r\n    touch.current.startX = e.touches[0].pageX;\r\n    touch.current.left = progressCurrentWidth;\r\n  };\r\n\r\n  const progressTouchMove = (e: TouchEvent<HTMLDivElement>) => {\r\n    const currentX = e.touches[0].pageX;\r\n    const deltaX = currentX - touch.current.startX; // 如果用户向右拖则为正数，向左则为负数\r\n    const newOffsetWidth = Math.min(\r\n      Math.max(0, touch.current.left + deltaX),\r\n      containerWidth - progressBtnWidth\r\n    );\r\n    offset(newOffsetWidth);\r\n  };\r\n\r\n  const progressTouchEnd = () => {\r\n    touch.current.initiated = false;\r\n    const newPercent = progressCurrentWidth / progressMaxWidth;\r\n    onPercentChange && onPercentChange(newPercent);\r\n  };\r\n\r\n  const offset = (offsetWidth: number) => {\r\n    if (progressRef.current) {\r\n      progressRef.current.style.width = `${offsetWidth}px`;\r\n    }\r\n    if (progressBtnRef.current) {\r\n      progressBtnRef.current.style.transform = `translate3d(${offsetWidth}px, 0, 0)`;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 不在拖动模式时，才自动更新播放条进度\r\n    if (percent >= 0 && !touch.current.initiated) {\r\n      offset(progressMaxWidth * percent);\r\n    }\r\n  }, [percent, touch, progressMaxWidth]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [className]: true\r\n      })}\r\n      ref={containerRef}\r\n    >\r\n      <div className={styles.inner}>\r\n        <div className={styles.progress} ref={progressRef}></div>\r\n        <div\r\n          className={styles.progressBtnWrapper}\r\n          ref={progressBtnRef}\r\n          onTouchStart={progressTouchStart}\r\n          onTouchMove={progressTouchMove}\r\n          onTouchEnd={progressTouchEnd}\r\n        >\r\n          <span className={styles.progressBtn}></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport ProgressBar from './ProgressBar';\r\n\r\nimport { PlayingSong } from 'shared/domain/song/typings';\r\nimport { PlayMode } from 'shared/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface Song extends PlayingSong {\r\n  isFavorite: boolean;\r\n}\r\n\r\ninterface FullScreenPlayerProps {\r\n  className?: string;\r\n  visible?: boolean; // 是否可见\r\n  lyric?: string; // 当前展示的歌词\r\n  playMode?: PlayMode; // 播放模式\r\n  playingSong?: Song; // 播放中的歌曲\r\n  currentTime?: number; // 当前播放时间\r\n  isPlaying?: boolean; // 是否播放中\r\n  onBack?: () => void; // 回退按钮回调\r\n  onPlayingToggle?: () => void; // 切换播放\r\n  onPercentChange?: (percent: number) => void; // 播放时间进度改变的回调\r\n  onPlayModeChange?: (mode: PlayMode) => void; // 播放模式改变的回调\r\n  onPrevClick?: () => void; // 左箭头图标点击的回调\r\n  onNextClick?: () => void; // 右箭头图标点击的回调\r\n  onFavoriteSave?: (song: Song) => void;\r\n  onFavoriteDelete?: (song: Song) => void;\r\n}\r\n\r\nconst FullScreenPlayer: React.FC<FullScreenPlayerProps> = (props) => {\r\n  const {\r\n    className = '',\r\n    visible,\r\n    lyric,\r\n    playMode,\r\n    currentTime,\r\n    playingSong,\r\n    isPlaying,\r\n    onBack,\r\n    onPlayingToggle,\r\n    onPercentChange,\r\n    onPlayModeChange,\r\n    onPrevClick,\r\n    onNextClick,\r\n    onFavoriteSave,\r\n    onFavoriteDelete,\r\n  } = props;\r\n\r\n  const percent =\r\n    currentTime && playingSong ? currentTime / playingSong.duration : 0;\r\n\r\n  const pad = (val: string | number, n = 2) => {\r\n    let length = val.toString().length;\r\n    while (length < n) {\r\n      val = '0' + val;\r\n      length++;\r\n    }\r\n\r\n    return val;\r\n  };\r\n\r\n  const timeFormat = (time: number = 0) => {\r\n    time = Math.floor(time);\r\n    const minute = Math.floor(time / 60);\r\n    const second = pad(time % 60);\r\n\r\n    return `${minute}:${second}`;\r\n  };\r\n\r\n  const onModeChange = () => {\r\n    const modes = Object.values(PlayMode);\r\n    const index = modes.findIndex((mode) => mode === playMode);\r\n    const nextIndex = (index + 1) % modes.length;\r\n    onPlayModeChange && onPlayModeChange(modes[nextIndex]);\r\n  };\r\n\r\n  const toggleFavorite = () => {\r\n    if (!playingSong) {\r\n      return;\r\n    }\r\n    if (playingSong.isFavorite) {\r\n      onFavoriteDelete && onFavoriteDelete(playingSong);\r\n    } else {\r\n      onFavoriteSave && onFavoriteSave(playingSong);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [styles.visible]: visible,\r\n        [className]: true,\r\n      })}\r\n    >\r\n      <div className={styles.background}>\r\n        <img\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          src={playingSong?.image}\r\n          alt={playingSong?.songName}\r\n        />\r\n      </div>\r\n      <header\r\n        className={classNames({\r\n          [styles.top]: true,\r\n          [styles.visible]: visible,\r\n        })}\r\n      >\r\n        <div className={styles.back} onClick={onBack}>\r\n          <i\r\n            className={classNames({\r\n              'icon-back': true,\r\n              [styles.backIcon]: true,\r\n            })}\r\n          />\r\n        </div>\r\n        <h1 className={styles.title}>{playingSong?.songName}</h1>\r\n        <h2 className={styles.subtitle}>{playingSong?.singerName}</h2>\r\n      </header>\r\n      <main className={styles.middle}>\r\n        <section className={styles.middleLeft}>\r\n          <div className={styles.cdWrapper}>\r\n            <img\r\n              className={classNames({\r\n                [styles.cdImage]: true,\r\n                [styles.playing]: isPlaying,\r\n              })}\r\n              src={playingSong?.image}\r\n              alt={playingSong?.songName}\r\n            />\r\n          </div>\r\n          <div className={styles.lyricWrapper}>\r\n            <span className={styles.lyric}>{lyric}</span>\r\n          </div>\r\n        </section>\r\n      </main>\r\n      <footer\r\n        className={classNames({\r\n          [styles.bottom]: true,\r\n          [styles.visible]: visible,\r\n        })}\r\n      >\r\n        <div className={styles.progressWrapper}>\r\n          <span\r\n            className={classNames({\r\n              [styles.time]: true,\r\n              [styles.left]: true,\r\n            })}\r\n          >\r\n            {timeFormat(currentTime)}\r\n          </span>\r\n          <ProgressBar\r\n            className={styles.progressBar}\r\n            percent={percent}\r\n            onPercentChange={onPercentChange}\r\n          />\r\n          <span\r\n            className={classNames({\r\n              [styles.time]: true,\r\n              [styles.right]: true,\r\n            })}\r\n          >\r\n            {timeFormat(playingSong?.duration)}\r\n          </span>\r\n        </div>\r\n        <div className={styles.operations}>\r\n          <div\r\n            className={classNames({\r\n              'icon-left': true,\r\n              [styles.icon]: true,\r\n              [styles.leftIcon]: true,\r\n            })}\r\n          >\r\n            <i\r\n              className={classNames({\r\n                'icon-sequence': playMode === PlayMode.Sequence,\r\n                'icon-loop': playMode === PlayMode.Loop,\r\n                'icon-random': playMode === PlayMode.Random,\r\n              })}\r\n              onClick={onModeChange}\r\n            />\r\n          </div>\r\n          <div\r\n            className={classNames({\r\n              [styles.icon]: true,\r\n              [styles.leftIcon]: true,\r\n            })}\r\n          >\r\n            <i className=\"icon-prev\" onClick={onPrevClick} />\r\n          </div>\r\n          <div\r\n            className={classNames({\r\n              [styles.icon]: true,\r\n              [styles.centerIcon]: true,\r\n            })}\r\n          >\r\n            <i\r\n              className={classNames({\r\n                'icon-pause': isPlaying,\r\n                'icon-play': !isPlaying,\r\n              })}\r\n              onClick={onPlayingToggle}\r\n            />\r\n          </div>\r\n          <div\r\n            className={classNames({\r\n              [styles.icon]: true,\r\n              [styles.rightIcon]: true,\r\n            })}\r\n          >\r\n            <i className=\"icon-next\" onClick={onNextClick} />\r\n          </div>\r\n          <div\r\n            className={classNames({\r\n              [styles.icon]: true,\r\n              [styles.rightIcon]: true,\r\n            })}\r\n          >\r\n            <i\r\n              className={classNames({\r\n                [styles.favoriteIcon]: playingSong?.isFavorite,\r\n                'icon-favorite': playingSong?.isFavorite,\r\n                'icon-not-favorite': !playingSong?.isFavorite,\r\n              })}\r\n              onClick={toggleFavorite}\r\n            />\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FullScreenPlayer;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface ProgressCircleProps {\r\n  className?: string;\r\n  radius?: number;\r\n  percent?: number;\r\n}\r\n\r\nconst ProgressCircle: React.FC<ProgressCircleProps> = props => {\r\n  const { className = '', radius = 100, percent = 0, children } = props;\r\n\r\n  const dashArray = Math.PI * 100;\r\n  const dashOffset = (1 - percent) * dashArray;\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [className]: true\r\n      })}\r\n    >\r\n      <svg width={radius} height={radius} viewBox=\"0 0 100 100\" version=\"1.1\">\r\n        <circle\r\n          className={styles.background}\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          r=\"50\"\r\n          fill=\"transparent\"\r\n        />\r\n        <circle\r\n          className={styles.progress}\r\n          r=\"50\"\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          fill=\"transparent\"\r\n          strokeDasharray={dashArray}\r\n          strokeDashoffset={dashOffset}\r\n        />\r\n      </svg>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressCircle;\r\n","import React, { MouseEvent } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport ProgressCircle from './ProgressCircle';\r\n\r\nimport { PlayingSong } from 'shared/domain/song/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface MiniPlayerProps {\r\n  className?: string;\r\n  visible?: boolean; // 是否可见\r\n  percent?: number; // 播放进度\r\n  isPlaying?: boolean; // 是否播放中\r\n  playingSong?: PlayingSong; // 当前播放的歌曲\r\n  onPlayerClick?: () => void; // 点击整个播放器的回调\r\n  onPlayingToggle?: () => void; // 切换播放\r\n  onPlayListShow?: () => void; // 点击列表图标的回调\r\n}\r\n\r\nconst MiniPlayer: React.FC<MiniPlayerProps> = (props) => {\r\n  const {\r\n    className = '',\r\n    visible,\r\n    percent,\r\n    isPlaying,\r\n    playingSong,\r\n    onPlayerClick,\r\n    onPlayingToggle,\r\n    onPlayListShow,\r\n  } = props;\r\n\r\n  const clickPlayIcon = (e: MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation(); // 阻止触发 onPlayerClick\r\n    onPlayingToggle && onPlayingToggle();\r\n  };\r\n\r\n  const clickListIcon = (e: MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation(); // 阻止触发 onPlayerClick\r\n    onPlayListShow && onPlayListShow();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [styles.visible]: visible,\r\n        [className]: true,\r\n      })}\r\n      onClick={onPlayerClick}\r\n    >\r\n      <div className={styles.cd}>\r\n        <div className={styles.cdImageWrapper}>\r\n          <img\r\n            className={classNames({\r\n              [styles.cdImage]: true,\r\n              [styles.playing]: isPlaying,\r\n            })}\r\n            width=\"40\"\r\n            height=\"40\"\r\n            src={playingSong?.image}\r\n            alt={playingSong?.songName}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className={styles.text}>\r\n        <span className={styles.name}>{playingSong?.songName}</span>\r\n        <span className={styles.desc}>{playingSong?.singerName}</span>\r\n      </div>\r\n      <div className={styles.control}>\r\n        <ProgressCircle percent={percent} radius={32}>\r\n          <i\r\n            className={classNames({\r\n              [styles.playIcon]: true,\r\n              'icon-pause-mini': isPlaying,\r\n              'icon-play-mini': !isPlaying,\r\n            })}\r\n            onClick={clickPlayIcon}\r\n          />\r\n        </ProgressCircle>\r\n      </div>\r\n      <div className={styles.control}>\r\n        <i\r\n          className={classNames({\r\n            [styles.listIcon]: true,\r\n            'icon-playlist': true,\r\n          })}\r\n          onClick={clickListIcon}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MiniPlayer;\r\n","import React, { MouseEvent } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { PlayMode } from 'shared/typings';\r\nimport { PlayerSong } from 'shared/domain/song/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface Song extends PlayerSong {\r\n  isFavorite: boolean;\r\n}\r\n\r\ninterface PlayListModalProps {\r\n  className?: string;\r\n  visible?: boolean; // 是否可见\r\n  playMode?: PlayMode; // 播放模式\r\n  playList?: Song[]; // 播放列表\r\n  playingSongId?: string; // 当前播放歌曲 id\r\n  onClose?: () => void; // 关闭回调\r\n  onSelect?: (song: Song) => void; // 选择歌曲回调\r\n  onFavoriteSave?: (song: Song) => void;\r\n  onFavoriteDelete?: (song: Song) => void;\r\n  onRemove?: (song: Song) => void; // 移除歌曲回调\r\n  onClear?: () => void; // 清空播放列表回调\r\n}\r\n\r\nconst playModeDescMap = {\r\n  [PlayMode.Sequence]: '顺序播放',\r\n  [PlayMode.Random]: '随机播放',\r\n  [PlayMode.Loop]: '单曲循环'\r\n};\r\n\r\nconst PlayListModal: React.FC<PlayListModalProps> = props => {\r\n  const {\r\n    className = '',\r\n    visible,\r\n    playMode,\r\n    playList = [],\r\n    playingSongId,\r\n    onClose,\r\n    onSelect,\r\n    onFavoriteSave,\r\n    onFavoriteDelete,\r\n    onRemove,\r\n    onClear\r\n  } = props;\r\n\r\n  const stopPropagation = (e: MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const selectSong = (song: Song) => () => {\r\n    onSelect && onSelect(song);\r\n  };\r\n\r\n  const toggleFavorite = (song: Song) => (e: MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    if (song.isFavorite) {\r\n      onFavoriteDelete && onFavoriteDelete(song);\r\n    } else {\r\n      onFavoriteSave && onFavoriteSave(song);\r\n    }\r\n  };\r\n\r\n  const removeSong = (song: Song) => (e: MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    onRemove && onRemove(song);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [className]: true,\r\n        [styles.visible]: visible\r\n      })}\r\n      onClick={onClose}\r\n    >\r\n      <div className={styles.body} onClick={stopPropagation}>\r\n        <div className={styles.header}>\r\n          <i\r\n            className={classNames({\r\n              [styles.modeIcon]: true,\r\n              'icon-sequence': playMode === PlayMode.Sequence,\r\n              'icon-loop': playMode === PlayMode.Loop,\r\n              'icon-random': playMode === PlayMode.Random\r\n            })}\r\n          />\r\n          <span className={styles.modeText}>\r\n            {playMode ? playModeDescMap[playMode] : ''}\r\n          </span>\r\n          <span className={styles.clear} onClick={onClear}>\r\n            <i\r\n              className={classNames({\r\n                'icon-clear': true,\r\n                [styles.clearIcon]: true\r\n              })}\r\n            />\r\n          </span>\r\n        </div>\r\n        <ul className={styles.list}>\r\n          {playList.map(song => (\r\n            <li\r\n              key={song.songId}\r\n              className={styles.item}\r\n              onClick={selectSong(song)}\r\n            >\r\n              <i\r\n                className={classNames({\r\n                  [styles.current]: true,\r\n                  'icon-play': song.songId === playingSongId\r\n                })}\r\n              />\r\n              <span className={styles.songName}>{song.songName}</span>\r\n              <span className={styles.like} onClick={toggleFavorite(song)}>\r\n                <i\r\n                  className={classNames({\r\n                    'icon-favorite': song.isFavorite,\r\n                    'icon-not-favorite': !song.isFavorite\r\n                  })}\r\n                />\r\n              </span>\r\n              <span className={styles.delete} onClick={removeSong(song)}>\r\n                <i className=\"icon-delete\" />\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <span className={styles.close} onClick={onClose}>\r\n          关闭\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayListModal;\r\n","import React, { MouseEvent } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface ConfirmProps {\r\n  className?: string;\r\n  visible?: boolean;\r\n  maskClosable?: boolean;\r\n  content?: React.ReactNode;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  onConfirm?: () => void;\r\n  onCancel?: () => void;\r\n}\r\n\r\nconst Confirm: React.FC<ConfirmProps> = props => {\r\n  const {\r\n    className = '',\r\n    visible,\r\n    maskClosable,\r\n    content,\r\n    confirmText = '确定',\r\n    cancelText = '取消',\r\n    onConfirm,\r\n    onCancel\r\n  } = props;\r\n\r\n  const onMaskClick = () => {\r\n    maskClosable && onConfirm && onConfirm();\r\n  };\r\n\r\n  const onFooterClick = (e: MouseEvent<HTMLDivElement>) => {\r\n    // 防止点击事件向 mask 层冒泡\r\n    e.stopPropagation();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.mask]: true,\r\n        [className]: true,\r\n        [styles.visible]: visible\r\n      })}\r\n      onClick={onMaskClick}\r\n    >\r\n      <div className={styles.body}>\r\n        <div className={styles.content}>{content}</div>\r\n        <div className={styles.footer} onClick={onFooterClick}>\r\n          <span\r\n            className={classNames({\r\n              [styles.footerBtn]: true,\r\n              [styles.closeBtn]: true\r\n            })}\r\n            onClick={onCancel}\r\n          >\r\n            {cancelText}\r\n          </span>\r\n          <span className={styles.footerBtn} onClick={onConfirm}>\r\n            {confirmText}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Confirm;\r\n","/**\r\n * [ti:晴天]\r\n * [ar:周杰伦]\r\n * [al:叶惠美]\r\n * [by:]\r\n * [offset:0]\r\n * [00:00.00]晴天 - 周杰伦 (Jay Chou)\r\n * [00:07.34]词：周杰伦\r\n * [00:14.69]曲：周杰伦\r\n * [00:22.04]编曲：周杰伦\r\n * [00:29.39]故事的小黄花\r\n * [00:32.64]从出生那年就飘着\r\n * [00:36.19]童年的荡秋千\r\n * [00:39.93]随记忆一直晃到现在\r\n * [00:42.99]Re So So Si Do Si La\r\n * [00:46.11]So La Si Si Si Si La Si La So\r\n * [00:49.79]吹着前奏望着天空\r\n * [00:53.35]我想起花瓣试着掉落\r\n * [00:56.78]为你翘课的那一天\r\n * [00:59.03]花落的那一天\r\n * [01:00.65]教室的那一间\r\n * [01:02.21]我怎么看不见\r\n * [01:04.02]消失的下雨天\r\n * [01:05.71]我好想再淋一遍\r\n * [01:09.08]\r\n * [01:09.95]没想到失去的勇气我还留着\r\n * [01:15.01]\r\n * [01:16.13]好想再问一遍\r\n * [01:17.87]你会等待还是离开\r\n * [01:23.18]\r\n * [01:24.74]刮风这天我试过握着你手\r\n * [01:30.42]但偏偏雨渐渐大到我看你不见\r\n * [01:37.66]\r\n * [01:38.84]还要多久我才能在你身边\r\n * [01:44.65]\r\n * [01:45.40]等到放晴的那天也许我会比较好一点\r\n * [01:52.76]从前从前有个人爱你很久\r\n * [01:58.50]但偏偏风渐渐把距离吹得好远\r\n * [02:05.86]\r\n * [02:06.74]好不容易又能再多爱一天\r\n * [02:13.35]但故事的最后你好像还是说了拜拜\r\n * [02:21.46]\r\n * [02:35.00]为你翘课的那一天\r\n * [02:36.75]花落的那一天\r\n * [02:38.63]教室的那一间\r\n * [02:40.31]我怎么看不见\r\n * [02:42.05]消失的下雨天\r\n * [02:43.74]我好想再淋一遍\r\n * [02:46.99]\r\n * [02:47.98]没想到失去的勇气我还留着\r\n * [02:53.60]\r\n * [02:54.53]好想再问一遍\r\n * [02:55.97]你会等待还是离开\r\n * [03:01.77]\r\n * [03:02.77]刮风这天我试过握着你手\r\n * [03:08.45]但偏偏雨渐渐大到我看你不见\r\n * [03:15.94]\r\n * [03:16.87]还要多久我才能在你身边\r\n * [03:23.49]等到放晴的那天也许我会比较好一点\r\n * [03:30.91]从前从前有个人爱你很久\r\n * [03:37.03]偏偏风渐渐把距离吹得好远\r\n * [03:43.89]\r\n * [03:44.77]好不容易又能再多爱一天\r\n * [03:50.38]\r\n * [03:51.07]但故事的最后你好像还是说了拜拜\r\n * [03:59.62]刮风这天我试过握着你手\r\n * [04:02.05]但偏偏雨渐渐大到我看你不见\r\n * [04:05.44]还要多久我才能够在你身边\r\n * [04:08.99]等到放晴那天也许我会比较好一点\r\n * [04:12.86]从前从前有个人爱你很久\r\n * [04:15.86]但偏偏雨渐渐把距离吹得好远\r\n * [04:19.29]好不容易又能再多爱一天\r\n * [04:22.79]但故事的最后你好像还是说了拜\r\n */\r\n\r\n// 源码：https://github.com/ustbhuangyi/lyric-parser\r\n\r\ntype PlayState = 'PLAYING' | 'PAUSE';\r\ntype LyricHandler = (data: { lineNum: number; lyricText: string }) => void;\r\n\r\n/**\r\n * 对于每行歌词，匹配结果是四个：整行歌词，分，秒，毫秒\r\n * 要点：() 是分组符，把项目拆分成若干个单元\r\n */\r\nconst timeExp = /\\[(\\d{2,}):(\\d{2})(?:\\.(\\d{2,3}))?]/g;\r\n\r\nconst tagRegMap: { [key: string]: string } = {\r\n  // 根据例子可知，[] 中除了时间还有特殊标签\r\n  title: 'ti',\r\n  artist: 'ar',\r\n  album: 'al',\r\n  offset: 'offset',\r\n  by: 'by'\r\n};\r\n\r\nconst noop = () => undefined; // dummy 函数\r\n\r\nclass LyricParser {\r\n  private lyric: string; // 所有歌词\r\n  private tags: { [key: string]: string }; // 映射标签与标签内容，{ ti: '晴天' }\r\n  private lines: { time: number; lyricText: string }[]; // 我们需要的结构\r\n  private handler: LyricHandler; // 用户定义的事件回调函数\r\n  private state: PlayState; // 播放状态\r\n  private curNum!: number; // 当前的播放歌词的索引\r\n  private startStamp!: number; // 播放第一句歌词时的绝对时间\r\n  private pauseStamp!: number; // 暂停播放时的绝对时间\r\n  private timer!: NodeJS.Timeout;\r\n\r\n  constructor(lyric: string, handler: LyricHandler = noop) {\r\n    this.lyric = lyric;\r\n    this.tags = {};\r\n    this.lines = [];\r\n    this.handler = handler;\r\n    this.state = 'PAUSE';\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * 播放歌词\r\n   *\r\n   * @param {number} startTime 开始播放时间（相对第一句歌词）\r\n   * @param {boolean} skipLast 是否跳过播放上一句歌词\r\n   * @returns {void}\r\n   */\r\n  public play(startTime: number = 0, skipLast?: boolean): void {\r\n    if (!this.lines.length) {\r\n      return;\r\n    }\r\n    this.state = 'PLAYING';\r\n    this.curNum = this.findCurNum(startTime);\r\n    // 由于 startTime 是相对时间，那么 startStamp 指的是播放第一句歌词的绝对时间戳\r\n    this.startStamp = +new Date() - startTime;\r\n    if (!skipLast) {\r\n      this.callHandler(this.curNum - 1);\r\n    }\r\n    if (this.curNum < this.lines.length) {\r\n      clearTimeout(this.timer);\r\n      this.playRest();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 切换播放状态\r\n   */\r\n  public togglePlay(): void {\r\n    const now = +new Date();\r\n    if (this.state === 'PLAYING') {\r\n      this.stop();\r\n      this.pauseStamp = now;\r\n    } else {\r\n      this.state = 'PLAYING';\r\n      this.play((this.pauseStamp || now) - (this.startStamp || now), true);\r\n      this.pauseStamp = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 暂停播放\r\n   */\r\n  public stop(): void {\r\n    this.state = 'PAUSE';\r\n    clearTimeout(this.timer);\r\n  }\r\n\r\n  /**\r\n   * 跳至第 offset 行歌词\r\n   *\r\n   * @param {number} offset\r\n   * @returns {void}\r\n   */\r\n  public seek(offset: number = 0): void {\r\n    this.play(offset);\r\n  }\r\n\r\n  private init(): void {\r\n    this.initTag();\r\n    this.initLines();\r\n  }\r\n\r\n  private initTag(): void {\r\n    for (const tag in tagRegMap) {\r\n      if (tagRegMap.hasOwnProperty(tag)) {\r\n        // 寻找整个歌词字符串中每个标签对应的内容\r\n        const matches = this.lyric.match(\r\n          new RegExp(`\\\\[${tagRegMap[tag]}:([^\\\\]]*)]`, 'i')\r\n        );\r\n        this.tags[tag] = (matches && matches[1]) || '';\r\n      }\r\n    }\r\n  }\r\n\r\n  private initLines(): void {\r\n    const lines = this.lyric.split('\\n');\r\n    for (const line of lines) {\r\n      const result = timeExp.exec(line);\r\n      if (result) {\r\n        const lyricText = line.replace(timeExp, '').trim();\r\n        if (lyricText) {\r\n          this.lines.push({\r\n            time:\r\n              +result[1] * 60 * 1000 +\r\n              +result[2] * 1000 +\r\n              (+result[3] || 0) * 10,\r\n            lyricText\r\n          });\r\n        }\r\n      }\r\n    }\r\n    this.lines.sort((a, b) => {\r\n      // 按时间升序排序\r\n      return a.time - b.time;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 根据时间点返回相应的歌词索引\r\n   *\r\n   * @param {number} time 相对第一句歌词的时间\r\n   * @returns {number}\r\n   */\r\n  private findCurNum(time: number): number {\r\n    for (let i = 0; i < this.lines.length; i++) {\r\n      if (time <= this.lines[i].time) {\r\n        return i;\r\n      }\r\n    }\r\n    return this.lines.length - 1;\r\n  }\r\n\r\n  /**\r\n   * 调用用户传入的事件函数\r\n   *\r\n   * @param {number} i 当前歌词索引\r\n   * @returns {void}\r\n   */\r\n  private callHandler(i: number): void {\r\n    if (i < 0) {\r\n      return;\r\n    }\r\n    this.handler({ lineNum: i, lyricText: this.lines[i].lyricText });\r\n  }\r\n\r\n  private playRest(): void {\r\n    const line = this.lines[this.curNum];\r\n    const delay = line.time - (+new Date() - this.startStamp);\r\n    this.timer = setTimeout(() => {\r\n      this.callHandler(this.curNum++);\r\n      if (this.curNum < this.lines.length && this.state === 'PLAYING') {\r\n        this.playRest();\r\n      }\r\n    }, delay);\r\n  }\r\n}\r\n\r\nexport default LyricParser;\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\n\r\nimport Container from 'shared/container';\r\n\r\nimport FullScreenPlayer from './FullScreenPlayer';\r\nimport MiniPlayer from './MiniPlayer';\r\nimport PlayListModal from './PlayListModal';\r\nimport Confirm from 'shared/components/Confirm';\r\n\r\nimport LyricParser from 'shared/lyric-parser';\r\nimport { PlayMode } from 'shared/typings';\r\nimport message from 'shared/lib/message';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nconst Player: React.FC = () => {\r\n  const {\r\n    isPlaying,\r\n    playMode,\r\n    setPlayMode,\r\n    playList,\r\n    songIndex,\r\n    setSongIndex,\r\n    setIsPlaying,\r\n    playingSong,\r\n    isPlayerFullScreen,\r\n    setIsPlayerFullScreen,\r\n    clearPlayList,\r\n    favoriteList,\r\n    saveFavorite,\r\n    deleteFavorite,\r\n    addAndPlaySong,\r\n    deleteSong,\r\n  } = Container.useContainer();\r\n  const [isConfirmVisible, setIsConfirmVisible] = useState(false);\r\n  const [isPlayListVisible, setIsPlayListVisible] = useState(false);\r\n  const [isAudioReady, setIsAudioReady] = useState(false);\r\n  const [lyricParser, setLyricParser] = useState<LyricParser>();\r\n  const [playingLyric, setPlayingLyric] = useState<string>();\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  const [currentPlayingTime, setCurrentPlayingTime] = useState(0);\r\n\r\n  const currentPercent = playingSong\r\n    ? currentPlayingTime / playingSong.duration\r\n    : 0;\r\n\r\n  const faviroteSongIdSet = useMemo(\r\n    () => new Set(favoriteList.map((item) => item.songId)),\r\n    [favoriteList]\r\n  );\r\n\r\n  const onFullScreenPlayerBack = () => {\r\n    setIsPlayerFullScreen(false);\r\n  };\r\n\r\n  const onMiniPlayerClick = () => {\r\n    setIsPlayerFullScreen(true);\r\n  };\r\n\r\n  const togglePlaying = () => {\r\n    setIsPlaying((prev) => !prev);\r\n  };\r\n\r\n  const updatePlayingTime = (e: any) => {\r\n    // 这里没办法，只能用 any\r\n    setCurrentPlayingTime(e.target.currentTime);\r\n  };\r\n\r\n  const onPercentChange = (percent: number) => {\r\n    const time = (playingSong?.duration || 0) * percent;\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = time;\r\n    }\r\n    if (!isPlaying) {\r\n      togglePlaying();\r\n    }\r\n    if (lyricParser) {\r\n      lyricParser.seek(time * 1000);\r\n    }\r\n  };\r\n\r\n  const onAudioReady = () => {\r\n    setIsAudioReady(true);\r\n  };\r\n\r\n  const handleAudioError = () => {\r\n    message.error('播放出错');\r\n  };\r\n\r\n  const loop = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = 0;\r\n      audioRef.current.play();\r\n    }\r\n    if (lyricParser) {\r\n      lyricParser.seek();\r\n    }\r\n  };\r\n\r\n  const next = () => {\r\n    const listLength = playList.length;\r\n    if (listLength === 1) {\r\n      loop();\r\n    } else {\r\n      const nextIndex = (songIndex + 1) % listLength;\r\n      setSongIndex(nextIndex);\r\n    }\r\n    if (!isPlaying) {\r\n      togglePlaying();\r\n    }\r\n  };\r\n\r\n  const playingCompleted = () => {\r\n    if (playMode === PlayMode.Loop) {\r\n      loop();\r\n    } else {\r\n      next();\r\n    }\r\n  };\r\n\r\n  const handleLyric = (data: { lineNum: number; lyricText: string }) => {\r\n    setPlayingLyric(data.lyricText);\r\n  };\r\n\r\n  const playPrevSong = () => {\r\n    if (!isAudioReady) {\r\n      return;\r\n    }\r\n    if (playList.length === 1) {\r\n      loop();\r\n    } else {\r\n      setSongIndex((prev) => {\r\n        let nextIndex = (prev - 1) % playList.length;\r\n        if (nextIndex === -1) {\r\n          nextIndex = playList.length - 1;\r\n        }\r\n        return nextIndex;\r\n      });\r\n    }\r\n    if (!isPlaying) {\r\n      togglePlaying();\r\n    }\r\n  };\r\n\r\n  const playNextSong = () => {\r\n    if (!isAudioReady) {\r\n      return;\r\n    }\r\n    if (playList.length === 1) {\r\n      loop();\r\n    } else {\r\n      setSongIndex((prev) => (prev + 1) % playList.length);\r\n    }\r\n    if (!isPlaying) {\r\n      togglePlaying();\r\n    }\r\n  };\r\n\r\n  const confirmClear = () => {\r\n    clearPlayList();\r\n    setIsConfirmVisible(false);\r\n    setIsPlayListVisible(false);\r\n  };\r\n\r\n  const playListWithFavorite = useMemo(\r\n    () =>\r\n      playList.map((song) => ({\r\n        ...song,\r\n        isFavorite: faviroteSongIdSet.has(song.songId),\r\n      })),\r\n    [playList, faviroteSongIdSet]\r\n  );\r\n\r\n  const fullScreenPlayingSong = useMemo(\r\n    () =>\r\n      playingSong && {\r\n        ...playingSong,\r\n        isFavorite: faviroteSongIdSet.has(playingSong.songId),\r\n      },\r\n    [playingSong, faviroteSongIdSet]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setCurrentPlayingTime(0);\r\n    setIsAudioReady(false);\r\n    if (playingSong) {\r\n      setLyricParser((prev) => {\r\n        prev && prev.stop();\r\n        return new LyricParser(playingSong.lyric, handleLyric);\r\n      });\r\n    }\r\n  }, [playingSong]);\r\n\r\n  useEffect(() => {\r\n    if (lyricParser) {\r\n      lyricParser.togglePlay();\r\n    }\r\n  }, [lyricParser, isPlaying]);\r\n\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      if (isPlaying && isAudioReady) {\r\n        audioRef.current.play();\r\n      } else if (isAudioReady) {\r\n        audioRef.current.pause();\r\n      }\r\n    }\r\n  }, [isPlaying, isAudioReady]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <FullScreenPlayer\r\n        visible={isPlayerFullScreen}\r\n        lyric={playingLyric}\r\n        playMode={playMode}\r\n        currentTime={currentPlayingTime}\r\n        isPlaying={isPlaying}\r\n        playingSong={fullScreenPlayingSong}\r\n        onBack={onFullScreenPlayerBack}\r\n        onPlayingToggle={togglePlaying}\r\n        onPercentChange={onPercentChange}\r\n        onPlayModeChange={setPlayMode}\r\n        onPrevClick={playPrevSong}\r\n        onNextClick={playNextSong}\r\n        onFavoriteSave={saveFavorite}\r\n        onFavoriteDelete={deleteFavorite}\r\n      />\r\n      <MiniPlayer\r\n        visible={!isPlayerFullScreen && !!playingSong}\r\n        isPlaying={isPlaying}\r\n        percent={currentPercent}\r\n        playingSong={playingSong}\r\n        onPlayingToggle={togglePlaying}\r\n        onPlayerClick={onMiniPlayerClick}\r\n        onPlayListShow={() => setIsPlayListVisible(true)}\r\n      />\r\n      <PlayListModal\r\n        visible={isPlayListVisible}\r\n        playMode={playMode}\r\n        playList={playListWithFavorite}\r\n        playingSongId={playingSong?.songId}\r\n        onClose={() => setIsPlayListVisible(false)}\r\n        onSelect={addAndPlaySong}\r\n        onRemove={deleteSong}\r\n        onClear={() => setIsConfirmVisible(true)}\r\n        onFavoriteSave={saveFavorite}\r\n        onFavoriteDelete={deleteFavorite}\r\n      />\r\n      <Confirm\r\n        visible={isConfirmVisible}\r\n        content=\"是否清空播放列表\"\r\n        confirmText=\"清空\"\r\n        onCancel={() => setIsConfirmVisible(false)}\r\n        onConfirm={confirmClear}\r\n      />\r\n      <audio\r\n        ref={audioRef}\r\n        src={playingSong?.playUrl}\r\n        onCanPlay={onAudioReady}\r\n        onTimeUpdate={updatePlayingTime}\r\n        onEnded={playingCompleted}\r\n        onError={handleAudioError}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\nimport Container from 'shared/container';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\nimport { FulfilledRecommendSong } from 'shared/domain/song/typings';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nconst Recommend: React.FC<RouteComponentProps> = props => {\r\n  const { addAndPlaySong } = Container.useContainer();\r\n  const [recommendList, setRecommendList] = useState<FulfilledRecommendSong[]>(\r\n    []\r\n  );\r\n\r\n  const getRecommendList = async () => {\r\n    try {\r\n      const result = await SongUsecase.getRecommendList();\r\n      setRecommendList(result);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const selectSong = (song: FulfilledRecommendSong) => () => {\r\n    addAndPlaySong({\r\n      songId: song.songId,\r\n      songName: song.songName,\r\n      singerName: song.singerName,\r\n      image: song.hugeSongPic\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getRecommendList();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.content}>\r\n        <h1 className={styles.listTitle}>热门歌单推荐</h1>\r\n        <ul>\r\n          {recommendList.map(item => (\r\n            <li\r\n              key={item.songId}\r\n              className={styles.item}\r\n              onClick={selectSong(item)}\r\n            >\r\n              <div className={styles.icon}>\r\n                <img\r\n                  src={item.smallSongPic}\r\n                  width=\"60\"\r\n                  height=\"60\"\r\n                  alt={item.songName}\r\n                />\r\n              </div>\r\n              <div className={styles.text}>\r\n                <h2 className={styles.name}>{item.singerName}</h2>\r\n                <span className={styles.desc}>{item.songName}</span>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Recommend;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\nimport { FulfilledSinger } from 'shared/domain/song/typings';\r\nimport { LOCAL_PATHS } from 'shared/constants';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nconst SingerList: React.FC<RouteComponentProps> = props => {\r\n  const [singerList, setSingerList] = useState<FulfilledSinger[]>([]);\r\n\r\n  const searchSingerList = async () => {\r\n    try {\r\n      const result = await SongUsecase.searchSingerList('c');\r\n      setSingerList(result);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const onSingerClick = (singer: FulfilledSinger) => () => {\r\n    props.history.push(\r\n      LOCAL_PATHS.singer.detail.getPathByParams(singer.singerId)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    searchSingerList();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <ul className={styles.list}>\r\n        {singerList.map(singer => (\r\n          <li\r\n            key={singer.singerId}\r\n            className={styles.item}\r\n            onClick={onSingerClick(singer)}\r\n          >\r\n            <img\r\n              src={singer.singerPic}\r\n              alt={singer.singerName}\r\n              className={styles.avatar}\r\n            />\r\n            <span className={styles.name}>{singer.singerName}</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingerList;\r\n","import { useState, useCallback } from 'react';\r\n\r\nconst useAsyncTask = <T extends any[], U>(\r\n  task: (...args: T) => Promise<U>\r\n): [(...args: T) => Promise<U>, boolean, boolean] => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isPending, setIsPending] = useState(false);\r\n\r\n  const finalTask = useCallback(\r\n    async (...args: T) => {\r\n      setIsPending(true);\r\n      const result = await task(...args);\r\n      setIsLoaded(true);\r\n      setIsPending(false);\r\n      return result;\r\n    },\r\n    [task]\r\n  );\r\n\r\n  return [finalTask, isLoaded, isPending];\r\n};\r\n\r\nexport default useAsyncTask;\r\n","import {\r\n  RollApiPaginationQuery,\r\n  RollApiPaginationResult\r\n} from 'shared/typings';\r\nimport { StrategyParams, FetcherStategy } from '../typings';\r\n\r\nclass RollStrategy implements FetcherStategy {\r\n  public async fetch<T, U>(params: StrategyParams<T>) {\r\n    const { fetcher, pageNo, queryData } = params;\r\n    const rollFetcher = fetcher as (\r\n      query: RollApiPaginationQuery<T>\r\n    ) => Promise<RollApiPaginationResult<U[]>>;\r\n    const result = await rollFetcher({\r\n      ...queryData,\r\n      page: pageNo\r\n    } as RollApiPaginationQuery<T>);\r\n\r\n    return result.list;\r\n  }\r\n}\r\n\r\nfunction createStrategy() {\r\n  return new RollStrategy();\r\n}\r\n\r\nexport default createStrategy();\r\n","import rollStrategy from './roll';\r\n\r\nconst getFetcherStrategy = (type: 'ROLL') => {\r\n  return rollStrategy;\r\n};\r\n\r\nexport default getFetcherStrategy;\r\n","import { useState, useEffect, useRef } from 'react';\r\n\r\nimport useAsyncTask from '../useAsyncTask';\r\nimport getFetcherStrategy from './fetcher-strategies';\r\n\r\nimport { Option } from './typings';\r\n\r\n/**\r\n * 依赖图：\r\n *\r\n *         disabled (可能由 query 影响)\r\n *       /                             \\\r\n * query ------------------------------- task\r\n *       \\                             /\r\n *                    page\r\n *\r\n * 解释：\r\n *\r\n * 1. query 变化，需要重置 page\r\n * 2. disabled 可能由 query 决定，也可能由其他因素决定\r\n * 3. 只有 page 与 disabled 稳定后，才能执行 task\r\n * 4. 为何一开始设置 page 为 undefined？因为监听 query 时会设置\r\n *    一开始就设置了，那加上 useEffect query 就设两次了，task 就会被执行两次\r\n *    执行 task 之前先判断 page 是否 undefined，就可以避免多余的一次执行\r\n * 5. 为何 disabled 要设为状态，而不用 option 的？\r\n *    有的场景是 query 影响 disabled 与 page 的，所以如果直接用 disabled\r\n *    那么 useEffect 监听 disabled 时，page 还没重设，就会出现问题\r\n *    为何不用 ref，因为无法保证：\r\n *    query -> setPage 的 useEffect 会比 disabled -> task 的 useEffect 先执行\r\n */\r\nconst usePagination = <T, U>(option: Option<T, U>) => {\r\n  const {\r\n    type,\r\n    fetcher,\r\n    pageSize = 10,\r\n    query,\r\n    initialPageNo = 1,\r\n    defaultValue = [],\r\n    onError,\r\n    disabled = false\r\n  } = option || {};\r\n  const [isDisabled, setIsDisabled] = useState(disabled);\r\n  const [page, setPage] = useState<{ pageNo: number; pageSize: number }>();\r\n  const [data, setData] = useState(defaultValue);\r\n  const dataRef = useRef(defaultValue);\r\n  dataRef.current = data;\r\n\r\n  const hasMore = page ? data.length >= pageSize * page.pageNo : true;\r\n\r\n  const task = async (option: {\r\n    pageNo: number;\r\n    pageSize: number;\r\n    queryData?: T;\r\n    isRefetch?: boolean;\r\n  }) => {\r\n    const { pageNo, pageSize, queryData, isRefetch } = option;\r\n    try {\r\n      // 根据 type 获取对应 fetcher 策略\r\n      const strategy = getFetcherStrategy(type);\r\n      const result = await strategy.fetch<T, U>({\r\n        fetcher,\r\n        pageNo,\r\n        pageSize,\r\n        queryData\r\n      });\r\n      const fulfilledResult = result || [];\r\n      // 具体 setData 策略\r\n      const curData = dataRef.current;\r\n      if (!isRefetch) {\r\n        const shouldReset = pageNo === initialPageNo;\r\n        setData(\r\n          shouldReset ? fulfilledResult : curData.concat(fulfilledResult)\r\n        );\r\n      } else {\r\n        const previousPageData = curData.slice(0, (pageNo - 1) * pageSize);\r\n        const nextPageData = curData.slice(pageNo * pageSize);\r\n        setData([...previousPageData, ...fulfilledResult, ...nextPageData]);\r\n      }\r\n    } catch (e) {\r\n      if (onError) {\r\n        onError(e);\r\n      } else {\r\n        throw e;\r\n      }\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    if (!isDisabled && hasMore) {\r\n      setPage(prev => ({\r\n        pageSize,\r\n        pageNo: prev ? prev.pageNo + 1 : initialPageNo\r\n      }));\r\n    }\r\n  };\r\n\r\n  const [finalTask, isLoaded, isPending] = useAsyncTask(task);\r\n\r\n  const refetchTask = async (pageNo: number) => {\r\n    if (isDisabled || !page || initialPageNo > pageNo || pageNo > page.pageNo) {\r\n      return;\r\n    }\r\n    finalTask({\r\n      pageNo,\r\n      pageSize: page.pageSize,\r\n      queryData: query,\r\n      isRefetch: true\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsDisabled(disabled);\r\n  }, [disabled]);\r\n\r\n  useEffect(() => {\r\n    setPage({ pageSize, pageNo: initialPageNo });\r\n  }, [query, initialPageNo, pageSize]);\r\n\r\n  useEffect(() => {\r\n    if (!isDisabled && page) {\r\n      finalTask({\r\n        pageNo: page.pageNo,\r\n        pageSize: page.pageSize,\r\n        queryData: query\r\n      });\r\n    }\r\n  }, [page, isDisabled]);\r\n\r\n  return {\r\n    data,\r\n    refetch: refetchTask,\r\n    hasMore,\r\n    loadMore,\r\n    isLoaded,\r\n    isPending\r\n  };\r\n};\r\n\r\nexport default usePagination;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { FulfilledSingerSong } from 'shared/domain/song/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface SongListProps {\r\n  className?: string;\r\n  songList?: FulfilledSingerSong[];\r\n  onSongSelect?: (song: FulfilledSingerSong, index: number) => void;\r\n}\r\n\r\nconst SongList: React.FC<SongListProps> = props => {\r\n  const { className = '', songList, onSongSelect } = props;\r\n\r\n  const onSelect = (song: FulfilledSingerSong, index: number) => () => {\r\n    onSongSelect && onSongSelect(song, index);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [className]: true\r\n      })}\r\n    >\r\n      <ul>\r\n        {songList?.map((song, index) => (\r\n          <li\r\n            key={song.songId}\r\n            className={styles.item}\r\n            onClick={onSelect(song, index)}\r\n          >\r\n            <div className={styles.rank}>\r\n              <span className={styles.text}>{index + 1}</span>\r\n            </div>\r\n            <div className={styles.content}>\r\n              <h2 className={styles.name}>{song.songName}</h2>\r\n              <span className={styles.desc}>{song.singerName}</span>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SongList;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport SongList from 'shared/components/SongList';\r\nimport { FulfilledSingerSong } from 'shared/domain/song/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface MusicListProps {\r\n  className?: string;\r\n  title?: string;\r\n  cover?: string;\r\n  songList?: FulfilledSingerSong[];\r\n  onBack?: () => void;\r\n  onRandomPlay?: () => void;\r\n  onSongSelect?: (song: FulfilledSingerSong, index: number) => void;\r\n}\r\n\r\nconst MusicList: React.FC<MusicListProps> = props => {\r\n  const {\r\n    className = '',\r\n    title,\r\n    cover,\r\n    songList,\r\n    onRandomPlay,\r\n    onSongSelect,\r\n    onBack\r\n  } = props;\r\n\r\n  return (\r\n    <div\r\n      className={classNames({\r\n        [styles.container]: true,\r\n        [className]: true\r\n      })}\r\n    >\r\n      <header className={styles.header}>\r\n        <i\r\n          className={classNames({\r\n            'icon-back': true,\r\n            [styles.backIcon]: true\r\n          })}\r\n          onClick={onBack}\r\n        />\r\n        <h1 className={styles.title}>{title}</h1>\r\n      </header>\r\n      <div\r\n        className={styles.cover}\r\n        style={{\r\n          backgroundImage: `url(${cover})`\r\n        }}\r\n      >\r\n        <div className={styles.mask}></div>\r\n        <div className={styles.playerWrapper}>\r\n          <div className={styles.play}>\r\n            <i\r\n              className={classNames({\r\n                'icon-play': true,\r\n                [styles.playIcon]: true\r\n              })}\r\n            />\r\n            <span className={styles.text} onClick={onRandomPlay}>\r\n              随机播放全部\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <SongList\r\n          className={styles.songListContainer}\r\n          songList={songList}\r\n          onSongSelect={onSongSelect}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MusicList;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport InfiniteScroller from 'react-infinite-scroller';\r\n\r\nimport Container from 'shared/container';\r\nimport usePagination from 'shared/hooks/usePagination';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\nimport {\r\n  FulfilledSingerDetail,\r\n  FulfilledSingerSong\r\n} from 'shared/domain/song/typings';\r\nimport MusicList from 'shared/components/MusicList';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface RouteParams {\r\n  id?: string;\r\n}\r\n\r\nconst SingerDetail: React.FC<RouteComponentProps<RouteParams>> = props => {\r\n  const singerId = props.match.params.id;\r\n  const { addAndPlaySong } = Container.useContainer();\r\n\r\n  const [singer, setSinger] = useState<FulfilledSingerDetail>();\r\n\r\n  const query = useMemo(() => (singerId ? { singerId } : undefined), [\r\n    singerId\r\n  ]);\r\n\r\n  const { data: songList, loadMore, hasMore } = usePagination({\r\n    type: 'ROLL',\r\n    fetcher: SongUsecase.getSingerSongList,\r\n    query,\r\n    onError: e => message.error(e.message),\r\n    disabled: !singerId\r\n  });\r\n\r\n  const getSingerDetail = async (singerId: string) => {\r\n    try {\r\n      const result = await SongUsecase.getSingerDetail(singerId);\r\n      setSinger(result);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const onBack = () => {\r\n    props.history.goBack();\r\n  };\r\n\r\n  const onSongSelect = (song: FulfilledSingerSong) => {\r\n    addAndPlaySong({\r\n      singerName: song.singerName,\r\n      songId: song.songId,\r\n      songName: song.songName,\r\n      image: song.songPic\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (singerId) {\r\n      getSingerDetail(singerId);\r\n    }\r\n  }, [singerId]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <InfiniteScroller\r\n        loadMore={loadMore}\r\n        hasMore={hasMore}\r\n        initialLoad={false}\r\n        threshold={10}\r\n        useWindow={false}\r\n      >\r\n        <MusicList\r\n          title={singer && singer.singerName}\r\n          cover={singer && singer.avatar}\r\n          songList={songList}\r\n          onBack={onBack}\r\n          onSongSelect={onSongSelect}\r\n        />\r\n      </InfiniteScroller>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingerDetail;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\nimport { FulfilledRank } from 'shared/domain/song/typings';\r\nimport { LOCAL_PATHS } from 'shared/constants';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nconst RankList: React.FC<RouteComponentProps> = props => {\r\n  const [rankList, setRankList] = useState<FulfilledRank[]>([]);\r\n\r\n  const getRankList = async () => {\r\n    try {\r\n      const result = await SongUsecase.getRankList();\r\n      setRankList(result);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const onRankClick = (rank: FulfilledRank) => () => {\r\n    props.history.push(LOCAL_PATHS.rank.detail.getPathByParams(rank.type));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getRankList();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.list}>\r\n        <ul>\r\n          {rankList.map(rank => (\r\n            <li\r\n              key={rank.type}\r\n              className={styles.item}\r\n              onClick={onRankClick(rank)}\r\n            >\r\n              <div className={styles.icon}>\r\n                <img\r\n                  width=\"100\"\r\n                  height=\"100\"\r\n                  src={rank.thirdPic}\r\n                  alt={rank.name}\r\n                />\r\n              </div>\r\n              <div className={styles.info}>\r\n                <span className={styles.name}>{rank.name}</span>\r\n                <span className={styles.comment}>{rank.comment}</span>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RankList;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport InfiniteScroller from 'react-infinite-scroller';\r\n\r\nimport MusicList from 'shared/components/MusicList';\r\n\r\nimport SongUsecase from 'shared/domain/song';\r\n\r\nimport Container from 'shared/container';\r\nimport usePagination from 'shared/hooks/usePagination';\r\n\r\nimport message from 'shared/lib/message';\r\n\r\nimport { FulfilledRank, FulfilledSingerSong } from 'shared/domain/song/typings';\r\n\r\nimport styles from './index.module.scss';\r\n\r\ninterface RankDetailRouteParamProps {\r\n  type: string;\r\n}\r\n\r\nconst RankDetail: React.FC<RouteComponentProps<\r\n  RankDetailRouteParamProps\r\n>> = props => {\r\n  const rankType = Number(props.match.params.type);\r\n  const { addAndPlaySong } = Container.useContainer();\r\n  const [rank, setRank] = useState<FulfilledRank>();\r\n\r\n  const getRankList = async (rankType: number) => {\r\n    try {\r\n      const result = await SongUsecase.getRankList();\r\n      const matched = result.find(item => item.type === rankType);\r\n      setRank(matched);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const query = useMemo(() => ({ type: rankType }), [rankType]);\r\n\r\n  const { data: songList, loadMore, hasMore } = usePagination({\r\n    type: 'ROLL',\r\n    fetcher: SongUsecase.getRankSongList,\r\n    query,\r\n    onError: e => message.error(e.message)\r\n  });\r\n\r\n  const onBack = () => {\r\n    props.history.goBack();\r\n  };\r\n\r\n  const onSongSelect = (song: FulfilledSingerSong) => {\r\n    addAndPlaySong({\r\n      singerName: song.singerName,\r\n      songId: song.songId,\r\n      songName: song.songName,\r\n      image: song.songPic\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getRankList(rankType);\r\n  }, [rankType]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <InfiniteScroller\r\n        loadMore={loadMore}\r\n        hasMore={hasMore}\r\n        initialLoad={false}\r\n        threshold={10}\r\n        useWindow={false}\r\n      >\r\n        <MusicList\r\n          title={rank && rank.name}\r\n          cover={rank && rank.secondPic}\r\n          songList={songList}\r\n          onBack={onBack}\r\n          onSongSelect={onSongSelect}\r\n        />\r\n      </InfiniteScroller>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RankDetail;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nimport { LOCAL_PATHS } from 'shared/constants';\r\n\r\nimport Recommend from './Recommend';\r\nimport SingerList from './singer/List';\r\nimport SingerDetail from './singer/Detail';\r\nimport RankList from './rank/List';\r\nimport RankDetail from './rank/Detail';\r\n\r\nconst Routes: React.FC = () => {\r\n  return (\r\n    <>\r\n      <Route\r\n        path={LOCAL_PATHS.recommend.routePath}\r\n        exact\r\n        component={Recommend}\r\n      />\r\n      <Route\r\n        path={LOCAL_PATHS.singer.list.routePath}\r\n        exact\r\n        component={SingerList}\r\n      />\r\n      <Route\r\n        path={LOCAL_PATHS.singer.detail.routePath}\r\n        exact\r\n        component={SingerDetail}\r\n      />\r\n      <Route\r\n        path={LOCAL_PATHS.rank.list.routePath}\r\n        exact\r\n        component={RankList}\r\n      />\r\n      <Route\r\n        path={LOCAL_PATHS.rank.detail.routePath}\r\n        exact\r\n        component={RankDetail}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from 'react';\r\nimport {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from 'react-router-dom';\r\n\r\nimport Container from 'shared/container';\r\n\r\nimport Header from 'shared/components/Header';\r\nimport Tabs from 'shared/components/Tabs';\r\nimport Player from 'business/Player';\r\nimport Routes from 'pages/Routes';\r\n\r\nimport { LOCAL_PATHS, BASE_NAME } from 'shared/constants';\r\n\r\nimport 'assets/styles/reset.scss';\r\nimport 'assets/styles/base.scss';\r\nimport 'assets/styles/icon.scss';\r\n\r\nconst VConsole = require('vconsole/dist/vconsole.min.js');\r\nnew VConsole();\r\n\r\nconst App: React.FC = () => {\r\n  const tabs = [\r\n    { label: '推荐', path: LOCAL_PATHS.recommend.routePath },\r\n    { label: '歌手', path: LOCAL_PATHS.singer.list.routePath },\r\n    { label: '排行', path: LOCAL_PATHS.rank.list.routePath },\r\n    { label: '搜索', path: LOCAL_PATHS.search.routePath }\r\n  ];\r\n\r\n  return (\r\n    <Container.Provider>\r\n      <Header />\r\n      <Router basename={BASE_NAME}>\r\n        <Tabs tabs={tabs} />\r\n        <Switch>\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            render={() => <Redirect to={LOCAL_PATHS.recommend.routePath} />}\r\n          />\r\n          <Routes />\r\n        </Switch>\r\n      </Router>\r\n      <Player />\r\n    </Container.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}