(this["webpackJsonpmusic-mweb"]=this["webpackJsonpmusic-mweb"]||[]).push([[0],{10:function(e,t,n){e.exports={container:"MiniPlayer_container__1fcGD",visible:"MiniPlayer_visible__3Dz5A",cd:"MiniPlayer_cd__3HsXL",cdImageWrapper:"MiniPlayer_cdImageWrapper__2tfuC",cdImage:"MiniPlayer_cdImage__3M2rJ",rotate:"MiniPlayer_rotate__2jjF3",playing:"MiniPlayer_playing__2EPEA",text:"MiniPlayer_text__1UzVX",name:"MiniPlayer_name__nSDYy",desc:"MiniPlayer_desc__2I3fU",control:"MiniPlayer_control__2t91O",playIcon:"MiniPlayer_playIcon__28-Nl",listIcon:"MiniPlayer_listIcon__2ASrg"}},14:function(e,t,n){e.exports={header:"MusicList_header__2DSAu",backIcon:"MusicList_backIcon__ePdxO",title:"MusicList_title__37IYn",cover:"MusicList_cover__vrLrC",mask:"MusicList_mask__3Z-Vc",playerWrapper:"MusicList_playerWrapper__3wUJP",play:"MusicList_play__tskpk",playIcon:"MusicList_playIcon__1Ln_z",text:"MusicList_text__3jabf",songListContainer:"MusicList_songListContainer__1KQLk"}},16:function(e,t,n){e.exports={mask:"Confirm_mask__2URXs",visible:"Confirm_visible__GxLGs",body:"Confirm_body__3F1Jn",content:"Confirm_content__2c74C",footer:"Confirm_footer__3gJ17",footerBtn:"Confirm_footerBtn__1UKhk",closeBtn:"Confirm_closeBtn__2Q5QL"}},17:function(e,t,n){e.exports={container:"Recommend_container__1_pE7",content:"Recommend_content__3O6lw",listTitle:"Recommend_listTitle__22osE",item:"Recommend_item__VMkzA",icon:"Recommend_icon__2aP8r",text:"Recommend_text__3uP3k",name:"Recommend_name__2WM6a",desc:"Recommend_desc__2c1DP","loading-container":"Recommend_loading-container__3ctAi"}},19:function(e,t,n){e.exports={item:"SongList_item__1boDc",rank:"SongList_rank__Ff-ju",icon:"SongList_icon__2Z1k4",text:"SongList_text__bwiI0",content:"SongList_content__coXSI",name:"SongList_name__1R3FQ",desc:"SongList_desc__3LlhI"}},20:function(e,t,n){e.exports={container:"List_container__28AaT",list:"List_list__2O6T7",item:"List_item__2T6I7",icon:"List_icon__IDvQM",info:"List_info__3TZOt",name:"List_name__1hi-u",comment:"List_comment__H9sM8"}},27:function(e,t,n){e.exports={header:"Header_header__3VPBX",icon:"Header_icon__3K7p0",text:"Header_text__2nUCj",mine:"Header_mine__1ifKZ",iconMine:"Header_iconMine__1ynUa"}},28:function(e,t,n){e.exports={container:"ProgressBar_container__-ZAvS",inner:"ProgressBar_inner__1EIxV",progress:"ProgressBar_progress__3mEJg",progressBtnWrapper:"ProgressBar_progressBtnWrapper__1O2X1",progressBtn:"ProgressBar_progressBtn__1OCt0"}},29:function(e,t,n){e.exports={container:"List_container__189Un",list:"List_list__3dnNW",item:"List_item__iZXqJ",avatar:"List_avatar__1hjoO",name:"List_name__26KdE"}},31:function(e,t,n){e.exports={container:"styles_container__3PIvH",message:"styles_message__2w9kq",content:"styles_content__TvzOl"}},36:function(e,t,n){e.exports={tab:"Tabs_tab__2UsYl",item:"Tabs_item__3ZvGw",link:"Tabs_link__PNMpC"}},37:function(e,t,n){e.exports={container:"ProgressCircle_container__1W7ZF",background:"ProgressCircle_background__2bFqW",progress:"ProgressCircle_progress__1rjw9"}},55:function(e,t,n){},56:function(e,t,n){e.exports={container:"Detail_container__3Z3sL"}},57:function(e,t,n){e.exports={container:"Detail_container__35C0U"}},6:function(e,t,n){e.exports={container:"FullScreenPlayer_container__1WBCF",visible:"FullScreenPlayer_visible__3wYjU",background:"FullScreenPlayer_background__EhGlJ",top:"FullScreenPlayer_top__3dxkU",back:"FullScreenPlayer_back__24XoF",backIcon:"FullScreenPlayer_backIcon__nl8Za",title:"FullScreenPlayer_title__2whcd",subtitle:"FullScreenPlayer_subtitle__15SDT",middle:"FullScreenPlayer_middle__3mfhj",middleLeft:"FullScreenPlayer_middleLeft__3jXL2",cdWrapper:"FullScreenPlayer_cdWrapper__9QpDm",cdImage:"FullScreenPlayer_cdImage__2Tir_",rotate:"FullScreenPlayer_rotate__2o1sX",playing:"FullScreenPlayer_playing__PlMf-",lyricWrapper:"FullScreenPlayer_lyricWrapper__3QkAU",lyric:"FullScreenPlayer_lyric__u2TmU",bottom:"FullScreenPlayer_bottom__Qn1G5",progressWrapper:"FullScreenPlayer_progressWrapper__3bjBe",time:"FullScreenPlayer_time__G0wxb",left:"FullScreenPlayer_left__AQYyE",right:"FullScreenPlayer_right__1g-nO",progressBar:"FullScreenPlayer_progressBar__2RYdW",operations:"FullScreenPlayer_operations__1zkkf",icon:"FullScreenPlayer_icon__3g624",disable:"FullScreenPlayer_disable__1UPqk",leftIcon:"FullScreenPlayer_leftIcon__3xJ0-",centerIcon:"FullScreenPlayer_centerIcon__3Xqyh",rightIcon:"FullScreenPlayer_rightIcon__14U9V",favoriteIcon:"FullScreenPlayer_favoriteIcon__2YgGX"}},60:function(e,t,n){e.exports=n(93)},8:function(e,t,n){e.exports={container:"PlayListModal_container__374-Z",visible:"PlayListModal_visible__36jZw",body:"PlayListModal_body__34_-S",header:"PlayListModal_header__S-RLN",modeIcon:"PlayListModal_modeIcon__1ENBU",modeText:"PlayListModal_modeText__2l8oY",clear:"PlayListModal_clear__2gMK6",clearIcon:"PlayListModal_clearIcon__ZtDnR",list:"PlayListModal_list__3qi0u",item:"PlayListModal_item__2Caa-",current:"PlayListModal_current__2r4d2",songName:"PlayListModal_songName__1qGO5",like:"PlayListModal_like__1o4kB",delete:"PlayListModal_delete__7ohBb",close:"PlayListModal_close__lqFSM"}},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),i=n.n(c),s=n(30),o=n(18),l=n(2),u=n.n(l),m=n(5),d=n(26),p=n(4),f=n(52);function g(e){return"function"===typeof e}var v=function(e,t,n){var r=Object(a.useState)((function(){return o()})),c=Object(p.a)(r,2),i=c[0],s=c[1];function o(){var a=e.getItem(t);return a?JSON.parse(a):g(n)?n():n}return[i,function(a){if("undefined"===typeof a)e.removeItem(t),s(n);else if(g(a)){var r=a(o());e.setItem(t,JSON.stringify(r)),s(r)}else e.setItem(t,JSON.stringify(a)),s(a)}]};var _=function(e,t){return v(localStorage,e,t)},h=n(9),b=n(24),y=n(21),O=n(58),j=n(33),N=n(51),E=n(59),P=n(35),k=n.n(P),S={routePath:"/recommend",getPathByParams:function(){return"/recommend"}},x={list:{routePath:"/singer/list",getPathByParams:function(){return"/singer/list"}},detail:{routePath:"/singer/detail/:id",getPathByParams:function(e){return"/singer/detail/".concat(e)}}},I={list:{routePath:"/rank/list",getPathByParams:function(){return"/rank/list"}},detail:{routePath:"/rank/detail/:type",getPathByParams:function(e){return"/rank/detail/".concat(e)}}},L={routePath:"/search",getPathByParams:function(){return"/search"}},w=function(e){function t(e){var n,a=e.code,r=void 0===a?"":a,c=e.message,i=void 0===c?"":c;return Object(y.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,i))).code=void 0,n.code=r,n}return Object(N.a)(t,e),t}(Object(E.a)(Error)),M=new(function(){function e(t){var n=t.defaults,a=void 0===n?{}:n,r=t.reqInterceptors,c=void 0===r?{}:r,i=t.resInterceptors,s=void 0===i?{}:i;Object(y.a)(this,e),this.instance=void 0,this.instance=k.a.create(Object(h.a)({},a,{timeout:5e4})),this.instance.interceptors.request.use(c.onFulfilled||function(e){return e},c.onRejected||function(e){return Promise.reject(e)});this.instance.interceptors.response.use(s.onFulfilled||function(e){return e},s.onRejected||function(e){return e.response?Promise.reject(new w({code:e.response.status,message:e.message})):Promise.reject(new w({code:0,message:"uncaught exception"}))})}return Object(b.a)(e,[{key:"handleResponse",value:function(e){return e.success?e.data:Promise.reject(new w({code:e.code,message:e.message}))}},{key:"head",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.head(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a,r,c,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,this.instance.get(t,Object(h.a)({},a,{params:n}));case 3:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.delete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.post(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.put(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.patch(t,n,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",this.handleResponse(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"all",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.all(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"spread",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.spread(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({defaults:{baseURL:"https://www.mxnzp.com/api",headers:{common:{app_id:"rtgogkfkohrlhiiz",app_secret:"SzA5YUpBTXFVWFVkQUlDOTRtVDh4QT09"}}},reqInterceptors:{onFulfilled:function(e){return Object(h.a)({},e,{params:Object(h.a)({},e.params,{app_id:"rtgogkfkohrlhiiz",app_secret:"SzA5YUpBTXFVWFVkQUlDOTRtVDh4QT09"})})}},resInterceptors:{onFulfilled:function(e){var t=e.data,n=e.config.responseType,a={data:null,code:1,message:"success",success:!0};return null===t||void 0===t?a.data={}:"object"!==typeof t||n&&"json"!==n?a.data=t:a={data:t.data,code:t.code,message:t.msg,success:1===t.code},Object(h.a)({},e,{data:a})},onRejected:function(e){if(!e.response)return Promise.reject(new w({code:0,message:"uncaught exception"}));var t=e.response.data,n=t.code,a=t.msg;return Promise.reject(new w({code:n||e.response.status,message:a||""}))}}}),C=function(){return M.get("/music/recommend/list")},F=function(){return M.get("/music/order/list")},R=function(e){return M.get("/music/order/song/list",e)},T=function(e){return M.get("/music/singer/search",{keyWord:e})},B=function(e){return M.get("/music/singer/detail",{singerId:e})},D=function(e){return M.get("/music/singer/song/list",e)},W=function(e){return M.get("/music/song/search",e)},U=function(e){return M.get("/music/song/detail",{songId:e})},q=function(e){return M.get(e,{responseType:"text"})},A={getRecommendList:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerPic:e.pic_singer,singerName:e.author,albumTitle:e.album_title,language:e.language,proxyCompany:e.si_proxycompany,info:e.info,hugeSongPic:e.pic_huge,bigSongPic:e.pic_big,premiumSongPic:e.pic_premium,smallSongPic:e.pic_small,publishTime:e.publishtime}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{name:e.name,type:e.type,comment:e.comment,firstPic:e.pic_s192,secondPic:e.pic_s444,thirdPic:e.pic_s260,forthPic:e.pic_s210}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRankSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,a=n.list.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerName:e.author,proxyCompany:e.si_proxycompany,duration:e.file_duration,lrcLink:e.lrclink,country:e.country,songPic:e.pic_big,language:e.language,publishTime:e.publishtime}})),r=Object(h.a)({},n,{list:a}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSingerList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSingerDetail:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,a={artistId:n.artist_id,singerId:n.singerId,singerName:n.name,stature:n.stature,avatar:n.avatar,constellation:n.constellation,intro:n.intro,company:n.company,country:n.country,birth:n.birth},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSingerSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return n=e.sent,a=n.list.map((function(e){return{songId:e.song_id,songName:e.title,singerId:e.ting_uid,singerName:e.author,proxyCompany:e.si_proxycompany,duration:e.file_duration,lrcLink:e.lrclink,country:e.country,songPic:e.pic_big,language:e.language,publishTime:e.publishtime}})),r=Object(h.a)({},n,{list:a}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSongList:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongDetail:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:return n=e.sent,a={songId:n.id,songName:n.songName,albumName:n.albumName,singerName:n.artistName,songPic:n.songPic,lrcLink:n.lrcLink,time:n.time,songLink:n.songLink.replace(/http:/g,"https:"),format:n.format,rate:n.rate,size:n.size},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLyric:function(e){return q(e.replace(/http:/g,"https:"))}};var z,X=navigator.userAgent.toLowerCase();["iphone","ipad","macintosh"].some((function(e){return X.indexOf(e)>-1})),X.indexOf("android");!function(e){e.Sequence="SEQUENCE",e.Loop="LOOP",e.Random="RANDOM"}(z||(z={}));var Q=n(1),Y=n(3),G=n.n(Y),H=n(31),J=n.n(H),V=function(e){var t,n=e.className,c=void 0===n?"":n,i=e.message,s=i.id,o=i.content,l=i.option,u=e.onDestroy,m=(null===l||void 0===l?void 0:l.duration)||3e3;return Object(a.useEffect)((function(){var e=setTimeout((function(){u(s)}),m);return function(){clearTimeout(e)}}),[u,s,m]),r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,J.a.message,!0),Object(Q.a)(t,c,!0),t))},r.a.createElement("main",{className:J.a.content},o))},Z=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(),c=Object(p.a)(n,2),i=c[0],s=c[1],o=function(){return"".concat(Date.now(),"-").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;return Array(e).fill(null).map((function(){return t.charAt(Math.floor(Math.random()*n))})).join("")}())};Object(a.useImperativeHandle)(t,(function(){return{createMessage:function(e,t,n){var a=o();s({id:a,type:e,content:t,option:n})}}}));var l=Object(a.useCallback)((function(e){s(void 0)}),[]);return r.a.createElement("div",{className:J.a.container},i&&r.a.createElement(V,{message:i,onDestroy:l}))})),K=Object(a.createRef)(),$=document.createElement("div");document.body.appendChild($),i.a.render(r.a.createElement(Z,{ref:K}),$);var ee,te=function(e,t,n){K.current&&K.current.createMessage(e,t,n)},ne=function(e,t){te("ERROR",e,t)},ae=Object(f.a)((function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(p.a)(c,2),s=i[0],o=i[1],l=_("music_mweb:play_list",[]),f=Object(p.a)(l,2),g=f[0],v=f[1],h=Object(a.useState)(),b=Object(p.a)(h,2),y=b[0],O=b[1],j=Object(a.useState)([]),N=Object(p.a)(j,2),E=N[0],P=N[1],k=Object(a.useState)(z.Sequence),S=Object(p.a)(k,2),x=S[0],I=S[1],L=Object(a.useState)(-1),w=Object(p.a)(L,2),M=w[0],C=w[1],F=_("music_mweb:history_terms",[]),R=Object(p.a)(F,2),T=R[0],B=R[1],D=_("music_mweb:favorite_list",[]),W=Object(p.a)(D,2),U=W[0],q=W[1],X=function(){var e=Object(m.a)(u.a.mark((function e(t,n,a){var c,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0<=n&&n<t.length)){e.next=15;break}if(c=t[n],(i=c.songId)===a){e.next=13;break}return e.next=7,A.getSongDetail(i);case 7:return s=e.sent,e.next=10,A.getLyric(s.lrcLink);case 10:o=e.sent,O({songId:i,songName:s.songName,singerName:s.singerName,image:s.songPic,lyric:o,playUrl:s.songLink,duration:s.time}),r(!0);case 13:e.next=17;break;case 15:r(!1),O(void 0);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),ne(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){X(g,M,null===y||void 0===y?void 0:y.songId)}),[g,M,y]),{isPlaying:n,setIsPlaying:r,isPlayerFullScreen:s,setIsPlayerFullScreen:o,playList:g,setPlayList:v,sequenceList:E,setSequenceList:P,playMode:x,setPlayMode:I,songIndex:M,setSongIndex:C,historyTerms:T,setHistoryTerms:B,selectPlay:function(e,t){P(e),v(e),C(t),o(!0)},randomPlay:function(e){P(e),I(z.Random);var t=function(e){for(var t,n,a=e.slice(),r=0;r<a.length;r++){var c=(t=0,n=r,Math.floor(Math.random()*(n-t+1)+t)),i=a[r];a[r]=e[c],a[c]=i}return a}(e);v(t),C(0),o(!0)},playingSong:y,addAndPlaySong:function(e){var t=g.findIndex((function(t){return t.songId===e.songId}));t>-1?C(t):(v((function(t){return t?[].concat(Object(d.a)(t),[e]):[e]})),C(g.length)),o(!0)},deleteSong:function(e){var t=g.slice(),n=E.slice(),a=M,r=t.findIndex((function(t){return t.songId===e.songId}));t.splice(r,1);var c=n.findIndex((function(t){return t.songId===e.songId}));n.splice(c,1),(M>r||a===t.length)&&a--,v(t),P(n),C(a)},clearPlayList:function(){v([]),P([]),C(-1),r(!1)},favoriteList:U,saveFavorite:function(e){q((function(t){return t?function(e,t,n,a){var r=(e=e.slice()).findIndex(n);return 0===r?e:(r>0&&e.splice(r,1),e.unshift(t),a&&e.length>a&&e.pop(),e)}(t,e,(function(t){return t.songId===e.songId}),200):[e]}))},deleteFavorite:function(e){q((function(t){return t?function(e,t){var n=(e=e.slice()).findIndex(t);return n>-1&&e.splice(n,1),e}(t,(function(t){return t.songId===e.songId})):[]}))}}})),re=n(27),ce=n.n(re),ie=function(e){var t=e.onUserIconClick;return r.a.createElement("header",{className:ce.a.header},r.a.createElement("i",{className:ce.a.icon}),r.a.createElement("h1",{className:ce.a.text},"\u5927\u529b\u97f3\u4e50"),r.a.createElement("div",{className:ce.a.mine},r.a.createElement("i",{className:G()(Object(Q.a)({"icon-mine":!0},ce.a.iconMine,!0)),onClick:function(){t&&t()}})))},se=n(36),oe=n.n(se),le=function(e){var t=e.tabs;return r.a.createElement("div",{className:oe.a.tab},t.map((function(e){return r.a.createElement(s.b,{key:e.path,to:e.path,className:oe.a.item},r.a.createElement("span",{className:oe.a.link},e.label))})))},ue=n(28),me=n.n(ue),de=function(e){var t,n,c,i=e.className,s=void 0===i?"":i,o=e.percent,l=void 0===o?0:o,u=e.onPercentChange,m=Object(a.useRef)(null),d=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(a.useRef)({initiated:!1,startX:-1,left:-1}),g=(null===(t=m.current)||void 0===t?void 0:t.clientWidth)||0,v=g-16,_=(null===(n=d.current)||void 0===n?void 0:n.clientWidth)||0,h=function(e){d.current&&(d.current.style.width="".concat(e,"px")),p.current&&(p.current.style.transform="translate3d(".concat(e,"px, 0, 0)"))};return Object(a.useEffect)((function(){l>=0&&!f.current.initiated&&h(v*l)}),[l,f,v]),r.a.createElement("div",{className:G()((c={},Object(Q.a)(c,me.a.container,!0),Object(Q.a)(c,s,!0),c)),ref:m},r.a.createElement("div",{className:me.a.inner},r.a.createElement("div",{className:me.a.progress,ref:d}),r.a.createElement("div",{className:me.a.progressBtnWrapper,ref:p,onTouchStart:function(e){f.current.initiated=!0,f.current.startX=e.touches[0].pageX,f.current.left=_},onTouchMove:function(e){var t=e.touches[0].pageX-f.current.startX,n=Math.min(Math.max(0,f.current.left+t),g-16);h(n)},onTouchEnd:function(){f.current.initiated=!1,u&&u(_/v)}},r.a.createElement("span",{className:me.a.progressBtn}))))},pe=n(6),fe=n.n(pe),ge=function(e){var t,n,a,c,i,s,o,l,u,m,d,p,f=e.className,g=void 0===f?"":f,v=e.visible,_=e.lyric,h=e.playMode,b=e.currentTime,y=e.playingSong,O=e.isPlaying,j=e.onBack,N=e.onPlayingToggle,E=e.onPercentChange,P=e.onPlayModeChange,k=e.onPrevClick,S=e.onNextClick,x=e.onFavoriteSave,I=e.onFavoriteDelete,L=b&&y?b/y.duration:0,w=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString().length;n<t;)e="0"+e,n++;return e},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=Math.floor(e);var t=Math.floor(e/60),n=w(e%60);return"".concat(t,":").concat(n)};return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,fe.a.container,!0),Object(Q.a)(t,fe.a.visible,v),Object(Q.a)(t,g,!0),t))},r.a.createElement("div",{className:fe.a.background},r.a.createElement("img",{width:"100%",height:"100%",src:null===y||void 0===y?void 0:y.image,alt:null===y||void 0===y?void 0:y.songName})),r.a.createElement("header",{className:G()((n={},Object(Q.a)(n,fe.a.top,!0),Object(Q.a)(n,fe.a.visible,v),n))},r.a.createElement("div",{className:fe.a.back,onClick:j},r.a.createElement("i",{className:G()(Object(Q.a)({"icon-back":!0},fe.a.backIcon,!0))})),r.a.createElement("h1",{className:fe.a.title},null===y||void 0===y?void 0:y.songName),r.a.createElement("h2",{className:fe.a.subtitle},null===y||void 0===y?void 0:y.singerName)),r.a.createElement("main",{className:fe.a.middle},r.a.createElement("section",{className:fe.a.middleLeft},r.a.createElement("div",{className:fe.a.cdWrapper},r.a.createElement("img",{className:G()((a={},Object(Q.a)(a,fe.a.cdImage,!0),Object(Q.a)(a,fe.a.playing,O),a)),src:null===y||void 0===y?void 0:y.image,alt:null===y||void 0===y?void 0:y.songName})),r.a.createElement("div",{className:fe.a.lyricWrapper},r.a.createElement("span",{className:fe.a.lyric},_)))),r.a.createElement("footer",{className:G()((c={},Object(Q.a)(c,fe.a.bottom,!0),Object(Q.a)(c,fe.a.visible,v),c))},r.a.createElement("div",{className:fe.a.progressWrapper},r.a.createElement("span",{className:G()((i={},Object(Q.a)(i,fe.a.time,!0),Object(Q.a)(i,fe.a.left,!0),i))},M(b)),r.a.createElement(de,{className:fe.a.progressBar,percent:L,onPercentChange:E}),r.a.createElement("span",{className:G()((s={},Object(Q.a)(s,fe.a.time,!0),Object(Q.a)(s,fe.a.right,!0),s))},M(null===y||void 0===y?void 0:y.duration))),r.a.createElement("div",{className:fe.a.operations},r.a.createElement("div",{className:G()((o={"icon-left":!0},Object(Q.a)(o,fe.a.icon,!0),Object(Q.a)(o,fe.a.leftIcon,!0),o))},r.a.createElement("i",{className:G()({"icon-sequence":h===z.Sequence,"icon-loop":h===z.Loop,"icon-random":h===z.Random}),onClick:function(){var e=Object.values(z),t=(e.findIndex((function(e){return e===h}))+1)%e.length;P&&P(e[t])}})),r.a.createElement("div",{className:G()((l={},Object(Q.a)(l,fe.a.icon,!0),Object(Q.a)(l,fe.a.leftIcon,!0),l))},r.a.createElement("i",{className:"icon-prev",onClick:k})),r.a.createElement("div",{className:G()((u={},Object(Q.a)(u,fe.a.icon,!0),Object(Q.a)(u,fe.a.centerIcon,!0),u))},r.a.createElement("i",{className:G()({"icon-pause":O,"icon-play":!O}),onClick:N})),r.a.createElement("div",{className:G()((m={},Object(Q.a)(m,fe.a.icon,!0),Object(Q.a)(m,fe.a.rightIcon,!0),m))},r.a.createElement("i",{className:"icon-next",onClick:S})),r.a.createElement("div",{className:G()((d={},Object(Q.a)(d,fe.a.icon,!0),Object(Q.a)(d,fe.a.rightIcon,!0),d))},r.a.createElement("i",{className:G()((p={},Object(Q.a)(p,fe.a.favoriteIcon,null===y||void 0===y?void 0:y.isFavorite),Object(Q.a)(p,"icon-favorite",null===y||void 0===y?void 0:y.isFavorite),Object(Q.a)(p,"icon-not-favorite",!(null===y||void 0===y?void 0:y.isFavorite)),p)),onClick:function(){y&&(y.isFavorite?I&&I(y):x&&x(y))}})))))},ve=n(37),_e=n.n(ve),he=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.radius,i=void 0===c?100:c,s=e.percent,o=void 0===s?0:s,l=e.children,u=100*Math.PI,m=(1-o)*u;return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,_e.a.container,!0),Object(Q.a)(t,a,!0),t))},r.a.createElement("svg",{width:i,height:i,viewBox:"0 0 100 100",version:"1.1"},r.a.createElement("circle",{className:_e.a.background,cx:"50",cy:"50",r:"50",fill:"transparent"}),r.a.createElement("circle",{className:_e.a.progress,r:"50",cx:"50",cy:"50",fill:"transparent",strokeDasharray:u,strokeDashoffset:m})),l)},be=n(10),ye=n.n(be),Oe=function(e){var t,n,a,c,i=e.className,s=void 0===i?"":i,o=e.visible,l=e.percent,u=e.isPlaying,m=e.playingSong,d=e.onPlayerClick,p=e.onPlayingToggle,f=e.onPlayListShow;return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,ye.a.container,!0),Object(Q.a)(t,ye.a.visible,o),Object(Q.a)(t,s,!0),t)),onClick:d},r.a.createElement("div",{className:ye.a.cd},r.a.createElement("div",{className:ye.a.cdImageWrapper},r.a.createElement("img",{className:G()((n={},Object(Q.a)(n,ye.a.cdImage,!0),Object(Q.a)(n,ye.a.playing,u),n)),width:"40",height:"40",src:null===m||void 0===m?void 0:m.image,alt:null===m||void 0===m?void 0:m.songName}))),r.a.createElement("div",{className:ye.a.text},r.a.createElement("span",{className:ye.a.name},null===m||void 0===m?void 0:m.songName),r.a.createElement("span",{className:ye.a.desc},null===m||void 0===m?void 0:m.singerName)),r.a.createElement("div",{className:ye.a.control},r.a.createElement(he,{percent:l,radius:32},r.a.createElement("i",{className:G()((a={},Object(Q.a)(a,ye.a.playIcon,!0),Object(Q.a)(a,"icon-pause-mini",u),Object(Q.a)(a,"icon-play-mini",!u),a)),onClick:function(e){e.stopPropagation(),p&&p()}}))),r.a.createElement("div",{className:ye.a.control},r.a.createElement("i",{className:G()((c={},Object(Q.a)(c,ye.a.listIcon,!0),Object(Q.a)(c,"icon-playlist",!0),c)),onClick:function(e){e.stopPropagation(),f&&f()}})))},je=n(8),Ne=n.n(je),Ee=(ee={},Object(Q.a)(ee,z.Sequence,"\u987a\u5e8f\u64ad\u653e"),Object(Q.a)(ee,z.Random,"\u968f\u673a\u64ad\u653e"),Object(Q.a)(ee,z.Loop,"\u5355\u66f2\u5faa\u73af"),ee),Pe=function(e){var t,n,a=e.className,c=void 0===a?"":a,i=e.visible,s=e.playMode,o=e.playList,l=void 0===o?[]:o,u=e.playingSongId,m=e.onClose,d=e.onSelect,p=e.onFavoriteSave,f=e.onFavoriteDelete,g=e.onRemove,v=e.onClear,_=function(e){return function(){d&&d(e)}},h=function(e){return function(t){t.stopPropagation(),e.isFavorite?f&&f(e):p&&p(e)}},b=function(e){return function(t){t.stopPropagation(),g&&g(e)}};return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,Ne.a.container,!0),Object(Q.a)(t,c,!0),Object(Q.a)(t,Ne.a.visible,i),t)),onClick:m},r.a.createElement("div",{className:Ne.a.body,onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:Ne.a.header},r.a.createElement("i",{className:G()((n={},Object(Q.a)(n,Ne.a.modeIcon,!0),Object(Q.a)(n,"icon-sequence",s===z.Sequence),Object(Q.a)(n,"icon-loop",s===z.Loop),Object(Q.a)(n,"icon-random",s===z.Random),n))}),r.a.createElement("span",{className:Ne.a.modeText},s?Ee[s]:""),r.a.createElement("span",{className:Ne.a.clear,onClick:v},r.a.createElement("i",{className:G()(Object(Q.a)({"icon-clear":!0},Ne.a.clearIcon,!0))}))),r.a.createElement("ul",{className:Ne.a.list},l.map((function(e){var t;return r.a.createElement("li",{key:e.songId,className:Ne.a.item,onClick:_(e)},r.a.createElement("i",{className:G()((t={},Object(Q.a)(t,Ne.a.current,!0),Object(Q.a)(t,"icon-play",e.songId===u),t))}),r.a.createElement("span",{className:Ne.a.songName},e.songName),r.a.createElement("span",{className:Ne.a.like,onClick:h(e)},r.a.createElement("i",{className:G()({"icon-favorite":e.isFavorite,"icon-not-favorite":!e.isFavorite})})),r.a.createElement("span",{className:Ne.a.delete,onClick:b(e)},r.a.createElement("i",{className:"icon-delete"})))}))),r.a.createElement("span",{className:Ne.a.close,onClick:m},"\u5173\u95ed")))},ke=n(16),Se=n.n(ke),xe=function(e){var t,n,a=e.className,c=void 0===a?"":a,i=e.visible,s=e.maskClosable,o=e.content,l=e.confirmText,u=void 0===l?"\u786e\u5b9a":l,m=e.cancelText,d=void 0===m?"\u53d6\u6d88":m,p=e.onConfirm,f=e.onCancel;return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,Se.a.mask,!0),Object(Q.a)(t,c,!0),Object(Q.a)(t,Se.a.visible,i),t)),onClick:function(){s&&p&&p()}},r.a.createElement("div",{className:Se.a.body},r.a.createElement("div",{className:Se.a.content},o),r.a.createElement("div",{className:Se.a.footer,onClick:function(e){e.stopPropagation()}},r.a.createElement("span",{className:G()((n={},Object(Q.a)(n,Se.a.footerBtn,!0),Object(Q.a)(n,Se.a.closeBtn,!0),n)),onClick:f},d),r.a.createElement("span",{className:Se.a.footerBtn,onClick:p},u))))},Ie=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,Le={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"},we=function(){},Me=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we;Object(y.a)(this,e),this.lyric=void 0,this.tags=void 0,this.lines=void 0,this.handler=void 0,this.state=void 0,this.curNum=void 0,this.startStamp=void 0,this.pauseStamp=void 0,this.timer=void 0,this.lyric=t,this.tags={},this.lines=[],this.handler=n,this.state="PAUSE",this.init()}return Object(b.a)(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.lines.length&&(this.state="PLAYING",this.curNum=this.findCurNum(e),this.startStamp=+new Date-e,t||this.callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this.playRest()))}},{key:"togglePlay",value:function(){var e=+new Date;"PLAYING"===this.state?(this.stop(),this.pauseStamp=e):(this.state="PLAYING",this.play((this.pauseStamp||e)-(this.startStamp||e),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state="PAUSE",clearTimeout(this.timer)}},{key:"seek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.play(e)}},{key:"init",value:function(){this.initTag(),this.initLines()}},{key:"initTag",value:function(){for(var e in Le)if(Le.hasOwnProperty(e)){var t=this.lyric.match(new RegExp("\\[".concat(Le[e],":([^\\]]*)]"),"i"));this.tags[e]=t&&t[1]||""}}},{key:"initLines",value:function(){var e=this.lyric.split("\n"),t=!0,n=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var i=r.value,s=Ie.exec(i);if(s){var o=i.replace(Ie,"").trim();o&&this.lines.push({time:60*+s[1]*1e3+1e3*+s[2]+10*(+s[3]||0),lyricText:o})}}}catch(l){n=!0,a=l}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}this.lines.sort((function(e,t){return e.time-t.time}))}},{key:"findCurNum",value:function(e){for(var t=0;t<this.lines.length;t++)if(e<=this.lines[t].time)return t;return this.lines.length-1}},{key:"callHandler",value:function(e){e<0||this.handler({lineNum:e,lyricText:this.lines[e].lyricText})}},{key:"playRest",value:function(){var e=this,t=this.lines[this.curNum].time-(+new Date-this.startStamp);this.timer=setTimeout((function(){e.callHandler(e.curNum++),e.curNum<e.lines.length&&"PLAYING"===e.state&&e.playRest()}),t)}}]),e}(),Ce=n(55),Fe=n.n(Ce),Re=function(){var e=ae.useContainer(),t=e.isPlaying,n=e.playMode,c=e.setPlayMode,i=e.playList,s=e.songIndex,o=e.setSongIndex,l=e.setIsPlaying,u=e.playingSong,m=e.isPlayerFullScreen,d=e.setIsPlayerFullScreen,f=e.clearPlayList,g=e.favoriteList,v=e.saveFavorite,_=e.deleteFavorite,b=e.addAndPlaySong,y=e.deleteSong,O=Object(a.useState)(!1),j=Object(p.a)(O,2),N=j[0],E=j[1],P=Object(a.useState)(!1),k=Object(p.a)(P,2),S=k[0],x=k[1],I=Object(a.useState)(!1),L=Object(p.a)(I,2),w=L[0],M=L[1],C=Object(a.useState)(),F=Object(p.a)(C,2),R=F[0],T=F[1],B=Object(a.useState)(),D=Object(p.a)(B,2),W=D[0],U=D[1],q=Object(a.useRef)(null),A=Object(a.useState)(0),X=Object(p.a)(A,2),Q=X[0],Y=X[1],G=u?Q/u.duration:0,H=Object(a.useMemo)((function(){return new Set(g.map((function(e){return e.songId})))}),[g]),J=function(){l((function(e){return!e}))},V=function(){q.current&&(q.current.currentTime=0,q.current.play()),R&&R.seek()},Z=function(e){U(e.lyricText)},K=Object(a.useMemo)((function(){return i.map((function(e){return Object(h.a)({},e,{isFavorite:H.has(e.songId)})}))}),[i,H]),$=Object(a.useMemo)((function(){return u&&Object(h.a)({},u,{isFavorite:H.has(u.songId)})}),[u,H]);return Object(a.useEffect)((function(){Y(0),M(!1),u&&T((function(e){return e&&e.stop(),new Me(u.lyric,Z)}))}),[u]),Object(a.useEffect)((function(){R&&R.togglePlay()}),[R,t]),Object(a.useEffect)((function(){q.current&&(t&&w?q.current.play():w&&q.current.pause())}),[t,w]),r.a.createElement("div",{className:Fe.a.container},r.a.createElement(ge,{visible:m,lyric:W,playMode:n,currentTime:Q,isPlaying:t,playingSong:$,onBack:function(){d(!1)},onPlayingToggle:J,onPercentChange:function(e){var n=((null===u||void 0===u?void 0:u.duration)||0)*e;q.current&&(q.current.currentTime=n),t||J(),R&&R.seek(1e3*n)},onPlayModeChange:c,onPrevClick:function(){w&&(1===i.length?V():o((function(e){var t=(e-1)%i.length;return-1===t&&(t=i.length-1),t})),t||J())},onNextClick:function(){w&&(1===i.length?V():o((function(e){return(e+1)%i.length})),t||J())},onFavoriteSave:v,onFavoriteDelete:_}),r.a.createElement(Oe,{visible:!m&&!!u,isPlaying:t,percent:G,playingSong:u,onPlayingToggle:J,onPlayerClick:function(){d(!0)},onPlayListShow:function(){return x(!0)}}),r.a.createElement(Pe,{visible:S,playMode:n,playList:K,playingSongId:null===u||void 0===u?void 0:u.songId,onClose:function(){return x(!1)},onSelect:b,onRemove:y,onClear:function(){return E(!0)},onFavoriteSave:v,onFavoriteDelete:_}),r.a.createElement(xe,{visible:N,content:"\u662f\u5426\u6e05\u7a7a\u64ad\u653e\u5217\u8868",confirmText:"\u6e05\u7a7a",onCancel:function(){return E(!1)},onConfirm:function(){f(),E(!1),x(!1)}}),r.a.createElement("audio",{ref:q,src:null===u||void 0===u?void 0:u.playUrl,onCanPlay:function(){M(!0)},onTimeUpdate:function(e){Y(e.target.currentTime)},onEnded:function(){n===z.Loop?V():function(){var e=i.length;1===e?V():o((s+1)%e);t||J()}()},onError:function(){ne("\u64ad\u653e\u51fa\u9519")}}))},Te=n(17),Be=n.n(Te),De=function(e){var t=ae.useContainer().addAndPlaySong,n=Object(a.useState)([]),c=Object(p.a)(n,2),i=c[0],s=c[1],o=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getRecommendList();case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ne(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",{className:Be.a.container},r.a.createElement("div",{className:Be.a.content},r.a.createElement("h1",{className:Be.a.listTitle},"\u70ed\u95e8\u6b4c\u5355\u63a8\u8350"),r.a.createElement("ul",null,i.map((function(e){return r.a.createElement("li",{key:e.songId,className:Be.a.item,onClick:(n=e,function(){t({songId:n.songId,songName:n.songName,singerName:n.singerName,image:n.hugeSongPic})})},r.a.createElement("div",{className:Be.a.icon},r.a.createElement("img",{src:e.smallSongPic,width:"60",height:"60",alt:e.songName})),r.a.createElement("div",{className:Be.a.text},r.a.createElement("h2",{className:Be.a.name},e.singerName),r.a.createElement("span",{className:Be.a.desc},e.songName)));var n})))))},We=n(29),Ue=n.n(We),qe=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),c=n[0],i=n[1],s=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.searchSingerList("c");case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ne(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(t){return function(){e.history.push(x.detail.getPathByParams(t.singerId))}};return Object(a.useEffect)((function(){s()}),[]),r.a.createElement("div",{className:Ue.a.container},r.a.createElement("ul",{className:Ue.a.list},c.map((function(e){return r.a.createElement("li",{key:e.singerId,className:Ue.a.item,onClick:o(e)},r.a.createElement("img",{src:e.singerPic,alt:e.singerName,className:Ue.a.avatar}),r.a.createElement("span",{className:Ue.a.name},e.singerName))}))))},Ae=n(34),ze=n.n(Ae),Xe=function(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(p.a)(i,2),o=s[0],l=s[1];return[Object(a.useCallback)(function(){var t=Object(m.a)(u.a.mark((function t(){var n,a=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,e.apply(void 0,a);case 3:return n=t.sent,c(!0),l(!1),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e]),r,o]};var Qe=new(function(){function e(){Object(y.a)(this,e)}return Object(b.a)(e,[{key:"fetch",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetcher,a=t.pageNo,r=t.queryData,c=n,e.next=4,c(Object(h.a)({},r,{page:a}));case 4:return i=e.sent,e.abrupt("return",i.list);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Ye=function(e){return Qe},Ge=function(e){var t=e||{},n=t.type,r=t.fetcher,c=t.pageSize,i=void 0===c?10:c,s=t.query,o=t.initialPageNo,l=void 0===o?1:o,f=t.defaultValue,g=void 0===f?[]:f,v=t.onError,_=t.disabled,h=void 0!==_&&_,b=Object(a.useState)(h),y=Object(p.a)(b,2),O=y[0],j=y[1],N=Object(a.useState)(),E=Object(p.a)(N,2),P=E[0],k=E[1],S=Object(a.useState)(g),x=Object(p.a)(S,2),I=x[0],L=x[1],w=Object(a.useRef)(g);w.current=I;var M=!P||I.length>=i*P.pageNo,C=Xe(function(){var e=Object(m.a)(u.a.mark((function e(t){var a,c,i,s,o,m,p,f,g,_;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageNo,c=t.pageSize,i=t.queryData,s=t.isRefetch,e.prev=1,o=Ye(n),e.next=5,o.fetch({fetcher:r,pageNo:a,pageSize:c,queryData:i});case 5:m=e.sent,p=m||[],f=w.current,s?(g=f.slice(0,(a-1)*c),_=f.slice(a*c),L([].concat(Object(d.a)(g),Object(d.a)(p),Object(d.a)(_)))):L(a===l?p:f.concat(p)),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(1),!v){e.next=17;break}v(e.t0),e.next=18;break;case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),F=Object(p.a)(C,3),R=F[0],T=F[1],B=F[2],D=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O||!P||l>t||t>P.pageNo)){e.next=2;break}return e.abrupt("return");case 2:R({pageNo:t,pageSize:P.pageSize,queryData:s,isRefetch:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){j(h)}),[h]),Object(a.useEffect)((function(){k({pageSize:i,pageNo:l})}),[s,l,i]),Object(a.useEffect)((function(){!O&&P&&R({pageNo:P.pageNo,pageSize:P.pageSize,queryData:s})}),[P,O]),{data:I,refetch:D,hasMore:M,loadMore:function(){!O&&M&&k((function(e){return{pageSize:i,pageNo:e?e.pageNo+1:l}}))},isLoaded:T,isPending:B}},He=n(19),Je=n.n(He),Ve=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.songList,i=e.onSongSelect,s=function(e,t){return function(){i&&i(e,t)}};return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,Je.a.container,!0),Object(Q.a)(t,a,!0),t))},r.a.createElement("ul",null,null===c||void 0===c?void 0:c.map((function(e,t){return r.a.createElement("li",{key:e.songId,className:Je.a.item,onClick:s(e,t)},r.a.createElement("div",{className:Je.a.rank},r.a.createElement("span",{className:Je.a.text},t+1)),r.a.createElement("div",{className:Je.a.content},r.a.createElement("h2",{className:Je.a.name},e.songName),r.a.createElement("span",{className:Je.a.desc},e.singerName)))}))))},Ze=n(14),Ke=n.n(Ze),$e=function(e){var t,n=e.className,a=void 0===n?"":n,c=e.title,i=e.cover,s=e.songList,o=e.onRandomPlay,l=e.onSongSelect,u=e.onBack;return r.a.createElement("div",{className:G()((t={},Object(Q.a)(t,Ke.a.container,!0),Object(Q.a)(t,a,!0),t))},r.a.createElement("header",{className:Ke.a.header},r.a.createElement("i",{className:G()(Object(Q.a)({"icon-back":!0},Ke.a.backIcon,!0)),onClick:u}),r.a.createElement("h1",{className:Ke.a.title},c)),r.a.createElement("div",{className:Ke.a.cover,style:{backgroundImage:"url(".concat(i,")")}},r.a.createElement("div",{className:Ke.a.mask}),r.a.createElement("div",{className:Ke.a.playerWrapper},r.a.createElement("div",{className:Ke.a.play},r.a.createElement("i",{className:G()(Object(Q.a)({"icon-play":!0},Ke.a.playIcon,!0))}),r.a.createElement("span",{className:Ke.a.text,onClick:o},"\u968f\u673a\u64ad\u653e\u5168\u90e8")))),r.a.createElement("div",null,r.a.createElement(Ve,{className:Ke.a.songListContainer,songList:s,onSongSelect:l})))},et=n(56),tt=n.n(et),nt=function(e){var t=e.match.params.id,n=ae.useContainer().addAndPlaySong,c=Object(a.useState)(),i=Object(p.a)(c,2),s=i[0],o=i[1],l=Object(a.useMemo)((function(){return t?{singerId:t}:void 0}),[t]),d=Ge({type:"ROLL",fetcher:A.getSingerSongList,query:l,onError:function(e){return ne(e.message)},disabled:!t}),f=d.data,g=d.loadMore,v=d.hasMore,_=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getSingerDetail(t);case 3:n=e.sent,o(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ne(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&_(t)}),[t]),r.a.createElement("div",{className:tt.a.container},r.a.createElement(ze.a,{loadMore:g,hasMore:v,initialLoad:!1,threshold:10,useWindow:!1},r.a.createElement($e,{title:s&&s.singerName,cover:s&&s.avatar,songList:f,onBack:function(){e.history.goBack()},onSongSelect:function(e){n({singerName:e.singerName,songId:e.songId,songName:e.songName,image:e.songPic})}})))},at=n(20),rt=n.n(at),ct=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),c=n[0],i=n[1],s=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getRankList();case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ne(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(t){return function(){e.history.push(I.detail.getPathByParams(t.type))}};return Object(a.useEffect)((function(){s()}),[]),r.a.createElement("div",{className:rt.a.container},r.a.createElement("div",{className:rt.a.list},r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.type,className:rt.a.item,onClick:o(e)},r.a.createElement("div",{className:rt.a.icon},r.a.createElement("img",{width:"100",height:"100",src:e.thirdPic,alt:e.name})),r.a.createElement("div",{className:rt.a.info},r.a.createElement("span",{className:rt.a.name},e.name),r.a.createElement("span",{className:rt.a.comment},e.comment)))})))))},it=n(57),st=n.n(it),ot=function(e){var t=Number(e.match.params.type),n=ae.useContainer().addAndPlaySong,c=Object(a.useState)(),i=Object(p.a)(c,2),s=i[0],o=i[1],l=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getRankList();case 3:n=e.sent,a=n.find((function(e){return e.type===t})),o(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ne(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),d=Object(a.useMemo)((function(){return{type:t}}),[t]),f=Ge({type:"ROLL",fetcher:A.getRankSongList,query:d,onError:function(e){return ne(e.message)}}),g=f.data,v=f.loadMore,_=f.hasMore;return Object(a.useEffect)((function(){l(t)}),[t]),r.a.createElement("div",{className:st.a.container},r.a.createElement(ze.a,{loadMore:v,hasMore:_,initialLoad:!1,threshold:10,useWindow:!1},r.a.createElement($e,{title:s&&s.name,cover:s&&s.secondPic,songList:g,onBack:function(){e.history.goBack()},onSongSelect:function(e){n({singerName:e.singerName,songId:e.songId,songName:e.songName,image:e.songPic})}})))},lt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{path:S.routePath,exact:!0,component:De}),r.a.createElement(o.b,{path:x.list.routePath,exact:!0,component:qe}),r.a.createElement(o.b,{path:x.detail.routePath,exact:!0,component:nt}),r.a.createElement(o.b,{path:I.list.routePath,exact:!0,component:ct}),r.a.createElement(o.b,{path:I.detail.routePath,exact:!0,component:ot}))};n(89),n(90),n(91);new(n(92));var ut=function(){var e=[{label:"\u63a8\u8350",path:S.routePath},{label:"\u6b4c\u624b",path:x.list.routePath},{label:"\u6392\u884c",path:I.list.routePath},{label:"\u641c\u7d22",path:L.routePath}];return r.a.createElement(ae.Provider,null,r.a.createElement(ie,null),r.a.createElement(s.a,{basename:"/"},r.a.createElement(le,{tabs:e}),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",render:function(){return r.a.createElement(o.a,{to:S.routePath})}}),r.a.createElement(lt,null))),r.a.createElement(Re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.c9e0c074.chunk.js.map